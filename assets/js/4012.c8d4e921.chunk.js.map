{"version":3,"file":"assets/js/4012.c8d4e921.chunk.js","mappings":"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","sources":["webpack://job-tracker-dashboard/./src/shared/lib/url/updateURLParams.ts","webpack://job-tracker-dashboard/./src/pages/LoopsPage/components/Header.tsx","webpack://job-tracker-dashboard/./src/entities/loop/lib/filters/buildCanonicalFiltersFromLoop.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/format/loopFormat.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/detectPlatformFromUrl.ts","webpack://job-tracker-dashboard/./src/entities/loop/ui/AddMatchModal/AddMatchModal.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/EditSourcesModal/EditSourcesModal.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/CompactFilters/CompactFilters.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSettingsModal/LoopSettingsModal.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSearchLinks/components/PlatformLinkCard.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSearchLinks/useLoopSearchLinksState.ts","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSearchLinks/LoopSearchLinks.tsx","webpack://job-tracker-dashboard/./src/entities/loop/lib/links/searchLinks.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/filters/mapCanonicalToSearchFilters.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/filters/mapWorkModeToRemoteMode.ts","webpack://job-tracker-dashboard/./src/pages/LoopsPage/components/LoopDetailsView.tsx","webpack://job-tracker-dashboard/./src/pages/LoopsPage/components/LoopsListView.tsx","webpack://job-tracker-dashboard/./src/pages/LoopsPage/LoopsPage.tsx"],"sourcesContent":["import type { Location, NavigateFunction } from \"react-router-dom\";\n\ntype Updates = Record<string, string | number | boolean | null | undefined>;\n\ntype Options = {\n  replace?: boolean;\n};\n\n/**\n * Small helper for manipulating query params without manually building strings.\n *\n * Rules:\n * - null/undefined/false => remove param\n * - true => set \"1\"\n * - number/string => set as string\n */\nexport function updateURLParams(\n  navigate: NavigateFunction,\n  location: Location,\n  updates: Updates,\n  options: Options = { replace: true }\n) {\n  const sp = new URLSearchParams(location.search);\n\n  for (const [key, value] of Object.entries(updates)) {\n    if (value === null || value === undefined || value === false) {\n      sp.delete(key);\n      continue;\n    }\n\n    if (value === true) {\n      sp.set(key, \"1\");\n      continue;\n    }\n\n    sp.set(key, String(value));\n  }\n\n  const nextSearch = sp.toString();\n  navigate(\n    {\n      pathname: location.pathname,\n      search: nextSearch ? `?${nextSearch}` : \"\",\n    },\n    { replace: options.replace ?? true }\n  );\n}\n","import React from \"react\";\n\nexport function Header({\n  title,\n  subtitle,\n  right,\n}: {\n  title: string;\n  subtitle?: string;\n  right?: React.ReactNode;\n}) {\n  return (\n    <div className=\"flex items-start justify-between gap-3\">\n      <div>\n        <div className=\"text-2xl font-semibold text-foreground\">{title}</div>\n        {subtitle ? (\n          <div className=\"mt-1 text-sm text-muted-foreground\">{subtitle}</div>\n        ) : null}\n      </div>\n      {right}\n    </div>\n  );\n}\nexport function SectionHeader({\n  title,\n  subtitle,\n  right,\n}: {\n  title: string;\n  subtitle?: string;\n  right?: React.ReactNode;\n}) {\n  return (\n    <div className=\"flex items-center justify-between gap-3\">\n      <div>\n        <div className=\"text-base font-semibold text-foreground\">{title}</div>\n        {subtitle ? (\n          <div className=\"mt-1 text-sm text-muted-foreground\">{subtitle}</div>\n        ) : null}\n      </div>\n      {right}\n    </div>\n  );\n}\n\nexport function CardText({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"rounded-2xl border border-border bg-card p-6 text-sm text-muted-foreground\">\n      {children}\n    </div>\n  );\n}\n","import type { CanonicalFilters } from \"src/entities/loop/model\";\nimport { DEFAULT_CANONICAL_FILTERS } from \"src/entities/loop/model\";\n\ntype UnknownRecord = Record<string, unknown>;\n\nfunction isRecord(v: unknown): v is UnknownRecord {\n  return typeof v === \"object\" && v !== null;\n}\n\nfunction asString(v: unknown, fallback: string): string {\n  return typeof v === \"string\" ? v : fallback;\n}\n\nfunction asBoolean(v: unknown, fallback: boolean): boolean {\n  return typeof v === \"boolean\" ? v : fallback;\n}\n\nfunction asNumber(v: unknown, fallback: number): number {\n  const n = typeof v === \"number\" ? v : Number(v);\n  return Number.isFinite(n) ? n : fallback;\n}\n\nfunction pickFrom<T extends readonly (string | number)[]>(\n  v: unknown,\n  allowed: T,\n  fallback: T[number]\n): T[number] {\n   \n  return (allowed as readonly unknown[]).includes(v) ? (v as T[number]) : fallback;\n}\n\n/**\n * Делает CanonicalFilters безопасными и полными.\n *\n * Важно:\n * - Firestore/URL/localStorage -> всегда unknown\n * - UI и RTK store -> только CanonicalFilters\n */\nexport function buildCanonicalFiltersFromLoop(loop: unknown): CanonicalFilters {\n  const src: UnknownRecord = (() => {\n    if (!isRecord(loop)) return {};\n\n    // поддерживаем оба варианта:\n    // 1) loop.filters = { ... }\n    // 2) прямо объект фильтров\n    const maybeFilters = loop.filters;\n    if (isRecord(maybeFilters)) return maybeFilters;\n    return loop;\n  })();\n\n  // Собираем строго по контракту CanonicalFilters.\n  // Любые неизвестные значения -> fallback на DEFAULT_CANONICAL_FILTERS.\n  return {\n    role: asString(src.role, DEFAULT_CANONICAL_FILTERS.role),\n    location: asString(src.location, DEFAULT_CANONICAL_FILTERS.location),\n    radiusKm: pickFrom(\n      asNumber(src.radiusKm, DEFAULT_CANONICAL_FILTERS.radiusKm),\n      [5, 10, 20, 30, 50, 100] as const,\n      DEFAULT_CANONICAL_FILTERS.radiusKm\n    ),\n\n    workMode: pickFrom(\n      src.workMode,\n      [\"any\", \"onsite\", \"hybrid\", \"remote\", \"remote_only\"] as const,\n      DEFAULT_CANONICAL_FILTERS.workMode\n    ),\n\n    seniority: pickFrom(\n      src.seniority,\n      [\"intern\", \"junior\", \"mid\", \"senior\", \"lead\"] as const,\n      DEFAULT_CANONICAL_FILTERS.seniority\n    ),\n\n    employmentType: pickFrom(\n      src.employmentType,\n      [\"full_time\", \"part_time\", \"contract\", \"internship\", \"ausbildung\"] as const,\n      DEFAULT_CANONICAL_FILTERS.employmentType\n    ),\n\n    postedWithin: pickFrom(\n      asNumber(src.postedWithin, DEFAULT_CANONICAL_FILTERS.postedWithin),\n      [1, 3, 7, 14, 30] as const,\n      DEFAULT_CANONICAL_FILTERS.postedWithin\n    ),\n\n    includeKeywords: asString(\n      src.includeKeywords,\n      DEFAULT_CANONICAL_FILTERS.includeKeywords\n    ),\n    excludeKeywords: asString(\n      src.excludeKeywords,\n      DEFAULT_CANONICAL_FILTERS.excludeKeywords\n    ),\n\n    excludeAgencies: asBoolean(\n      src.excludeAgencies,\n      DEFAULT_CANONICAL_FILTERS.excludeAgencies\n    ),\n    language: pickFrom(\n      src.language,\n      [\"any\", \"de\", \"en\"] as const,\n      DEFAULT_CANONICAL_FILTERS.language\n    ),\n  };\n}\n","import { LOOP_MATCH_STATUSES } from \"src/entities/loop/model\";\nimport type { LoopMatchStatus } from \"src/entities/loopMatch/model/types\";\n\nexport function labelStatus(s: LoopMatchStatus) {\n  return LOOP_MATCH_STATUSES.find((x) => x.value === s)?.label ?? s;\n}\n\nexport function prettyStatus(s: string) {\n  return s.split(\"_\").join(\" \").toUpperCase();\n}\n\nexport function joinTitles(titles: string[]) {\n  return titles\n    .map((t) => String(t ?? \"\").trim())\n    .filter(Boolean)\n    .join(\" OR \");\n}\n\n\n","import type { LoopPlatform } from \"../model\";\n\n/**\n * Lightweight URL classifier.\n *\n * SonarJS previously flagged the old implementation for high cognitive complexity\n * due to a long chain of if/else statements. The table-driven approach below is\n * easier to maintain and keeps complexity low.\n */\nconst HOST_RULES: Array<{ needle: string; platform: LoopPlatform }> = [\n  { needle: \"linkedin.com\", platform: \"linkedin\" },\n  { needle: \"indeed.\", platform: \"indeed\" },\n  { needle: \"glassdoor.\", platform: \"glassdoor\" },\n  { needle: \"monster.\", platform: \"monster\" },\n  { needle: \"stepstone.\", platform: \"stepstone\" },\n  { needle: \"xing.\", platform: \"xing\" },\n  { needle: \"github.com\", platform: \"github\" },\n  { needle: \"wellfound.\", platform: \"wellfound\" },\n  { needle: \"angel.co\", platform: \"wellfound\" },\n  { needle: \"levels.fyi\", platform: \"levels\" },\n];\n\nexport function detectPlatformFromUrl(url: string | null | undefined): LoopPlatform {\n  if (!url) return \"other\";\n\n  let host = \"\";\n  try {\n    host = new URL(url).host.toLowerCase();\n  } catch {\n    // Not a valid URL (e.g. user pasted a partial string)\n    return \"other\";\n  }\n\n  for (const rule of HOST_RULES) {\n    if (host.includes(rule.needle)) return rule.platform;\n  }\n\n  return \"other\";\n}\n","import { Formik } from \"formik\";\nimport type { TFunction } from \"i18next\";\nimport { useEffect, useMemo, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Yup from \"yup\";\n\nimport { useCreateMatchMutation } from \"src/entities/loopMatch/api\";\nimport type { LoopMatchStatus } from \"src/entities/loopMatch/model/types\";\nimport { getErrorMessage } from \"src/shared/lib\";\nimport { Button, InlineError, Input, Modal, TextArea } from \"src/shared/ui\";\nimport { FormField } from \"src/shared/ui/Form/FormField/FormField\";\n\nimport { detectPlatformFromUrl } from \"../../lib/detectPlatformFromUrl\";\nimport type { LoopPlatform } from \"../../model\";\nimport { LOOP_MATCH_STATUSES, LOOP_PLATFORMS } from \"../../model/constants\";\n\ntype Props = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  loopId: string;\n\n  defaultPlatform?: LoopPlatform;\n};\n\ntype Values = {\n  title: string;\n  company: string;\n  location: string;\n  platform: LoopPlatform;\n  url: string;\n  description: string;\n  status: LoopMatchStatus;\n  matchedAt: string;\n};\n\nfunction isoNow() {\n  return new Date().toISOString();\n}\n\nfunction platformOrDefault(p?: LoopPlatform): LoopPlatform {\n  return p ?? \"linkedin\";\n}\n\nfunction tryParseUrl(input: string): URL | null {\n  const v = input.trim();\n  if (!v) return null;\n\n  try {\n    return new URL(v);\n  } catch {\n    try {\n      return new URL(`https://${v}`);\n    } catch {\n      return null;\n    }\n  }\n}\n\nconst platformValues = LOOP_PLATFORMS.map((p) => p.value) as LoopPlatform[];\nconst statusValues = LOOP_MATCH_STATUSES.map((s) => s.value) as LoopMatchStatus[];\n\nfunction makeSchema(t: TFunction) {\n  return Yup.object({\n    title: Yup.string()\n      .trim()\n      .min(\n        2,\n        t(\"loops.validation.titleRequired\", { defaultValue: \"Title is required\" })\n      )\n      .required(\n        t(\"loops.validation.titleRequired\", { defaultValue: \"Title is required\" })\n      ),\n\n    company: Yup.string()\n      .trim()\n      .min(\n        2,\n        t(\"loops.validation.companyRequired\", { defaultValue: \"Company is required\" })\n      )\n      .required(\n        t(\"loops.validation.companyRequired\", { defaultValue: \"Company is required\" })\n      ),\n\n    location: Yup.string()\n      .trim()\n      .min(\n        2,\n        t(\"loops.validation.locationRequired\", { defaultValue: \"Location is required\" })\n      )\n      .required(\n        t(\"loops.validation.locationRequired\", { defaultValue: \"Location is required\" })\n      ),\n\n    platform: Yup.mixed<LoopPlatform>()\n      .oneOf(platformValues)\n      .required(\n        t(\"loops.validation.platformRequired\", { defaultValue: \"Platform is required\" })\n      ),\n\n    url: Yup.string()\n      .trim()\n      .required(\n        t(\"loops.validation.urlRequired\", { defaultValue: \"Job URL is required\" })\n      )\n      .test(\n        \"is-url\",\n        t(\"loops.validation.invalidUrl\", { defaultValue: \"Invalid URL\" }),\n        (v) => Boolean(tryParseUrl(v ?? \"\"))\n      ),\n\n    description: Yup.string()\n      .trim()\n      .min(\n        1,\n        t(\"loops.validation.descriptionRequired\", { defaultValue: \"Description is required\" })\n      )\n      .required(\n        t(\"loops.validation.descriptionRequired\", { defaultValue: \"Description is required\" })\n      ),\n\n    status: Yup.mixed<LoopMatchStatus>()\n      .oneOf(statusValues)\n      .required(\n        t(\"loops.validation.statusRequired\", { defaultValue: \"Status is required\" })\n      ),\n\n    matchedAt: Yup.string().trim().required(),\n  }) as Yup.ObjectSchema<Values>;\n}\n\nexport function AddMatchModal({\n  open,\n  onOpenChange,\n  loopId,\n  defaultPlatform,\n}: Props) {\n  const { t } = useTranslation();\n  const [createMatch, st] = useCreateMatchMutation();\n\n  const schema = useMemo(() => makeSchema(t), [t]);\n\n  // If user manually selects a platform, do NOT override it via URL auto-detection.\n  const platformManuallySetRef = useRef(false);\n\n  useEffect(() => {\n    if (open) platformManuallySetRef.current = false;\n  }, [open]);\n\n  const initial: Values = useMemo(\n    () => ({\n      title: \"\",\n      company: \"\",\n      location: \"\",\n      platform: platformOrDefault(defaultPlatform),\n      url: \"\",\n      description: \"\",\n      status: \"SAVED\",\n      matchedAt: isoNow(),\n    }),\n    [defaultPlatform]\n  );\n\n  const disabled = st.isLoading;\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={t(\"loops.addMatch\", { defaultValue: \"Add match\" })}\n      description={t(\"loops.addMatchDescription\", {\n        defaultValue: \"Paste the job URL and fill details. This saves a match to your loop.\",\n      })}\n    >\n      <Formik<Values>\n        initialValues={initial}\n        enableReinitialize\n        validationSchema={schema}\n        onSubmit={async (values, helpers) => {\n          helpers.setStatus(undefined);\n\n          try {\n            await createMatch({\n              loopId,\n              title: values.title,\n              company: values.company,\n              location: values.location,\n              platform: values.platform,\n              url: values.url,\n              description: values.description,\n              status: values.status,\n              matchedAt: values.matchedAt,\n            }).unwrap();\n\n            onOpenChange(false);\n          } catch (e) {\n            helpers.setStatus(\n              getErrorMessage(e) ||\n                t(\"loops.failedToSaveMatch\", { defaultValue: \"Failed to save match\" })\n            );\n          }\n        }}\n      >\n        {(f) => {\n          const commonError =\n            (typeof f.status === \"string\" ? f.status : undefined) ||\n            (st.isError ? getErrorMessage(st.error) : undefined);\n\n          const canSubmit = !disabled && f.dirty;\n\n          return (\n            <form onSubmit={f.handleSubmit} className=\"space-y-4\">\n              {commonError ? <InlineError message={commonError} /> : null}\n\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n                <FormField\n                  label={t(\"loops.jobTitle\", { defaultValue: \"Job title\" })}\n                  required\n                  error={\n                    f.touched.title ? (f.errors.title as string | undefined) : undefined\n                  }\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"title\"\n                      value={f.values.title}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.jobTitlePlaceholder\", {\n                        defaultValue: \"Frontend Developer\",\n                      })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField\n                  label={t(\"loops.company\", { defaultValue: \"Company\" })}\n                  required\n                  error={\n                    f.touched.company\n                      ? (f.errors.company as string | undefined)\n                      : undefined\n                  }\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"company\"\n                      value={f.values.company}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.companyPlaceholder\", { defaultValue: \"Acme GmbH\" })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField\n                  label={t(\"loops.location\", { defaultValue: \"Location\" })}\n                  required\n                  error={\n                    f.touched.location\n                      ? (f.errors.location as string | undefined)\n                      : undefined\n                  }\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"location\"\n                      value={f.values.location}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.locationJobPlaceholder\", { defaultValue: \"Berlin / Remote\" })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField label={t(\"loops.platform\", { defaultValue: \"Platform\" })} required>\n                  {({ id, describedBy }) => (\n                    <select\n                      id={id}\n                      name=\"platform\"\n                      value={f.values.platform}\n                      onChange={(e) => {\n                        platformManuallySetRef.current = true;\n                        f.handleChange(e);\n                      }}\n                      onBlur={f.handleBlur}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                      className=\"h-10 w-full rounded-xl border border-border bg-input px-3 text-sm text-foreground\"\n                    >\n                      {LOOP_PLATFORMS.map((p) => (\n                        <option key={p.value} value={p.value}>\n                          {p.label}\n                        </option>\n                      ))}\n                    </select>\n                  )}\n                </FormField>\n\n                <FormField\n                  label={t(\"loops.jobUrl\", { defaultValue: \"Job URL\" })}\n                  required\n                  hint={t(\"loops.jobUrlHint\", {\n                    defaultValue: \"You can paste without https:// (it will be normalized on save).\",\n                  })}\n                  error={f.touched.url ? (f.errors.url as string | undefined) : undefined}\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"url\"\n                      value={f.values.url}\n                      onChange={(e) => {\n                        const next = e.target.value;\n                        f.setFieldValue(\"url\", next);\n\n                        const detected = detectPlatformFromUrl(next);\n                        if (!platformManuallySetRef.current && detected) {\n                          f.setFieldValue(\"platform\", detected);\n                        }\n                      }}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.jobUrlPlaceholder\", { defaultValue: \"company.com/job\" })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField label={t(\"loops.status\", { defaultValue: \"Status\" })} required>\n                  {({ id, describedBy }) => (\n                    <select\n                      id={id}\n                      name=\"status\"\n                      value={f.values.status}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                      className=\"h-10 w-full rounded-xl border border-border bg-input px-3 text-sm text-foreground\"\n                    >\n                      {LOOP_MATCH_STATUSES.map((s) => (\n                        <option key={s.value} value={s.value}>\n                          {t(`loops.status.${s.value}`, { defaultValue: s.label })}\n                        </option>\n                      ))}\n                    </select>\n                  )}\n                </FormField>\n              </div>\n\n              <FormField\n                label={t(\"loops.description\", { defaultValue: \"Description\" })}\n                required\n                error={\n                  f.touched.description\n                    ? (f.errors.description as string | undefined)\n                    : undefined\n                }\n              >\n                {({ id, describedBy, invalid }) => (\n                  <TextArea\n                    id={id}\n                    name=\"description\"\n                    value={f.values.description}\n                    onChange={f.handleChange}\n                    onBlur={f.handleBlur}\n                    placeholder={t(\"loops.descriptionPlaceholder\", {\n                      defaultValue: \"Paste key parts of the job description here…\",\n                    })}\n                    state={invalid ? \"error\" : \"default\"}\n                    aria-invalid={invalid}\n                    aria-describedby={describedBy}\n                    disabled={disabled}\n                  />\n                )}\n              </FormField>\n\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  type=\"submit\"\n                  variant=\"default\"\n                  shadow=\"sm\"\n                  shape=\"lg\"\n                  disabled={!canSubmit}\n                >\n                  {disabled\n                    ? t(\"loops.saving\", { defaultValue: \"Saving...\" })\n                    : t(\"loops.saveMatch\", { defaultValue: \"Save match\" })}\n                </Button>\n\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  shape=\"lg\"\n                  onClick={() => onOpenChange(false)}\n                  disabled={disabled}\n                >\n                  {t(\"loops.cancel\", { defaultValue: \"Cancel\" })}\n                </Button>\n              </div>\n            </form>\n          );\n        }}\n      </Formik>\n    </Modal>\n  );\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { Button, Modal } from \"src/shared/ui\";\n\nimport {\n  ALL_PLATFORMS,\n  GROUPS,\n  PLATFORM_LABEL_BY_ID,\n  RECOMMENDED_PLATFORMS,\n  platformsByGroup,\n  type LoopPlatform,\n} from \"../../model\";\n\ntype Props = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n\n  value: LoopPlatform[];\n  disabled?: boolean;\n\n  onSave: (next: LoopPlatform[]) => Promise<void> | void;\n};\n\nfunction uniquePlatforms(list: LoopPlatform[]) {\n  const set = new Set<LoopPlatform>();\n  for (const p of list) set.add(p);\n  return Array.from(set);\n}\n\nfunction sortByLabel(list: LoopPlatform[]) {\n  return [...list].sort((a, b) => {\n    const la = PLATFORM_LABEL_BY_ID[a] ?? a;\n    const lb = PLATFORM_LABEL_BY_ID[b] ?? b;\n    return la.localeCompare(lb);\n  });\n}\n\nexport function EditSourcesModal({\n  open,\n  onOpenChange,\n  value,\n  disabled,\n  onSave,\n}: Props) {\n  const { t } = useTranslation();\n  const [selected, setSelected] = useState<LoopPlatform[]>(() =>\n    uniquePlatforms(value ?? [])\n  );\n  const [isSaving, setIsSaving] = useState(false);\n\n  useEffect(() => {\n    if (open) setSelected(uniquePlatforms(value ?? []));\n  }, [open, value]);\n\n  const selectedSet = useMemo(() => new Set(selected), [selected]);\n\n  const totalSelected = selected.length;\n\n  const toggle = (p: LoopPlatform) => {\n    setSelected((prev) => {\n      const next = new Set(prev);\n      if (next.has(p)) next.delete(p);\n      else next.add(p);\n      return Array.from(next);\n    });\n  };\n\n  const setPresetRecommended = () => setSelected(RECOMMENDED_PLATFORMS);\n  const setPresetAll = () => setSelected(ALL_PLATFORMS);\n\n  const toggleGroup = (groupId: (typeof GROUPS)[number][\"id\"]) => {\n    const groupPlatforms = platformsByGroup(groupId);\n    setSelected((prev) => {\n      const next = new Set(prev);\n      const allInGroupSelected = groupPlatforms.every((p) => next.has(p));\n      if (allInGroupSelected) {\n        for (const p of groupPlatforms) next.delete(p);\n      } else {\n        for (const p of groupPlatforms) next.add(p);\n      }\n      return Array.from(next);\n    });\n  };\n\n  const canSave = !disabled && !isSaving;\n\n  async function handleSave() {\n    setIsSaving(true);\n    try {\n      await onSave(uniquePlatforms(selected));\n      onOpenChange(false);\n    } finally {\n      setIsSaving(false);\n    }\n  }\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={t(\"loops.editSources\", \"Edit sources\")}\n      description={t(\n        \"loops.editSourcesDescription\",\n        \"Choose job boards/platforms. This controls which search links are generated.\"\n      )}\n      size=\"lg\"\n    >\n      <div className=\"space-y-4\">\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\n          <div className=\"text-sm text-muted-foreground\">\n            {t(\"loops.selected\", \"Selected\")}: {\" \"}\n            <span className=\"font-medium text-foreground\">{totalSelected}</span>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={setPresetRecommended}\n              disabled={disabled || isSaving}\n            >\n              {t(\"loops.recommended\", \"Recommended\")}\n            </Button>\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={setPresetAll}\n              disabled={disabled || isSaving}\n            >\n              {t(\"loops.selectAll\", \"Select all\")}\n            </Button>\n          </div>\n        </div>\n\n        {/* Groups */}\n        <div className=\"rounded-2xl border border-border bg-background p-4 space-y-3\">\n          <div className=\"text-sm font-semibold text-foreground\">\n            {t(\"loops.groups\", \"Groups\")}\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            {GROUPS.map((g) => {\n              const groupPlatforms = platformsByGroup(g.id);\n              const countSelected = groupPlatforms.filter((p) =>\n                selectedSet.has(p)\n              ).length;\n              const isAll =\n                countSelected === groupPlatforms.length &&\n                groupPlatforms.length > 0;\n\n              return (\n                <button\n                  key={g.id}\n                  type=\"button\"\n                  onClick={() => toggleGroup(g.id)}\n                  disabled={disabled || isSaving}\n                  className={[\n                    \"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs transition-colors\",\n                    isAll\n                      ? \"border-primary/50 bg-primary/10 text-foreground\"\n                      : \"border-border bg-card text-muted-foreground\",\n                    disabled || isSaving\n                      ? \"opacity-50 cursor-not-allowed\"\n                      : \"hover:bg-muted/40\",\n                  ].join(\" \")}\n                >\n                  <span className=\"font-medium\">{g.title}</span>\n                  <span className=\"text-[11px] text-muted-foreground\">\n                    {countSelected}/{groupPlatforms.length}\n                  </span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* All Platforms */}\n        <div className=\"rounded-2xl border border-border bg-background p-4 space-y-3\">\n          <div className=\"text-sm font-semibold text-foreground\">\n            {t(\"loops.platforms\", \"Platforms\")}\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-2 md:grid-cols-2\">\n            {sortByLabel(ALL_PLATFORMS).map((p) => {\n              const checked = selectedSet.has(p);\n              const label = PLATFORM_LABEL_BY_ID[p] ?? p;\n\n              return (\n                <label\n                  key={p}\n                  className={[\n                    \"flex items-center gap-3 rounded-xl border px-3 py-2 text-sm\",\n                    checked\n                      ? \"border-primary/40 bg-primary/5\"\n                      : \"border-border bg-card\",\n                    disabled || isSaving\n                      ? \"opacity-50 cursor-not-allowed\"\n                      : \"hover:bg-muted/30\",\n                  ].join(\" \")}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={checked}\n                    onChange={() => toggle(p)}\n                    disabled={disabled || isSaving}\n                  />\n                  <span className=\"text-foreground\">{label}</span>\n                </label>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"default\"\n            shadow=\"sm\"\n            shape=\"lg\"\n            onClick={handleSave}\n            disabled={!canSave}\n          >\n            {isSaving ? t(\"loops.saving\", \"Saving...\") : t(\"loops.save\", \"Save\")}\n          </Button>\n          <Button\n            variant=\"outline\"\n            shape=\"lg\"\n            onClick={() => onOpenChange(false)}\n            disabled={disabled || isSaving}\n          >\n            {t(\"loops.cancel\", \"Cancel\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { Button, FormField, Input } from \"src/shared/ui\";\n\nimport type { CanonicalFilters } from \"../../model\";\n\nconst RADIUS_OPTIONS: CanonicalFilters[\"radiusKm\"][] = [5, 10, 20, 30, 50, 100];\nconst POSTED_WITHIN_OPTIONS: CanonicalFilters[\"postedWithin\"][] = [\n  1, 3, 7, 14, 30,\n];\n\ntype Option<T> = { value: T; label: string };\n\ntype Props = {\n  value: CanonicalFilters;\n  onChange: (next: CanonicalFilters) => void;\n\n  onApply: () => void;\n  onReset: () => void;\n\n  disabled?: boolean;\n};\n\nfunction parseKeywordLine(v: string) {\n  return v.replace(/\\s+/g, \" \").trim();\n}\n\nexport function CompactFilters({\n  value,\n  onChange,\n  onApply,\n  onReset,\n  disabled,\n}: Props) {\n  const { t } = useTranslation();\n  const [advancedOpen, setAdvancedOpen] = useState(false);\n\n  const workModeOptions: Array<Option<CanonicalFilters[\"workMode\"]>> = useMemo(\n    () => [\n      { value: \"any\", label: t(\"loops.workMode.any\", \"Any\") },\n      { value: \"onsite\", label: t(\"loops.workMode.onsite\", \"On-site\") },\n      { value: \"hybrid\", label: t(\"loops.workMode.hybrid\", \"Hybrid\") },\n      { value: \"remote\", label: t(\"loops.workMode.remote\", \"Remote\") },\n      {\n        value: \"remote_only\",\n        label: t(\"loops.workMode.remoteOnly\", \"Remote-only\"),\n      },\n    ],\n    [t]\n  );\n\n  const seniorityOptions: Array<Option<CanonicalFilters[\"seniority\"]>> = useMemo(\n    () => [\n      { value: \"intern\", label: t(\"loops.seniority.intern\", \"Intern\") },\n      { value: \"junior\", label: t(\"loops.seniority.junior\", \"Junior\") },\n      { value: \"mid\", label: t(\"loops.seniority.mid\", \"Mid\") },\n      { value: \"senior\", label: t(\"loops.seniority.senior\", \"Senior\") },\n      { value: \"lead\", label: t(\"loops.seniority.lead\", \"Lead\") },\n    ],\n    [t]\n  );\n\n  const employmentOptions: Array<Option<CanonicalFilters[\"employmentType\"]>> =\n    useMemo(\n      () => [\n        {\n          value: \"full_time\",\n          label: t(\"loops.employment.fullTime\", \"Full-time\"),\n        },\n        {\n          value: \"part_time\",\n          label: t(\"loops.employment.partTime\", \"Part-time\"),\n        },\n        { value: \"contract\", label: t(\"loops.employment.contract\", \"Contract\") },\n        {\n          value: \"internship\",\n          label: t(\"loops.employment.internship\", \"Internship\"),\n        },\n        {\n          value: \"ausbildung\",\n          label: t(\"loops.employment.ausbildung\", \"Ausbildung\"),\n        },\n      ],\n      [t]\n    );\n\n  const languageOptions: Array<Option<CanonicalFilters[\"language\"]>> = useMemo(\n    () => [\n      { value: \"any\", label: t(\"loops.language.any\", \"Any\") },\n      { value: \"de\", label: t(\"loops.language.de\", \"DE\") },\n      { value: \"en\", label: t(\"loops.language.en\", \"EN\") },\n    ],\n    [t]\n  );\n\n  const badges = useMemo(() => {\n    const out: string[] = [];\n    const role = value.role.trim();\n    const location = value.location.trim();\n\n    if (role)\n      out.push(t(\"loops.badgeRole\", \"Role: {{value}}\", { value: role }));\n    if (location)\n      out.push(t(\"loops.badgeLoc\", \"Loc: {{value}}\", { value: location }));\n\n    out.push(\n      t(\"loops.badgeRadius\", \"Radius: {{value}}km\", { value: value.radiusKm })\n    );\n\n    if (value.workMode !== \"any\")\n      out.push(t(\"loops.badgeMode\", \"Mode: {{value}}\", { value: value.workMode }));\n\n    out.push(\n      t(\"loops.badgePosted\", \"Posted: {{value}}d\", { value: value.postedWithin })\n    );\n\n    return out;\n  }, [t, value]);\n\n  return (\n    <div className=\"rounded-2xl border border-border bg-card p-6 space-y-4\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div>\n          <div className=\"text-base font-semibold text-foreground\">\n            {t(\"loops.filtersTitle\", \"Filters\")}\n          </div>\n          <div className=\"mt-1 text-sm text-muted-foreground\">\n            {t(\n              \"loops.filtersSubtitle\",\n              \"Update → Apply → links refresh & saved to loop.\"\n            )}\n          </div>\n\n          {badges.length ? (\n            <div className=\"mt-2 flex flex-wrap gap-2\">\n              {badges.map((b) => (\n                <span\n                  key={b}\n                  className=\"rounded-full border border-border bg-background px-3 py-1 text-xs text-muted-foreground\"\n                >\n                  {b}\n                </span>\n              ))}\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"default\"\n            shadow=\"sm\"\n            shape=\"lg\"\n            onClick={onApply}\n            disabled={disabled}\n          >\n            {t(\"loops.apply\", \"Apply\")}\n          </Button>\n          <Button\n            variant=\"outline\"\n            shape=\"lg\"\n            onClick={onReset}\n            disabled={disabled}\n          >\n            {t(\"loops.reset\", \"Reset\")}\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n        <div className=\"md:col-span-5\">\n          <FormField label={t(\"loops.professionRole\", \"Profession / Role\")}>\n            <Input\n              value={value.role}\n              onChange={(e) => onChange({ ...value, role: e.target.value })}\n              placeholder={t(\n                \"loops.professionRolePlaceholder\",\n                \"Fachinformatiker OR React Developer\"\n              )}\n              disabled={disabled}\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-4\">\n          <FormField label={t(\"loops.location\", \"Location\")}>\n            <Input\n              value={value.location}\n              onChange={(e) => onChange({ ...value, location: e.target.value })}\n              placeholder={t(\"loops.locationPlaceholder\", \"Berlin\")}\n              disabled={disabled}\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label={t(\"loops.radius\", \"Radius\")}>\n            <select\n              value={value.radiusKm}\n              onChange={(e) =>\n                onChange({\n                  ...value,\n                  radiusKm: Number(e.target.value) as CanonicalFilters[\"radiusKm\"],\n                })\n              }\n              className=\"h-10 w-full rounded-xl border border-border bg-input px-3 text-sm text-foreground\"\n              disabled={disabled}\n            >\n              {RADIUS_OPTIONS.map((r) => (\n                <option key={r} value={r}>\n                  {t(\"loops.km\", \"{{value}} km\", { value: r })}\n                </option>\n              ))}\n            </select>\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-1\">\n          <FormField label=\" \" hint=\"\">\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              className=\"w-full\"\n              onClick={() => setAdvancedOpen((v) => !v)}\n              disabled={disabled}\n            >\n              {advancedOpen\n                ? t(\"loops.less\", \"Less\")\n                : t(\"loops.more\", \"More\")}\n            </Button>\n          </FormField>\n        </div>\n      </div>\n\n      {advancedOpen ? (\n        <div className=\"rounded-2xl border border-border bg-background p-4 space-y-4\">\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.workModeTitle\", \"Work mode\")}>\n                <select\n                  value={value.workMode}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      workMode: e.target.value as CanonicalFilters[\"workMode\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {workModeOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.seniorityTitle\", \"Seniority\")}>\n                <select\n                  value={value.seniority}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      seniority: e.target.value as CanonicalFilters[\"seniority\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {seniorityOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.employmentType\", \"Employment type\")}>\n                <select\n                  value={value.employmentType}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      employmentType: e.target.value as CanonicalFilters[\"employmentType\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {employmentOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.postedWithin\", \"Posted within\")}>\n                <select\n                  value={value.postedWithin}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      postedWithin: Number(\n                        e.target.value\n                      ) as CanonicalFilters[\"postedWithin\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {POSTED_WITHIN_OPTIONS.map((d) => (\n                    <option key={d} value={d}>\n                      {t(\"loops.days\", \"{{value}} days\", { value: d })}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n            <div className=\"md:col-span-6\">\n              <FormField\n                label={t(\"loops.includeKeywords\", \"Include keywords\")}\n                hint={t(\n                  \"loops.includeKeywordsHint\",\n                  \"Optional, will be appended to search query\"\n                )}\n              >\n                <Input\n                  value={value.includeKeywords}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      includeKeywords: parseKeywordLine(e.target.value),\n                    })\n                  }\n                  placeholder={t(\"loops.includeKeywordsPlaceholder\", \"react typescript next\")}\n                  disabled={disabled}\n                />\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-6\">\n              <FormField\n                label={t(\"loops.excludeKeywords\", \"Exclude keywords\")}\n                hint={t(\n                  \"loops.excludeKeywordsHint\",\n                  \"Optional, will be appended as exclusions\"\n                )}\n              >\n                <Input\n                  value={value.excludeKeywords}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      excludeKeywords: parseKeywordLine(e.target.value),\n                    })\n                  }\n                  placeholder={t(\n                    \"loops.excludeKeywordsPlaceholder\",\n                    \"senior lead manager zeitarbeit\"\n                  )}\n                  disabled={disabled}\n                />\n              </FormField>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.languageTitle\", \"Language\")}>\n                <select\n                  value={value.language}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      language: e.target.value as CanonicalFilters[\"language\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {languageOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-4 flex items-end\">\n              <label className=\"flex items-center gap-2 text-sm text-foreground\">\n                <input\n                  type=\"checkbox\"\n                  checked={value.excludeAgencies}\n                  onChange={(e) =>\n                    onChange({ ...value, excludeAgencies: e.target.checked })\n                  }\n                  disabled={disabled}\n                />\n                {t(\"loops.excludeAgencies\", \"Exclude agencies / Zeitarbeit\")}\n              </label>\n            </div>\n\n            <div className=\"md:col-span-5\" />\n          </div>\n\n          <div className=\"text-xs text-muted-foreground\">\n            {t(\n              \"loops.advancedInfo\",\n              \"Advanced filters are stored in loop.filters. URL builders can be extended later per platform.\"\n            )}\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { Modal } from \"src/shared/ui\";\n\nimport type { CanonicalFilters } from \"../../model\";\nimport { CompactFilters } from \"../CompactFilters/CompactFilters\";\n\ntype Props = {\n  open: boolean;\n  onOpenChange: (v: boolean) => void;\n\n  value: CanonicalFilters;\n  onChange: (next: CanonicalFilters) => void;\n\n  onApply: () => Promise<void> | void;\n  onReset: () => void;\n\n  disabled?: boolean;\n};\n\nexport function LoopSettingsModal({\n  open,\n  onOpenChange,\n  value,\n  onChange,\n  onApply,\n  onReset,\n  disabled,\n}: Props) {\n  const { t } = useTranslation();\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={t(\"loops.myLoopSettings\", \"My Loop settings\")}\n      description={t(\n        \"loops.myLoopSettingsDescription\",\n        \"Update filters, click Apply to refresh links and save settings to your loop.\"\n      )}\n      size=\"lg\"\n    >\n      <CompactFilters\n        value={value}\n        onChange={onChange}\n        onApply={onApply}\n        onReset={onReset}\n        disabled={disabled}\n      />\n    </Modal>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { Button } from \"src/shared/ui\";\n\nimport type { LoopPlatform } from \"../../../model\";\nimport { PLATFORM_LABEL_BY_ID } from \"../../../model/platformRegistry\";\n\ntype Props = {\n  platform: LoopPlatform;\n  url: string;\n  isActive: boolean;\n\n  onOpen: () => void;\n  onAdd: () => void;\n\n  addDisabled?: boolean;\n};\n\nexport function PlatformLinkCard({\n  platform,\n  url,\n  isActive,\n  onOpen,\n  onAdd,\n  addDisabled,\n}: Props) {\n  const { t } = useTranslation();\n  const label = PLATFORM_LABEL_BY_ID[platform] ?? platform;\n\n  return (\n    <div\n      className={[\n        \"rounded-2xl border bg-background p-4 space-y-3\",\n        isActive ? \"border-primary/50 ring-1 ring-primary/30\" : \"border-border\",\n      ].join(\" \")}\n    >\n      <div className=\"flex items-start justify-between gap-3\">\n        <div className=\"min-w-0\">\n          <div className=\"text-sm font-semibold text-foreground truncate\">\n            {label}\n          </div>\n          <div className=\"text-xs text-muted-foreground truncate\">{url}</div>\n        </div>\n\n        <div className=\"flex items-center gap-2 shrink-0\">\n          <Button variant=\"outline\" shape=\"lg\" onClick={onOpen}>\n            {t(\"loops.open\", \"Open\")}\n          </Button>\n          <Button\n            variant=\"default\"\n            shape=\"lg\"\n            shadow=\"sm\"\n            onClick={onAdd}\n            disabled={addDisabled}\n          >\n            {t(\"loops.add\", \"Add\")}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport {\n  buildCanonicalFiltersFromLoop,\n  mapCanonicalToSearchFilters,\n  buildSearchLinks,\n} from \"src/entities/loop/lib\";\nimport {\n  type CanonicalFilters,\n  DEFAULT_CANONICAL_FILTERS,\n  type LoopPlatform,\n} from \"src/entities/loop/model\";\n\nimport type { ActiveLink, LoopForLinks } from \"./types\";\n\nfunction filtersEqual(a: CanonicalFilters, b: CanonicalFilters) {\n  const keys = Object.keys(DEFAULT_CANONICAL_FILTERS) as Array<keyof CanonicalFilters>;\n  for (const k of keys) {\n    if (a[k] !== b[k]) return false;\n  }\n  return true;\n}\n\nexport function useLoopSearchLinksState(loop: LoopForLinks) {\n  const baseFromLoop = useMemo(() => buildCanonicalFiltersFromLoop(loop), [loop]);\n\n  const [draftFilters, _setDraftFilters] = useState<CanonicalFilters>(() => baseFromLoop);\n  const [appliedFilters, setAppliedFilters] = useState<CanonicalFilters>(() => baseFromLoop);\n  const [activeLink, setActiveLink] = useState<ActiveLink>(null);\n  const [isDirty, setIsDirty] = useState(false);\n\n\n  useEffect(() => {\n    _setDraftFilters(baseFromLoop);\n    setAppliedFilters(baseFromLoop);\n    setActiveLink(null);\n    setIsDirty(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loop.id]);\n\n  // loop updated (same id) -> sync only if no unsaved edits\n  useEffect(() => {\n    if (isDirty) return;\n\n    _setDraftFilters((prev) => (filtersEqual(prev, baseFromLoop) ? prev : baseFromLoop));\n    setAppliedFilters((prev) => (filtersEqual(prev, baseFromLoop) ? prev : baseFromLoop));\n    setActiveLink(null);\n  }, [baseFromLoop, isDirty]);\n\n  const setDraftFilters = useCallback(\n    (next: CanonicalFilters) => {\n      _setDraftFilters(next);\n      setIsDirty(!filtersEqual(next, baseFromLoop));\n    },\n    [baseFromLoop]\n  );\n\n  const links = useMemo(() => {\n    return buildSearchLinks(loop.platforms, mapCanonicalToSearchFilters(appliedFilters));\n  }, [loop.platforms, appliedFilters]);\n\n  const resetFilters = useCallback(() => {\n    _setDraftFilters(baseFromLoop);\n    setAppliedFilters(baseFromLoop);\n    setActiveLink(null);\n    setIsDirty(false);\n  }, [baseFromLoop]);\n\n  const applyDraftFilters = useCallback(() => {\n    setAppliedFilters(draftFilters);\n    setActiveLink(null);\n    setIsDirty(false);\n  }, [draftFilters]);\n\n  const setActive = useCallback((platform: LoopPlatform, url: string) => {\n    setActiveLink({ platform, url });\n  }, []);\n\n  return {\n    draftFilters,\n    setDraftFilters,\n\n    appliedFilters,\n    applyDraftFilters,\n    resetFilters,\n\n    activeLink,\n    setActiveLink,\n    setActive,\n\n    links,\n  };\n}\n","import React, { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { clampPage } from \"src/shared/lib\";\nimport { getErrorMessage } from \"src/shared/lib/errors\";\nimport { Button, Pagination } from \"src/shared/ui\";\n\nimport { useUpdateLoopMutation } from \"../../api/loopApi\";\nimport { mapWorkModeToRemoteMode, openUrl } from \"../../lib\";\nimport { normalizeRoleToTitles, type CanonicalFilters, type Loop, type LoopPlatform } from \"../../model\";\nimport { AddMatchModal } from \"../AddMatchModal/AddMatchModal\";\nimport { EditSourcesModal } from \"../EditSourcesModal/EditSourcesModal\";\nimport { LoopSettingsModal } from \"../LoopSettingsModal/LoopSettingsModal\";\n\nimport { PlatformLinkCard } from \"./components/PlatformLinkCard\";\nimport type { LoopForLinks } from \"./types\";\nimport { useLoopSearchLinksState } from \"./useLoopSearchLinksState\";\n\ntype Props = {\n  loop: Pick<\n    Loop,\n    | \"id\"\n    | \"name\"\n    | \"titles\"\n    | \"location\"\n    | \"radiusKm\"\n    | \"platforms\"\n    | \"remoteMode\"\n    | \"filters\"\n  >;\n  userId: string | null;\n  page: number;\n  onPageChange: (page: number) => void;\n};\n\n\n\nfunction isNonEmptyString(x: unknown): x is string {\n  return typeof x === \"string\" && x.trim().length > 0;\n}\n\nfunction getSafeFilterNumber(\n  f: CanonicalFilters,\n  key: \"radiusKm\" | \"postedWithin\"\n): number {\n  // Keep defensive conversion for older persisted values.\n  const v = f[key] as unknown;\n  const n = typeof v === \"number\" ? v : Number(v);\n  return Number.isFinite(n) ? n : 0;\n}\n\nexport function LoopSearchLinks({ loop, userId, page, onPageChange }: Props) {\n  const { t } = useTranslation();\n  const [updateLoop, updateState] = useUpdateLoopMutation();\n\n  const [isSourcesModalOpen, setIsSourcesModalOpen] = useState(false);\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [isAddMatchModalOpen, setIsAddMatchModalOpen] = useState(false);\n  const [defaultPlatform, setDefaultPlatform] = useState<LoopPlatform | undefined>(\n    undefined\n  );\n\n\n  const loopForState: LoopForLinks = {\n    id: loop.id,\n    titles: loop.titles,\n    location: loop.location ?? null,\n    radiusKm: loop.radiusKm ?? null,\n    platforms: loop.platforms,\n    remoteMode: loop.remoteMode,\n    filters: loop.filters, \n  };\n\n  const {\n    draftFilters,\n    setDraftFilters,\n    applyDraftFilters,\n    resetFilters,\n    appliedFilters,\n    activeLink,\n    setActive,\n    links,\n  } = useLoopSearchLinksState(loopForState);\n\n  const isSaving = updateState.isLoading;\n  const canEditSources = Boolean(userId) && !isSaving;\n\n  const pageSize = 12;\n  const totalPages = Math.max(1, Math.ceil(links.length / pageSize));\n  const safePage = Math.max(1, Math.min(totalPages, clampPage(page)));\n  const offset = (safePage - 1) * pageSize;\n\n  const info = useMemo(() => {\n    if (links.length === 0) return { from: 0, to: 0 };\n    const from = offset + 1;\n    const to = Math.min(links.length, offset + pageSize);\n    return { from, to };\n  }, [links.length, offset, pageSize]);\n\n  const pagedLinks = useMemo(() => {\n    return links.slice(offset, offset + pageSize);\n  }, [links, offset, pageSize]);\n\n  const handleApply = async () => {\n    applyDraftFilters();\n    onPageChange(1);\n\n    if (!userId) return;\n\n    try {\n      await updateLoop({\n        loopId: loop.id,\n        name: loop.name,\n        titles: normalizeRoleToTitles(draftFilters.role),\n        location: draftFilters.location,\n        radiusKm: draftFilters.radiusKm,\n        remoteMode: mapWorkModeToRemoteMode(draftFilters.workMode),\n        filters: draftFilters,\n      }).unwrap();\n\n      setIsSettingsOpen(false);\n    } catch (err) {\n      console.error(\"Failed to save filters:\", getErrorMessage(err));\n    }\n  };\n\n  const appliedBadges = useMemo(() => {\n    const out: string[] = [];\n\n    const role = appliedFilters.role.trim();\n    const location = appliedFilters.location.trim();\n    const radiusKm = getSafeFilterNumber(appliedFilters, \"radiusKm\");\n    const workMode = appliedFilters.workMode;\n    const postedWithin = getSafeFilterNumber(appliedFilters, \"postedWithin\");\n\n    if (isNonEmptyString(role)) out.push(t(\"loops.badgeRole\", \"Role: {{value}}\", { value: role }));\n    if (isNonEmptyString(location))\n      out.push(t(\"loops.badgeLoc\", \"Loc: {{value}}\", { value: location }));\n\n    out.push(\n      t(\"loops.badgeRadius\", \"Radius: {{value}}km\", {\n        value: radiusKm,\n      })\n    );\n\n    if (workMode !== \"any\")\n      out.push(\n        t(\"loops.badgeMode\", \"Mode: {{value}}\", {\n          value: workMode,\n        })\n      );\n\n    out.push(\n      t(\"loops.badgePosted\", \"Posted: {{value}}d\", {\n        value: postedWithin,\n      })\n    );\n\n    return out;\n  }, [appliedFilters, t]);\n\n  const openAddModal = (platform?: LoopPlatform) => {\n    setDefaultPlatform(platform);\n    setIsAddMatchModalOpen(true);\n  };\n\n  const handleOpenLink = (platform: LoopPlatform, url: string) => {\n    setActive(platform, url);\n    openUrl(url);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <LoopSettingsModal\n        open={isSettingsOpen}\n        onOpenChange={setIsSettingsOpen}\n        value={draftFilters}\n        onChange={setDraftFilters}\n        disabled={isSaving}\n        onApply={handleApply}\n        onReset={() => {\n          resetFilters();\n          onPageChange(1);\n        }}\n      />\n\n      <div className=\"rounded-2xl border border-border bg-card p-4 sm:p-6 space-y-4\">\n        {/* Header + actions (responsive) */}\n        <div className=\"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between\">\n          <div className=\"flex min-w-0 flex-col gap-1\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <h3 className=\"text-base font-semibold text-foreground\">\n                {t(\"loops.searchLinksTitle\", \"Search links\")}\n              </h3>\n\n              <span className=\"inline-flex items-center rounded-full border border-border bg-muted/40 px-2.5 py-0.5 text-xs font-medium text-muted-foreground\">\n                {t(\"loops.showing\", \"Showing {{from}}–{{to}} of {{total}}\", {\n                  from: info.from,\n                  to: info.to,\n                  total: links.length,\n                })}\n              </span>\n            </div>\n\n            <p className=\"text-sm text-muted-foreground\">\n              {t(\n                \"loops.searchLinksSubtitle\",\n                \"Apply filters → open platform → pick a job → paste URL → save match.\"\n              )}\n            </p>\n\n            {/* Mobile: collapse filters to reduce clutter */}\n            <div className=\"mt-2\">\n              <details className=\"sm:hidden\">\n                <summary className=\"cursor-pointer select-none text-sm text-muted-foreground\">\n                  {t(\"loops.filters\", \"Filters\")} ({appliedBadges.length})\n                </summary>\n\n                {appliedBadges.length ? (\n                  <div className=\"mt-2 flex flex-wrap gap-2\">\n                    {appliedBadges.map((b) => (\n                      <span\n                        key={b}\n                        className=\"rounded-full border border-border bg-background px-3 py-1 text-xs text-muted-foreground\"\n                      >\n                        {b}\n                      </span>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"mt-2 text-xs text-muted-foreground\">\n                    {t(\"loops.noFilters\", \"No filters applied\")}\n                  </div>\n                )}\n              </details>\n\n              {/* Desktop/tablet: show filters inline */}\n              {appliedBadges.length ? (\n                <div className=\"hidden sm:flex flex-wrap gap-2\">\n                  {appliedBadges.map((b) => (\n                    <span\n                      key={b}\n                      className=\"rounded-full border border-border bg-background px-3 py-1 text-xs text-muted-foreground\"\n                    >\n                      {b}\n                    </span>\n                  ))}\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          {/* Actions: stack on mobile, row on larger screens */}\n          <div className=\"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center\">\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={() => setIsSettingsOpen(true)}\n              disabled={isSaving}\n              className=\"w-full sm:w-auto\"\n            >\n              {t(\"loops.myLoopSettings\", \"My Loop settings\")}\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={() => setIsSourcesModalOpen(true)}\n              disabled={!canEditSources}\n              className=\"w-full sm:w-auto\"\n            >\n              {t(\"loops.editSources\", \"Edit sources\")}\n            </Button>\n\n            <Button\n              variant=\"default\"\n              shape=\"lg\"\n              shadow=\"sm\"\n              onClick={() => openAddModal(undefined)}\n              disabled={!userId}\n              className=\"w-full sm:w-auto\"\n            >\n              {t(\"loops.addMatch\", \"Add match\")}\n            </Button>\n          </div>\n\n          <EditSourcesModal\n            open={isSourcesModalOpen}\n            onOpenChange={setIsSourcesModalOpen}\n            value={loop.platforms}\n            disabled={!canEditSources}\n            onSave={async (nextPlatforms) => {\n              if (!userId) return;\n              try {\n                await updateLoop({\n                  loopId: loop.id,\n                  platforms: nextPlatforms,\n                }).unwrap();\n              } catch (err) {\n                console.error(\"Failed to update sources:\", getErrorMessage(err));\n              }\n            }}\n          />\n        </div>\n\n        <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\n          {pagedLinks.map((link) => {\n            const isActive =\n              activeLink?.platform === link.platform && activeLink?.url === link.url;\n\n            return (\n              <PlatformLinkCard\n                key={`${link.platform}:${link.url}`}\n                platform={link.platform}\n                url={link.url}\n                isActive={isActive}\n                onOpen={() => handleOpenLink(link.platform, link.url)}\n                onAdd={() => openAddModal(link.platform)}\n                addDisabled={!userId}\n              />\n            );\n          })}\n        </div>\n\n        <div className=\"flex items-center justify-center\">\n          <Pagination\n            page={safePage}\n            totalPages={totalPages}\n            onPageChange={onPageChange}\n            disabled={isSaving}\n          />\n        </div>\n\n        <AddMatchModal\n          open={isAddMatchModalOpen}\n          onOpenChange={setIsAddMatchModalOpen}\n          loopId={loop.id}\n          defaultPlatform={defaultPlatform}\n        />\n      </div>\n    </div>\n  );\n}\n","import type { SearchFilters, LoopPlatform } from \"src/entities/loop/model\";\nimport { buildUrlByPlatform } from \"src/entities/loop/model/\";\n\nexport type SearchLink = { platform: LoopPlatform; url: string };\n\nexport function buildSearchLinks(\n  platforms: LoopPlatform[],\n  filters: SearchFilters\n): SearchLink[] {\n  return platforms.map((p) => ({\n    platform: p,\n    url: buildUrlByPlatform(p, filters),\n  }));\n}\n\nexport function openUrl(url: string) {\n  window.open(url, \"_blank\", \"noopener,noreferrer\");\n}\n","import type { CanonicalFilters, SearchFilters } from \"src/entities/loop/model\";\n\nexport function mapCanonicalToSearchFilters(\n  filters: CanonicalFilters\n): SearchFilters {\n  const roleWithIncludes = [filters.role, filters.includeKeywords]\n    .filter(Boolean)\n    .join(\" \")\n    .trim();\n\n  const excludes = (filters.excludeKeywords || \"\")\n    .split(/\\s+/g)\n    .filter(Boolean)\n    .map((word) => (word.startsWith(\"-\") ? word : `-${word}`))\n    .join(\" \");\n\n  return {\n    role: [roleWithIncludes, excludes].filter(Boolean).join(\" \").trim(),\n    location: filters.location,\n    radiusKm: Number(filters.radiusKm),\n    workMode: filters.workMode === \"remote_only\" ? \"remote_only\" : \"any\",\n  };\n}\n","import type { CanonicalFilters, RemoteMode } from \"src/entities/loop/model\";\n\nexport function mapWorkModeToRemoteMode(\n  workMode: CanonicalFilters[\"workMode\"]\n): RemoteMode {\n  return workMode === \"remote_only\" ? \"remote_only\" : \"any\";\n}\n","import { useEffect, useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport { useAppDispatch, useAppSelector } from \"src/app/store/hooks\";\nimport { useGetLoopQuery } from \"src/entities/loop/api/loopApi\";\nimport { joinTitles } from \"src/entities/loop/lib\";\nimport type { Loop } from \"src/entities/loop/model\";\nimport { LoopSearchLinks } from \"src/entities/loop/ui/LoopSearchLinks/LoopSearchLinks\";\nimport {\n  setLastLoopsUrl,\n  setLoopDetailsPage,\n} from \"src/pages/LoopsPage/model/loopsUiSlice\";\nimport { getErrorMessage } from \"src/shared/lib\";\nimport { updateURLParams } from \"src/shared/lib/url/updateURLParams\";\nimport { Button } from \"src/shared/ui\";\n\nimport { Header, CardText } from \"./Header\";\n\nexport function LoopDetailsView({\n  userId,\n  loopId,\n  onBack,\n}: {\n  userId: string;\n  loopId: string;\n  onBack: () => void;\n}) {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const dispatch = useAppDispatch();\n\n  const savedDetailsPage = useAppSelector(\n    (s) => s.loopsUi.detailsPageByLoopId[loopId],\n  );\n\n  const readPageFromSearch = (search: string): number | null => {\n    try {\n      const sp = new URLSearchParams(search);\n      const raw = sp.get(\"page\");\n      const n = raw ? Number(raw) : NaN;\n      const i = Number.isFinite(n) ? Math.trunc(n) : NaN;\n      return i > 0 ? i : null;\n    } catch {\n      return null;\n    }\n  };\n\n  const urlPage = readPageFromSearch(location.search);\n  const detailsPage = urlPage ?? savedDetailsPage ?? 1;\n\n  // если page отсутствует в URL — проставим (replace), чтобы ссылка была шарится\n  useEffect(() => {\n    if (urlPage !== null) return;\n\n    updateURLParams(\n      navigate,\n      location,\n      { page: String(detailsPage) },\n      { replace: true },\n    );\n  }, [urlPage, detailsPage, navigate, location]);\n\n  // держим Redux в синхроне с фактической страницей\n  useEffect(() => {\n    dispatch(setLoopDetailsPage({ loopId, page: detailsPage }));\n    dispatch(setLastLoopsUrl(`${location.pathname}${location.search}`));\n  }, [dispatch, loopId, detailsPage, location.pathname, location.search]);\n\n  const loopQ = useGetLoopQuery({ loopId });\n  const loop: Loop | null = loopQ.data ?? null;\n\n  const title = useMemo(\n    () => loop?.name ?? t(\"loops.detailsTitle\", \"Loop\"),\n    [loop?.name, t],\n  );\n\n  const subtitle = useMemo(() => {\n    if (!loop) {\n      return t(\n        \"loops.detailsHint\",\n        \"Change filters → Apply → links update and filters persist.\",\n      );\n    }\n\n    const roles = joinTitles(loop.titles) || t(\"loops.dash\", \"—\");\n    const remoteText =\n      loop.remoteMode === \"remote_only\"\n        ? t(\"loops.remoteOnly\", \"Remote\")\n        : t(\"loops.any\", \"Any\");\n\n    return `${roles} · ${loop.location} · ${remoteText}`;\n  }, [loop, t]);\n\n  const content = useMemo(() => {\n    if (loopQ.isLoading) {\n      return <CardText>{t(\"loops.loadingLoop\", \"Loading loop…\")}</CardText>;\n    }\n\n    if (loopQ.isError) {\n      return <CardText>{getErrorMessage(loopQ.error)}</CardText>;\n    }\n\n    if (!loop) {\n      return <CardText>{t(\"loops.notFound\", \"Loop not found.\")}</CardText>;\n    }\n\n    return (\n      <LoopSearchLinks\n        userId={userId}\n        page={detailsPage}\n        onPageChange={(p) => {\n          dispatch(setLoopDetailsPage({ loopId, page: p }));\n          updateURLParams(\n            navigate,\n            location,\n            { page: String(p) },\n            { replace: true },\n          );\n        }}\n        loop={{\n          id: loop.id,\n          name: loop.name,\n          titles: loop.titles,\n          location: loop.location,\n          radiusKm: loop.radiusKm,\n          platforms: loop.platforms,\n          remoteMode: loop.remoteMode,\n          filters: loop.filters,\n        }}\n      />\n    );\n  }, [\n    loopQ.isLoading,\n    loopQ.isError,\n    loopQ.error,\n    loop,\n    t,\n    userId,\n    detailsPage,\n    dispatch,\n    loopId,\n    navigate,\n    location,\n  ]);\n\n  return (\n    <div className=\"space-y-6\">\n      <Header\n        title={title}\n        subtitle={subtitle}\n        right={\n          <Button variant=\"outline\" shape=\"lg\" onClick={onBack}>\n            {t(\"loops.back\", \"Back\")}\n          </Button>\n        }\n      />\n\n      {content}\n    </div>\n  );\n}\n","import { skipToken } from \"@reduxjs/toolkit/query\";\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport { useAppDispatch, useAppSelector } from \"src/app/store/hooks\";\nimport { CreateLoopModal } from \"src/entities/loop\";\nimport {\n  useGetLoopsPageQuery,\n  useLazyGetLoopsPageQuery,\n} from \"src/entities/loop/api/loopApi\";\nimport { joinTitles } from \"src/entities/loop/lib/format\";\nimport {\n  setLastLoopsUrl,\n  setLoopsListPage,\n} from \"src/pages/LoopsPage/model/loopsUiSlice\";\nimport { getErrorMessage, clampPage} from \"src/shared/lib\";\nimport { Button, Pagination, PageHeader } from \"src/shared/ui\";\n\nconst PAGE_SIZE = 7;\n\ntype CursorMap = Record<number, string | null | undefined>; // page -> cursorId\n\n\nfunction readPageParam(search: string): number | null {\n  const sp = new URLSearchParams(search);\n  const raw = sp.get(\"page\");\n  if (!raw) return null;\n  const n = Number(raw);\n  return clampPage(n);\n}\n\nfunction writePageToSearch(search: string, page: number): string {\n  const sp = new URLSearchParams(search);\n  sp.set(\"page\", String(clampPage(page)));\n  const s = sp.toString();\n  return s ? `?${s}` : \"\";\n}\n\nexport function LoopsListView({\n  userId,\n  onOpenLoop,\n}: {\n  userId: string;\n  onOpenLoop: (id: string) => void;\n}) {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const dispatch = useAppDispatch();\n\n  const savedListPage = useAppSelector((s) => s.loopsUi.listPage);\n\n  const [createOpen, setCreateOpen] = useState(false);\n\n  const page = useMemo(() => {\n    const fromUrl = readPageParam(location.search);\n    return fromUrl ?? clampPage(savedListPage);\n  }, [location.search, savedListPage]);\n\n  const cursorByPageRef = useRef<CursorMap>({ 1: null });\n\n  const [cursorId, setCursorId] = useState<string | null>(null);\n\n  const [fetchLoopsPage] = useLazyGetLoopsPageQuery();\n\n  const syncCursorForPage = useCallback(\n    async (targetPage: number) => {\n      if (!userId) {\n        setCursorId(null);\n        return;\n      }\n\n      if (targetPage <= 1) {\n        cursorByPageRef.current[1] = null;\n        setCursorId(null);\n        return;\n      }\n\n      const cache = cursorByPageRef.current;\n\n      if (cache[targetPage] !== undefined) {\n        setCursorId(cache[targetPage] ?? null);\n        return;\n      }\n\n      if (cache[1] === undefined) cache[1] = null;\n\n      for (let p = 1; p < targetPage; p += 1) {\n        if (cache[p] === undefined) break;\n\n        const cur = cache[p] ?? null;\n\n        const res = await fetchLoopsPage({\n          pageSize: PAGE_SIZE,\n          cursorId: cur,\n        }).unwrap();\n\n        cache[p + 1] = res.nextCursor ?? null;\n\n        if (!res.nextCursor) break;\n      }\n\n      setCursorId(cache[targetPage] ?? null);\n    },\n    [fetchLoopsPage, userId],\n  );\n\n  useEffect(() => {\n    let cancelled = false;\n\n    const run = async () => {\n      try {\n        await syncCursorForPage(page);\n      } catch {\n        // cursorId как есть; ошибки loopsPageQ\n      }\n    };\n\n    run().catch(() => {});\n\n    return () => {\n      cancelled = true;\n      if (cancelled) return;\n    };\n  }, [page, syncCursorForPage]);\n\n  const loopsPageQ = useGetLoopsPageQuery(\n    userId ? { pageSize: PAGE_SIZE, cursorId } : skipToken,\n  );\n\n  const data = loopsPageQ.data;\n\n  const items = useMemo(() => data?.items ?? [], [data]);\n  const total = data?.total ?? 0;\n\n  const nextCursor = loopsPageQ.data?.nextCursor ?? null;\n\n  const totalPages = useMemo(() => {\n    const n = Math.ceil(total / PAGE_SIZE);\n    return n <= 0 ? 1 : n;\n  }, [total]);\n\n\n  useEffect(() => {\n    if (!loopsPageQ.data) return;\n    const nextPage = page + 1;\n\n    const cache = cursorByPageRef.current;\n    if (cache[nextPage] === undefined) {\n      cache[nextPage] = nextCursor;\n    }\n  }, [loopsPageQ.data, page, nextCursor]);\n\n\n  useEffect(() => {\n    if (!loopsPageQ.data) return;\n    const clamped = Math.max(1, Math.min(totalPages, page));\n    if (clamped !== page) {\n      const nextSearch = writePageToSearch(location.search, clamped);\n      navigate(\n        { pathname: location.pathname, search: nextSearch },\n        { replace: true },\n      );\n    }\n  }, [\n    loopsPageQ.data,\n    page,\n    totalPages,\n    navigate,\n    location.pathname,\n    location.search,\n  ]);\n\n  // ✅ sync Redux\n  useEffect(() => {\n    dispatch(setLoopsListPage(page));\n    dispatch(setLastLoopsUrl(`${location.pathname}${location.search}`));\n  }, [dispatch, page, location.pathname, location.search]);\n\n  const goToPage = useCallback(\n    async (p: number) => {\n      const next = clampPage(p);\n\n      await syncCursorForPage(next);\n\n      const nextSearch = writePageToSearch(location.search, next);\n      navigate(\n        { pathname: location.pathname, search: nextSearch },\n        { replace: false },\n      );\n    },\n    [navigate, location.pathname, location.search, syncCursorForPage],\n  );\n\n  const showFrom = useMemo(() => {\n    if (total === 0) return 0;\n    return (page - 1) * PAGE_SIZE + 1;\n  }, [page, total]);\n\n  const showTo = useMemo(() => {\n    if (total === 0) return 0;\n    return (page - 1) * PAGE_SIZE + items.length;\n  }, [page, total, items.length]);\n\n  const content = useMemo(() => {\n    if (loopsPageQ.isLoading) {\n      return (\n        <div className=\"text-sm text-muted-foreground\">\n          {t(\"loops.loading\", \"Loading…\")}\n        </div>\n      );\n    }\n\n    if (loopsPageQ.isError) {\n      return (\n        <div className=\"text-sm text-muted-foreground\">\n          {getErrorMessage(loopsPageQ.error)}\n        </div>\n      );\n    }\n\n    if (total === 0) {\n      return (\n        <div className=\"text-sm text-muted-foreground\">\n          {t(\"loops.empty\", \"No loops yet. Create your first loop.\")}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"space-y-3\">\n          {items.map((l) => {\n            const titlesText = joinTitles(l.titles) || t(\"loops.dash\", \"—\");\n            const remoteText =\n              l.remoteMode === \"remote_only\"\n                ? t(\"loops.remoteOnly\", \"Remote\")\n                : t(\"loops.any\", \"Any\");\n\n            return (\n              <div\n                key={l.id}\n                tabIndex={0}\n                onClick={() => onOpenLoop(l.id)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\" || e.key === \" \") {\n                    e.preventDefault();\n                    onOpenLoop(l.id);\n                  }\n                }}\n                className={[\n                  \"w-full\",\n                  \"rounded-xl border border-border bg-background\",\n                  \"px-4 py-4\",\n                  \"hover:bg-muted transition-colors\",\n                  \"focus:outline-none focus:ring-2 focus:ring-border\",\n                  \"cursor-pointer\",\n                  \"select-none\",\n                ].join(\" \")}\n              >\n                <div className=\"text-sm font-semibold text-foreground\">\n                  {l.name}\n                </div>\n                <div className=\"mt-1 text-xs text-muted-foreground\">\n                  {l.location} · {titlesText} · {remoteText}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        <div className=\"grid grid-cols-3 items-center\">\n          <div className=\"text-xs text-muted-foreground\">\n            {t(\"loops.showing\", \"Showing {{from}}–{{to}} of {{total}}\", {\n              from: showFrom,\n              to: showTo,\n              total,\n            })}\n          </div>\n\n          <Pagination\n            page={page}\n            totalPages={totalPages}\n            onPageChange={goToPage}\n            disabled={loopsPageQ.isFetching}\n            siblingCount={1}\n          />\n        </div>\n      </div>\n    );\n  }, [\n    loopsPageQ.isLoading,\n    loopsPageQ.isError,\n    loopsPageQ.error,\n    loopsPageQ.isFetching,\n    items,\n    onOpenLoop,\n    page,\n    showFrom,\n    showTo,\n    t,\n    total,\n    totalPages,\n    goToPage,\n  ]);\n\n  return (\n    <div className=\"space-y-6\">\n      <PageHeader\n        title={t(\"loops.listTitle\", \"My Loops\")}\n        subtitle={t(\"loops.listSubtitle\", \"Create a loop and track matches.\")}\n        right={\n          <Button\n            variant=\"default\"\n            shadow=\"sm\"\n            shape=\"lg\"\n            onClick={() => setCreateOpen(true)}\n          >\n            {t(\"loops.newLoop\", \"New loop\")}\n          </Button>\n        }\n      />\n\n      <div className=\"rounded-2xl border border-border bg-card p-6\">\n        {content}\n      </div>\n\n      <CreateLoopModal\n        open={createOpen}\n        onOpenChange={setCreateOpen}\n        onCreated={(id) => {\n          cursorByPageRef.current = { 1: null };\n          setCursorId(null);\n\n          const nextSearch = writePageToSearch(location.search, 1);\n          navigate(\n            { pathname: location.pathname, search: nextSearch },\n            { replace: true },\n          );\n\n          onOpenLoop(id);\n        }}\n      />\n    </div>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\n\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport { Button } from \"src/shared/ui\";\n\nimport { CardText, Header } from \"./components/Header\";\nimport { LoopDetailsView } from \"./components/LoopDetailsView\";\nimport { LoopsListView } from \"./components/LoopsListView\";\n\nexport default function LoopsPage() {\n  const { t } = useTranslation();\n  const { userId } = useAuthSelectors();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { loopId } = useParams<{ loopId: string }>();\n\n  const isDetails = Boolean(loopId);\n\n  const goBack = () => navigate(`/dashboard/loops${location.search}`);\n  const openLoop = (id: string) =>\n    navigate(`/dashboard/loops/${id}${location.search}`);\n\n  if (!userId) {\n    return (\n      <div className=\"space-y-6\">\n        <Header\n          title={\n            isDetails\n              ? t(\"loops.detailsTitle\", \"Loop\")\n              : t(\"loops.listTitle\", \"My Loops\")\n          }\n          subtitle={t(\"loops.signInSubtitle\", \"Sign in to continue.\")}\n          right={\n            isDetails ? (\n              <Button variant=\"outline\" shape=\"lg\" onClick={goBack}>\n                {t(\"loops.back\", \"Back\")}\n              </Button>\n            ) : null\n          }\n        />\n        <CardText>\n          {t(\"loops.signInBody\", \"Please sign in to view your loops.\")}\n        </CardText>\n      </div>\n    );\n  }\n\n  return isDetails ? (\n    <LoopDetailsView userId={userId} loopId={loopId!} onBack={goBack} />\n  ) : (\n    <LoopsListView userId={userId} onOpenLoop={openLoop} />\n  );\n}\n"],"names":["updateURLParams","navigate","location","updates","options","replace","sp","URLSearchParams","search","key","value","Object","entries","set","String","delete","nextSearch","toString","pathname","Header","title","subtitle","right","_jsxs","className","children","_jsx","CardText","isRecord","v","asString","fallback","asNumber","n","Number","isFinite","pickFrom","allowed","includes","joinTitles","titles","map","t","trim","filter","Boolean","join","HOST_RULES","needle","platform","platformValues","LOOP_PLATFORMS","p","statusValues","LOOP_MATCH_STATUSES","s","AddMatchModal","open","onOpenChange","loopId","defaultPlatform","useTranslation","createMatch","st","useCreateMatchMutation","schema","useMemo","Yup","min","defaultValue","required","company","oneOf","url","test","input","URL","tryParseUrl","description","status","matchedAt","makeSchema","platformManuallySetRef","useRef","useEffect","current","initial","Date","toISOString","disabled","isLoading","Modal","Formik","initialValues","enableReinitialize","validationSchema","onSubmit","async","values","helpers","setStatus","undefined","unwrap","e","getErrorMessage","f","commonError","isError","error","canSubmit","dirty","handleSubmit","InlineError","message","FormField","label","touched","errors","id","describedBy","invalid","Input","name","onChange","handleChange","onBlur","handleBlur","placeholder","state","hint","next","target","setFieldValue","detected","host","toLowerCase","rule","detectPlatformFromUrl","TextArea","Button","type","variant","shadow","shape","onClick","uniquePlatforms","list","Set","add","Array","from","EditSourcesModal","onSave","selected","setSelected","useState","isSaving","setIsSaving","selectedSet","totalSelected","length","canSave","size","setPresetRecommended","RECOMMENDED_PLATFORMS","setPresetAll","ALL_PLATFORMS","GROUPS","g","groupPlatforms","platformsByGroup","countSelected","has","isAll","groupId","prev","every","toggleGroup","sort","a","b","la","PLATFORM_LABEL_BY_ID","lb","localeCompare","checked","toggle","RADIUS_OPTIONS","POSTED_WITHIN_OPTIONS","parseKeywordLine","CompactFilters","onApply","onReset","advancedOpen","setAdvancedOpen","workModeOptions","seniorityOptions","employmentOptions","languageOptions","badges","out","role","push","radiusKm","workMode","postedWithin","r","o","seniority","employmentType","d","includeKeywords","excludeKeywords","language","excludeAgencies","LoopSettingsModal","PlatformLinkCard","isActive","onOpen","onAdd","addDisabled","filtersEqual","keys","DEFAULT_CANONICAL_FILTERS","k","isNonEmptyString","x","getSafeFilterNumber","LoopSearchLinks","loop","userId","page","onPageChange","updateLoop","updateState","useUpdateLoopMutation","isSourcesModalOpen","setIsSourcesModalOpen","isSettingsOpen","setIsSettingsOpen","isAddMatchModalOpen","setIsAddMatchModalOpen","setDefaultPlatform","loopForState","platforms","remoteMode","filters","draftFilters","setDraftFilters","applyDraftFilters","resetFilters","appliedFilters","activeLink","setActive","links","baseFromLoop","src","maybeFilters","buildCanonicalFiltersFromLoop","_setDraftFilters","setAppliedFilters","setActiveLink","isDirty","setIsDirty","useCallback","buildUrlByPlatform","buildSearchLinks","split","word","startsWith","useLoopSearchLinksState","canEditSources","pageSize","totalPages","Math","max","ceil","safePage","clampPage","offset","info","to","pagedLinks","slice","appliedBadges","openAddModal","normalizeRoleToTitles","err","console","total","nextPlatforms","link","handleOpenLink","window","openUrl","Pagination","LoopDetailsView","onBack","useNavigate","useLocation","dispatch","useAppDispatch","savedDetailsPage","useAppSelector","loopsUi","detailsPageByLoopId","urlPage","raw","get","NaN","i","trunc","readPageFromSearch","detailsPage","setLoopDetailsPage","setLastLoopsUrl","loopQ","useGetLoopQuery","data","roles","remoteText","content","writePageToSearch","LoopsListView","onOpenLoop","savedListPage","listPage","createOpen","setCreateOpen","readPageParam","cursorByPageRef","cursorId","setCursorId","fetchLoopsPage","useLazyGetLoopsPageQuery","syncCursorForPage","targetPage","cache","cur","res","nextCursor","cancelled","run","catch","loopsPageQ","useGetLoopsPageQuery","skipToken","items","nextPage","clamped","setLoopsListPage","goToPage","showFrom","showTo","l","titlesText","tabIndex","onKeyDown","preventDefault","isFetching","siblingCount","PageHeader","CreateLoopModal","onCreated","LoopsPage","useAuthSelectors","useParams","isDetails","goBack"],"ignoreList":[],"sourceRoot":""}