/*! For license information please see 2542.4fab4f4b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkjob_tracker_dashboard=self.webpackChunkjob_tracker_dashboard||[]).push([[2542],{1128(e,t,s){function i(e){return"object"==typeof e&&null!==e}function a(e){if("string"!=typeof e)return null;const t=e.trim();return t.length>0?t:null}function n(e){if(!e)return null;if(i(e)){const t=a(e.message);if(t)return t;const s=a(e.message);if(s)return s;const n=function(e){const t=a(e.message);if(t)return t;const s=e.data;if(i(s)){const e=a(s.message);if(e)return e}const n=e.error,d=a(n);if(d)return d;if(i(n)){const e=a(n.message);if(e)return e}return null}(e);if(n)return n}return e instanceof Error?a(e.message):null}s.d(t,{g:()=>n})},8904(e,t,s){s.d(t,{A:()=>i});const i=(0,s(9407).A)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]])},62542(e,t,s){s.r(t),s.d(t,{default:()=>b});var i=s(96540),a=s(71563),n=s(58752),d=s(1128),r=s(46681),l=s(89921),u=s(92883),o=s(74848);function c(){const e=globalThis.crypto;if(e?.randomUUID)return e.randomUUID();const t=new Uint8Array(16);return e?.getRandomValues?.(t),`id_${Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}`}function g(e){return{version:e.version,defaultStageId:e.defaultStageId,stages:e.stages.map(e=>({...e,subStatuses:e.subStatuses.map(e=>({...e}))}))}}function m(e){return[...e].sort((e,t)=>e.order-t.order)}function f(e,t=10){return e.map((e,s)=>({...e,order:(s+1)*t}))}function h(e,t,s){const i=[...e],a=t+s;if(a<0||a>=i.length)return i;const n=i[t];return i[t]=i[a],i[a]=n,i}function b(){const{userId:e}=(0,a.gv)(),t=e??"",{data:s,isFetching:b}=(0,n.Sp)({uid:t},{skip:!t}),[p,x]=(0,n._m)(),v=s?.pipeline??n.cL.pipeline,[S,j]=(0,i.useState)(()=>g(v));(0,i.useEffect)(()=>{j(g(v))},[v]);const k=(0,d.g)(x.error),N=(0,i.useMemo)(()=>{try{return JSON.stringify(v)!==JSON.stringify(S)}catch{return!0}},[v,S]),y=!!t&&!b&&!x.isLoading&&N,w=(e,t)=>{j(s=>{const i=s.stages.map(s=>s.id===e?{...s,...t}:s);return{...s,stages:i}})},I=(e,t,s)=>{j(i=>{const a=i.stages.map(i=>{if(i.id!==e)return i;const a=i.subStatuses.map(e=>e.id===t?{...e,...s}:e);return{...i,subStatuses:a}});return{...i,stages:a}})},C=(e,t)=>{j(s=>{const i=m(s.stages),a=i.findIndex(t=>t.id===e);if(-1===a)return s;const n=f(h(i,a,t));return{...s,stages:n}})},A=(e,t,s)=>{j(i=>{const a=i.stages.map(i=>{if(i.id!==e)return i;const a=m(i.subStatuses),n=a.findIndex(e=>e.id===t);if(-1===n)return i;const d=h(a,n,s);return{...i,subStatuses:f(d)}});return{...i,stages:a}})},z=(0,i.useMemo)(()=>m(S.stages),[S.stages]);return(0,o.jsx)(u.t,{title:"Account settings",subtitle:"Pipeline/Statuses",content:(0,o.jsxs)("div",{className:"space-y-md",children:[k?(0,o.jsx)(r.Wz,{message:k}):null,(0,o.jsxs)(r.Zp,{padding:"md",shadow:"sm",className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between gap-md",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-base font-medium",children:"Pipeline/Statuses"}),(0,o.jsx)("div",{className:"text-sm text-muted-foreground",children:"Configure pipeline stages and sub-statuses (naming, ordering, visibility, defaults)."})]}),(0,o.jsxs)("div",{className:"flex gap-sm",children:[(0,o.jsx)(r.$n,{variant:"outline",size:"sm",onClick:()=>j(g(n.cL.pipeline)),disabled:b||x.isLoading,children:"Reset to defaults"}),(0,o.jsx)(r.$n,{variant:"outline",size:"sm",onClick:()=>j(g(v)),disabled:!N||b||x.isLoading,children:"Reset"}),(0,o.jsx)(r.$n,{size:"sm",onClick:async()=>{t&&await p({uid:t,patch:{pipeline:S}}).unwrap()},disabled:!y,children:"Save"})]})]}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-sm",children:[(0,o.jsx)("div",{className:"text-sm text-muted-foreground",children:"Default stage:"}),(0,o.jsx)("select",{className:"h-9 rounded-xl border border-input bg-input px-sm text-sm text-foreground shadow-sm",value:S.defaultStageId,onChange:e=>j(t=>({...t,defaultStageId:e.target.value})),children:z.map(e=>(0,o.jsx)("option",{value:e.id,children:e.label},e.id))}),(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>{const e=`stage_${c()}`;j(t=>{const s=f(m([...t.stages,{id:e,label:"New stage",order:10*(t.stages.length+1),visible:!0,defaultSubStatusId:void 0,subStatuses:[{id:`sub_${c()}`,label:"New status",order:10,visible:!0}]}])),i=t.defaultStageId||s[0]?.id||e;return{...t,stages:s,defaultStageId:i}})},disabled:b||x.isLoading,children:"+ Add stage"})]})]}),(0,o.jsx)("div",{className:"space-y-md",children:z.map((e,t)=>{const s=m(e.subStatuses),i=e.defaultSubStatusId&&s.some(t=>t.id===e.defaultSubStatusId)?e.defaultSubStatusId:s[0]?.id;return(0,o.jsxs)(r.Zp,{padding:"md",shadow:"sm",className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-md",children:[(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-sm",children:[(0,o.jsx)(l.pd,{preset:"default",value:e.label,onChange:t=>w(e.id,{label:t.target.value}),className:"max-w-[320px]",placeholder:"Stage label"}),(0,o.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,o.jsx)("input",{type:"checkbox",checked:e.visible,onChange:t=>w(e.id,{visible:t.target.checked})}),"Visible"]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:["Default sub-status:",(0,o.jsx)("select",{className:"h-9 rounded-xl border border-input bg-input px-sm text-sm text-foreground shadow-sm",value:i??"",onChange:t=>w(e.id,{defaultSubStatusId:t.target.value}),children:s.map(e=>(0,o.jsx)("option",{value:e.id,children:e.label},e.id))})]})]}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-sm",children:[(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>C(e.id,-1),disabled:0===t||x.isLoading,children:"↑"}),(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>C(e.id,1),disabled:t===z.length-1||x.isLoading,children:"↓"}),(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>{return t=e.id,void j(e=>{const s=e.stages.map(e=>{if(e.id!==t)return e;const s=`sub_${c()}`,i=f(m([...e.subStatuses,{id:s,label:"New status",order:10*(e.subStatuses.length+1),visible:!0}])),a=e.defaultSubStatusId||i[0]?.id;return{...e,subStatuses:i,defaultSubStatusId:a}});return{...e,stages:s}});var t},disabled:x.isLoading,children:"+ Add sub-status"}),(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>{return t=e.id,void j(e=>{const s=f(m(e.stages.filter(e=>e.id!==t))),i=e.defaultStageId===t?s[0]?.id??n.cL.pipeline.defaultStageId:e.defaultStageId;return{...e,stages:s,defaultStageId:i}});var t},disabled:z.length<=1||x.isLoading,children:"Delete stage"})]})]}),(0,o.jsx)("div",{className:"space-y-2",children:s.map((t,i)=>(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-sm rounded-xl border border-border bg-background p-sm",children:[(0,o.jsx)(l.pd,{preset:"default",value:t.label,onChange:s=>I(e.id,t.id,{label:s.target.value}),className:"max-w-[320px]",placeholder:"Sub-status label"}),(0,o.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,o.jsx)("input",{type:"checkbox",checked:t.visible,onChange:s=>I(e.id,t.id,{visible:s.target.checked})}),"Visible"]}),(0,o.jsxs)("div",{className:"ml-auto flex flex-wrap items-center gap-sm",children:[(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>A(e.id,t.id,-1),disabled:0===i||x.isLoading,children:"↑"}),(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>A(e.id,t.id,1),disabled:i===s.length-1||x.isLoading,children:"↓"}),(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>w(e.id,{defaultSubStatusId:t.id}),disabled:x.isLoading,children:"Set default"}),(0,o.jsx)(r.$n,{size:"sm",variant:"outline",onClick:()=>{return s=e.id,i=t.id,void j(e=>{const t=e.stages.map(e=>{if(e.id!==s)return e;const t=f(m(e.subStatuses.filter(e=>e.id!==i))),a=e.defaultSubStatusId===i?t[0]?.id:e.defaultSubStatusId;return{...e,subStatuses:t,defaultSubStatusId:a}});return{...e,stages:t}});var s,i},disabled:s.length<=1||x.isLoading,children:"Delete"})]})]},t.id))})]},e.id)})}),(0,o.jsxs)(r.Zp,{padding:"md",shadow:"sm",className:"space-y-2",children:[(0,o.jsx)("div",{className:"text-sm font-medium",children:"Notes"}),(0,o.jsxs)("ul",{className:"list-disc pl-5 text-sm text-muted-foreground space-y-1",children:[(0,o.jsx)("li",{children:"Order is used for sorting in lists/boards. Buttons ↑/↓ adjust it automatically."}),(0,o.jsx)("li",{children:"Visibility only hides stages/statuses in UI; existing cards keep their values."}),(0,o.jsx)("li",{children:"Defaults are used when you change a stage and need an initial sub-status."})]})]})]})})}},92883(e,t,s){s.d(t,{t:()=>k});var i=s(96540),a=s(22022),n=s(95086),d=s(46681),r=s(9407);const l=(0,r.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),u=(0,r.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var o=s(8904);const c=(0,r.A)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),g=(0,r.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var m=s(3433),f=s(3626),h=s(97234),b=s(38328),p=s(74848);function x(e){return["group flex items-center gap-2","justify-start","rounded-md px-3 py-2.5","border border-transparent","transition duration-normal ease-in-out","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background",e?"bg-muted text-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground","md:justify-between md:px-sm md:py-2","w-auto shrink-0 md:w-full"].join(" ")}function v(e,t){return"danger"===t?e?"text-destructive":"text-destructive/80 group-hover:text-destructive":e?"text-foreground":"text-muted-foreground group-hover:text-foreground"}function S(){const{t:e}=(0,a.Bd)(),t=[{to:f.RU[f.Sb.SETTINGS_PROFILE],label:e("accountSettings.sidebar.profile","Profile"),icon:l},{to:f.RU[f.Sb.SETTINGS_NOTIFICATIONS],label:e("accountSettings.sidebar.notifications","Notifications"),icon:u},{to:f.RU[f.Sb.SETTINGS_PIPELINE_STATUSES],label:e("accountSettings.sidebar.pipelineStatuses","Pipeline / Statuses"),icon:o.A},{to:f.RU[f.Sb.SETTINGS_DANGER_ZONE],label:e("accountSettings.sidebar.dangerZone","Danger Zone"),icon:c,variant:"danger",hint:e("accountSettings.sidebar.sensitiveActions","Sensitive actions")}];return(0,p.jsxs)(h.Z,{className:"p-3 sm:p-4 lg:sticky lg:top-6",children:[(0,p.jsx)(b.X3,{title:e("accountSettings.sidebar.settings","Settings"),subtitle:e("accountSettings.sidebar.account","Account")}),(0,p.jsxs)("div",{className:"mt-3 relative",children:[(0,p.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-8 bg-gradient-to-l from-card to-transparent md:hidden"}),(0,p.jsx)("div",{className:["flex gap-2 overflow-x-auto pb-2","[-ms-overflow-style:none] [scrollbar-width:none]","[&::-webkit-scrollbar]:hidden","md:block md:space-y-1 md:overflow-visible md:pb-0"].join(" "),children:t.map(e=>(0,p.jsx)(m.k2,{to:e.to,className:"block",children:({isActive:t})=>{const s=e.icon;return(0,p.jsxs)("div",{className:x(t),children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,p.jsx)(s,{className:["h-4 w-4",v(t,e.variant)].join(" ")}),(0,p.jsxs)("div",{className:"min-w-0",children:[(0,p.jsx)("div",{className:"truncate text-sm font-medium",children:e.label}),e.hint?(0,p.jsx)("div",{className:"hidden md:block truncate text-xs text-muted-foreground",children:e.hint}):null]})]}),(0,p.jsx)(g,{className:"hidden md:block h-4 w-4 text-muted-foreground group-hover:text-foreground"})]})}},e.to))})]}),(0,p.jsx)("div",{className:"mt-4 hidden sm:block border-t border-border pt-3 text-xs text-muted-foreground",children:e("accountSettings.sidebar.tip","Tip: use the menu to switch sections.")})]})}let j=!1;function k({title:e,subtitle:t,content:r}){const{t:l}=(0,a.Bd)();(0,i.useEffect)(()=>{!async function(){if(j)return;const[e,t,i]=await Promise.all([s.e(2253).then(s.t.bind(s,32253,19)),s.e(5175).then(s.t.bind(s,65175,19)),s.e(5369).then(s.t.bind(s,85369,19))]);(0,n.Z)("accountSettings",{en:e.default,ru:t.default,de:i.default,uk:{}}),j=!0}()},[]);const u=e??l("accountSettings.page.title","Account settings"),o=t??l("accountSettings.page.subtitle","Profile");return(0,p.jsxs)(d.qK,{className:"space-y-6",children:[(0,p.jsx)(d.zY,{title:u,subtitle:o}),(0,p.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-[320px_1fr]",children:[(0,p.jsx)(S,{}),(0,p.jsx)("div",{children:r})]})]})}}}]);
//# sourceMappingURL=2542.4fab4f4b.chunk.js.map