{"version":3,"file":"assets/js/7163.2a2ee6c8.chunk.js","mappings":"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","sources":["webpack://job-tracker-dashboard/./src/shared/lib/url/updateURLParams.ts","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusKit/StatusLabel.tsx","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusKit/StatusDot.tsx","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusKit/StatusMenu.tsx","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusBadge/StatusBadge.tsx","webpack://job-tracker-dashboard/./src/entities/loopMatch/ui/matchCard/matchFormat.ts","webpack://job-tracker-dashboard/./src/entities/loopMatch/ui/matchCard/MatchCard.tsx","webpack://job-tracker-dashboard/./src/entities/loopMatch/ui/matchCard/MatchDetailsModal.tsx","webpack://job-tracker-dashboard/./src/pages/MatchesPage/components/EditMatchModal.tsx","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/filters.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/components/MatchesFilters.tsx","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesDerived.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesPage.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesPageController.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesQueries.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesMutations.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/MatchesPage.tsx"],"sourcesContent":["import type { Location, NavigateFunction } from \"react-router-dom\";\n\ntype Updates = Record<string, string | number | boolean | null | undefined>;\n\ntype Options = {\n  replace?: boolean;\n};\n\n/**\n * Small helper for manipulating query params without manually building strings.\n *\n * Rules:\n * - null/undefined/false => remove param\n * - true => set \"1\"\n * - number/string => set as string\n */\nexport function updateURLParams(\n  navigate: NavigateFunction,\n  location: Location,\n  updates: Updates,\n  options: Options = { replace: true }\n) {\n  const sp = new URLSearchParams(location.search);\n\n  for (const [key, value] of Object.entries(updates)) {\n    if (value === null || value === undefined || value === false) {\n      sp.delete(key);\n      continue;\n    }\n\n    if (value === true) {\n      sp.set(key, \"1\");\n      continue;\n    }\n\n    sp.set(key, String(value));\n  }\n\n  const nextSearch = sp.toString();\n  navigate(\n    {\n      pathname: location.pathname,\n      search: nextSearch ? `?${nextSearch}` : \"\",\n    },\n    { replace: options.replace ?? true }\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { getStatusMeta, type StatusKey } from \"../../model/status\";\n\nfunction humanizeKey(k: string): string {\n  return k\n    .split(\"_\")\n    .map((p) => (p ? p[0].toUpperCase() + p.slice(1).toLowerCase() : p))\n    .join(\" \");\n}\n\nexport type StatusLabelProps = {\n  status: StatusKey;\n  fallback?: string;\n};\n\nexport function StatusLabel({ status, fallback }: StatusLabelProps) {\n  const { t } = useTranslation();\n  const meta = getStatusMeta(status);\n  const fb = fallback ?? humanizeKey(meta.key);\n  return <>{t(meta.labelKey, { defaultValue: fb })}</>;\n}\n","import React from \"react\";\n\nimport { getStageColorForStatus, STATUS_COLOR_DOT_CLASS, type StatusKey } from \"../../model/status\";\n\nfunction clsx(...xs: Array<string | false | null | undefined>) {\n  return xs.filter(Boolean).join(\" \");\n}\n\nexport type StatusDotProps = {\n  status: StatusKey;\n  className?: string;\n  size?: \"xs\" | \"sm\" | \"md\";\n};\n\nconst SIZE_CLASS: Record<NonNullable<StatusDotProps[\"size\"]>, string> = {\n  xs: \"h-1.5 w-1.5\",\n  sm: \"h-2 w-2\",\n  md: \"h-2.5 w-2.5\",\n};\n\nexport function StatusDot({ status, className, size = \"sm\" }: StatusDotProps) {\n  const color = getStageColorForStatus(status);\n  return (\n    <span\n      aria-hidden\n      className={clsx(\"inline-block rounded-full\", SIZE_CLASS[size], STATUS_COLOR_DOT_CLASS[color], className)}\n    />\n  );\n}\n","import React, { useMemo } from \"react\";\n\nimport { STATUS_KEYS, statusesForStage, type Stage, type StatusKey } from \"../../model/status\";\n\nimport { StatusLabel } from \"./StatusLabel\";\n\nfunction clsx(...xs: Array<string | false | null | undefined>) {\n  return xs.filter(Boolean).join(\" \");\n}\n\nexport type StatusMenuProps = {\n  value: StatusKey;\n  onChange: (next: StatusKey) => void;\n  disabled?: boolean;\n  stage?: Stage;\n  options?: readonly StatusKey[];\n  className?: string;\n  size?: \"sm\" | \"md\";\n};\n\nconst SIZE_CLASS: Record<NonNullable<StatusMenuProps[\"size\"]>, string> = {\n  sm: \"h-9 px-sm text-sm\",\n  md: \"h-10 px-md text-sm\",\n};\n\nexport function StatusMenu({\n  value,\n  onChange,\n  disabled = false,\n  stage,\n  options,\n  className,\n  size = \"sm\",\n}: StatusMenuProps) {\n  const items = useMemo<readonly StatusKey[]>(() => {\n    if (options?.length) return options;\n    if (stage) return statusesForStage(stage).map((m) => m.key);\n    return STATUS_KEYS;\n  }, [options, stage]);\n\n  return (\n    <select\n      value={value}\n      disabled={disabled}\n      onChange={(e) => onChange(e.target.value as StatusKey)}\n      className={clsx(\n        \"rounded-full border border-border bg-card text-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n        SIZE_CLASS[size],\n        className,\n      )}\n    >\n      {items.map((k) => (\n        <option key={k} value={k}>\n          <StatusLabel status={k} />\n        </option>\n      ))}\n    </select>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { getStatusMeta, getStageColorForStatus, STATUS_COLOR_CLASS, type StatusKey } from \"../../model/status\";\n\nfunction clsx(...xs: Array<string | false | null | undefined>) {\n  return xs.filter(Boolean).join(\" \");\n}\n\ntype Props = {\n  status: StatusKey;\n  className?: string;\n};\n\nexport function StatusBadge({ status, className }: Props) {\n  const { t } = useTranslation();\n  const meta = getStatusMeta(status);\n\n  return (\n    <span\n      className={clsx(\n        \"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium\",\n        STATUS_COLOR_CLASS[getStageColorForStatus(status)],\n        className\n      )}\n    >\n      {t(meta.labelKey)}\n    </span>\n  );\n}","import type { LoopPlatform } from \"src/entities/loop/model\";\nimport { PLATFORM_REGISTRY } from \"src/entities/loop/model/platformRegistry\";\n\nconst knownPlatforms = new Set<string>(PLATFORM_REGISTRY.map((p) => p.id));\n\nexport function normalizePlatform(p: unknown): LoopPlatform | \"\" {\n  if (typeof p !== \"string\") return \"\";\n  const v = p.trim().toLowerCase();\n  if (!v) return \"\";\n  if (!knownPlatforms.has(v)) return \"\";\n  return v as LoopPlatform;\n}\n\nexport function formatMatchedAt(iso: string): string {\n  if (!iso) return \"\";\n  const d = new Date(iso);\n  if (Number.isNaN(d.getTime())) return iso;\n\n  const yyyy = String(d.getFullYear());\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n\n  return `${dd}.${mm}.${yyyy}`;\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { StatusBadge } from \"src/entities/application/ui/StatusBadge/StatusBadge\";\nimport { StatusMenu } from \"src/entities/application/ui/StatusKit\";\nimport { Button, Card } from \"src/shared/ui\";\n\nimport type { LoopMatch, LoopMatchStatus } from \"../../model/types\";\n\nimport { formatMatchedAt, normalizePlatform } from \"./matchFormat\";\n\ntype MatchCardProps = {\n  match: LoopMatch;\n  loopName: string;\n  busy: boolean;\n  onUpdateStatus: (matchId: LoopMatch[\"id\"], status: LoopMatchStatus) => void;\n  onDelete: (matchId: LoopMatch[\"id\"]) => void;\n  onEdit?: (matchId: LoopMatch[\"id\"]) => void;\n};\n\nexport function MatchCard({\n  match,\n  loopName,\n  busy,\n  onUpdateStatus,\n  onDelete,\n  onEdit,\n}: MatchCardProps) {\n  const { t } = useTranslation();\n\n  const matchedAt = React.useMemo(\n    () => formatMatchedAt(match.matchedAt),\n    [match.matchedAt],\n  );\n\n  const platform = React.useMemo(() => {\n    const p = normalizePlatform(match.platform);\n    return p ? p.toUpperCase() : \"\";\n  }, [match.platform]);\n\n  const meta = React.useMemo(() => {\n    const parts = [match.location, platform, matchedAt, loopName]\n      .map((v) => String(v ?? \"\").trim())\n      .filter(Boolean);\n    return parts.join(\" • \");\n  }, [match.location, platform, matchedAt, loopName]);\n\n  return (\n    <Card variant=\"default\" padding=\"md\" shadow=\"sm\" className=\"flex flex-col gap-sm\">\n      <div className=\"flex items-start justify-between gap-md\">\n        <div className=\"min-w-0\">\n          <div className=\"min-w-0 whitespace-nowrap overflow-hidden text-ellipsis text-sm\">\n            <span className=\"font-semibold text-foreground\">{match.title || \"—\"}</span>\n            <span className=\"ml-2 text-muted-foreground\">{match.company || \"—\"}</span>\n          </div>\n\n          {meta ? (\n            <div className=\"mt-1 text-xs text-muted-foreground whitespace-nowrap overflow-hidden text-ellipsis\">\n              {meta}\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"flex items-center gap-sm\">\n          <StatusPill value={match.status} />\n        </div>\n      </div>\n\n      <div className=\"flex flex-wrap items-center justify-between gap-sm pt-xs\">\n        <label className=\"flex items-center gap-sm text-sm\">\n          <span className=\"text-muted-foreground\">{t(\"matches.common.status\")}</span>\n          <StatusMenu\n              value={match.status}\n              disabled={busy}\n              onChange={(s) => onUpdateStatus(match.id, s as LoopMatchStatus)}\n              size=\"sm\"\n            />\n        </label>\n\n        <div className=\"flex items-center gap-sm\">\n          {onEdit ? (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              shape=\"pill\"\n              disabled={busy}\n              onClick={() => onEdit(match.id)}\n            >\n              {t(\"matches.common.edit\")}\n            </Button>\n          ) : null}\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            shape=\"pill\"\n            disabled={busy}\n            onClick={() => onDelete(match.id)}\n          >\n            {t(\"matches.common.delete\")}\n          </Button>\n        </div>\n      </div>\n    </Card>\n  );\n}\n\ntype StatusPillProps = {\n  value: LoopMatchStatus;\n};\n\nfunction StatusPill({ value }: StatusPillProps) {\n  return <StatusBadge status={value} />;\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { StatusLabel, StatusMenu } from \"src/entities/application/ui/StatusKit\";\nimport { classNames } from \"src/shared/lib\";\nimport { Button, Modal } from \"src/shared/ui\";\n\nimport type { LoopMatch, LoopMatchStatus } from \"../../model/types\";\n\nimport { formatMatchedAt, normalizePlatform } from \"./matchFormat\";\n\ntype Props = Readonly<{\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n\n  match: LoopMatch;\n  loopName: string;\n\n  busy: boolean;\n\n  onDelete: (matchId: string) => void;\n  onUpdateStatus?: (matchId: string, status: LoopMatchStatus) => void;\n  onEdit?: (matchId: string) => void;\n}>;\n\nexport function MatchDetailsModal({\n  open,\n  onOpenChange,\n  match,\n  loopName,\n  busy,\n  onDelete,\n  onUpdateStatus,\n  onEdit,\n}: Props) {\n  const { t } = useTranslation();\n  const matchedAt = React.useMemo(() => formatMatchedAt(match.matchedAt), [match.matchedAt]);\n\n  const platform = React.useMemo(() => {\n    const p = normalizePlatform(match.platform);\n    return p ? p.toUpperCase() : \"\";\n  }, [match.platform]);\n\n  const meta = React.useMemo(() => {\n    const parts = [match.location, platform, matchedAt, loopName]\n      .map((v) => String(v ?? \"\").trim())\n      .filter(Boolean);\n    return parts.join(\" • \");\n  }, [match.location, platform, matchedAt, loopName]);\n\n  const title = React.useMemo(() => {\n    const raw = String(match.title ?? \"\").trim();\n    return raw ? raw : t(\"matches.details.untitled\", { defaultValue: \"Match\" });\n  }, [match.title, t]);\n\n  const url = React.useMemo(() => String(match.url ?? \"\").trim(), [match.url]);\n  const hasUrl = Boolean(url);\n\n  const description = React.useMemo(() => String(match.description ?? \"\").trim(), [match.description]);\n  const hasDescription = Boolean(description);\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={title}\n      description={meta || undefined}\n      size=\"md\"\n    >\n      <div className=\"flex flex-col gap-lg\">\n        {/* Details */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-md\">\n          <Field label={t(\"matches.fields.location\", { defaultValue: \"Location\" })} value={match.location} />\n          <Field label={t(\"matches.fields.platform\", { defaultValue: \"Platform\" })} value={platform} />\n          <Field label={t(\"matches.fields.matchedAt\", { defaultValue: \"Matched\" })} value={matchedAt} />\n          <Field label={t(\"matches.fields.loop\", { defaultValue: \"Loop\" })} value={loopName} />\n        </div>\n\n        {/* Description */}\n        <div>\n          <div className=\"text-sm font-semibold text-foreground\">\n            {t(\"matches.fields.description\", { defaultValue: \"Description\" })}\n          </div>\n          <div\n            className={classNames(\n              \"mt-2 rounded-xl border border-border bg-card p-md\",\n              \"text-sm leading-relaxed whitespace-pre-wrap\",\n              !hasDescription && \"text-muted-foreground\",\n            )}\n          >\n            {hasDescription ? description : t(\"matches.details.noDescription\", { defaultValue: \"No description.\" })}\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className={classNames(\"flex flex-wrap items-center justify-end gap-sm pt-sm\")}>\n          {/* Keep status visible, but do not duplicate the whole summary card */}\n          <span className=\"mr-auto rounded-full border border-border bg-card px-sm py-1 text-xs text-muted-foreground\">\n            <StatusLabel status={match.status} />\n          </span>\n\n          {hasUrl ? (\n            <Button asChild variant=\"outline\" size=\"sm\" shape=\"pill\" disabled={busy}>\n              <a href={url} target=\"_blank\" rel=\"noreferrer\">\n                {t(\"matches.common.openLink\", { defaultValue: \"Open link\" })}\n              </a>\n            </Button>\n          ) : null}\n\n          {onUpdateStatus ? (\n            <StatusMenu value={match.status} disabled={busy} onChange={(s) => onUpdateStatus(match.id, s)} size=\"sm\" />\n          ) : null}\n\n          {onEdit ? (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              shape=\"pill\"\n              disabled={busy}\n              onClick={() => onEdit(match.id)}\n            >\n              {t(\"matches.common.edit\", { defaultValue: \"Edit\" })}\n            </Button>\n          ) : null}\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            shape=\"pill\"\n            disabled={busy}\n            onClick={() => onDelete(match.id)}\n          >\n            {t(\"matches.common.delete\", { defaultValue: \"Delete\" })}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\ntype FieldProps = Readonly<{ label: string; value: string | null | undefined }>;\n\nfunction Field({ label, value }: FieldProps) {\n  const v = String(value ?? \"\").trim();\n  return (\n    <div className=\"rounded-xl border border-border bg-card p-md\">\n      <div className=\"text-xs text-muted-foreground\">{label}</div>\n      <div className=\"mt-1 text-sm font-medium text-foreground whitespace-nowrap overflow-hidden text-ellipsis\">\n        {v || \"—\"}\n      </div>\n    </div>\n  );\n}\n\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { Button, Modal, InputField, TextAreaField } from \"src/shared/ui\";\n\ntype MatchLike = {\n  id: string;\n  title: string;\n  company: string;\n  location: string;\n  url: string;\n  matchedAt?: string | null;\n  description?: string | null;\n};\n\nfunction toDateInputValue(iso?: string | null): string {\n  if (!iso) return \"\";\n  const d = new Date(iso);\n  if (Number.isNaN(d.getTime())) return \"\";\n  const yyyy = String(d.getFullYear());\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  return `${yyyy}-${mm}-${dd}`;\n}\n\nfunction toIsoFromDateInput(v: string): string {\n  return new Date(v).toISOString();\n}\n\nexport function EditMatchModal({\n  open,\n  busy,\n  match,\n  loopName,\n  onClose,\n  onSave,\n}: {\n  open: boolean;\n  busy: boolean;\n  match: MatchLike | null;\n  loopName: string;\n  onClose: () => void;\n  onSave: (matchId: string, patch: Record<string, unknown>) => Promise<void>;\n}) {\n  const { t } = useTranslation();\n  const [localBusy, setLocalBusy] = useState(false);\n\n  const [title, setTitle] = useState(\"\");\n  const [company, setCompany] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  const [matchedAt, setMatchedAt] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  const disabled = busy || localBusy;\n\n  useEffect(() => {\n    if (!open || !match) return;\n    setTitle(match.title ?? \"\");\n    setCompany(match.company ?? \"\");\n    setLocation(match.location ?? \"\");\n    setUrl(match.url ?? \"\");\n    setMatchedAt(toDateInputValue(match.matchedAt ?? null));\n    setDescription(String(match.description ?? \"\"));\n  }, [open, match]);\n\n  const patch = useMemo(() => {\n    const p: Record<string, unknown> = {\n      title: title.trim(),\n      company: company.trim(),\n      location: location.trim(),\n      url: url.trim(),\n      description: description.trim(),\n    };\n\n    if (matchedAt) p.matchedAt = toIsoFromDateInput(matchedAt);\n\n    return p;\n  }, [title, company, location, url, description, matchedAt]);\n\n  const save = async () => {\n    if (!match) return;\n    try {\n      setLocalBusy(true);\n      await onSave(match.id, patch);\n      onClose();\n    } finally {\n      setLocalBusy(false);\n    }\n  };\n\n  if (!match) return null;\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={(v) => {\n        if (!v) onClose();\n      }}\n      title={t(\"matches.modal.editTitle\")}\n      description={loopName ? t(\"matches.modal.loop\", { name: loopName }) : undefined}\n      size=\"lg\"\n      showClose={false}\n    >\n      <div className=\"flex flex-col gap-lg\">\n        <div className=\"grid grid-cols-1 gap-md md:grid-cols-2\">\n          <div className=\"md:col-span-2\">\n            <InputField\n              label={t(\"matches.modal.fields.title\")}\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              disabled={disabled}\n            />\n          </div>\n\n          <InputField\n            label={t(\"matches.modal.fields.company\")}\n            value={company}\n            onChange={(e) => setCompany(e.target.value)}\n            disabled={disabled}\n          />\n\n          <InputField\n            label={t(\"matches.modal.fields.location\")}\n            value={location}\n            onChange={(e) => setLocation(e.target.value)}\n            disabled={disabled}\n          />\n\n          <InputField\n            label={t(\"matches.modal.fields.url\")}\n            value={url}\n            onChange={(e) => setUrl(e.target.value)}\n            disabled={disabled}\n          />\n\n          <InputField\n            label={t(\"matches.modal.fields.matchedAt\")}\n            type=\"date\"\n            value={matchedAt}\n            onChange={(e) => setMatchedAt(e.target.value)}\n            disabled={disabled}\n          />\n\n          <div className=\"md:col-span-2\">\n            <TextAreaField\n              label={t(\"matches.modal.fields.description\")}\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              disabled={disabled}\n              rows={6}\n            />\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-end gap-sm border-t border-border pt-md\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            shape=\"pill\"\n            shadow=\"sm\"\n            disabled={disabled}\n            onClick={onClose}\n          >\n            {t(\"matches.common.cancel\")}\n          </Button>\n\n          <Button\n            variant=\"default\"\n            size=\"sm\"\n            shape=\"pill\"\n            shadow=\"sm\"\n            disabled={disabled}\n            onClick={save}\n          >\n            {t(\"matches.common.save\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import type { LoopMatch, LoopMatchStatus } from \"src/entities/loopMatch\";\n\nexport type TypeMatch = LoopMatch;\n\nexport type MatchesSort = \"matchedAtDesc\" | \"matchedAtAsc\" | \"titleAsc\" | \"companyAsc\";\n\nexport type MatchesFiltersState = {\n  q: string;\n  sort: MatchesSort;\n  loopIds: string[];\n  platforms: string[];\n  statuses: LoopMatchStatus[];\n};\n\nexport const matchesFiltersDefaults: MatchesFiltersState = {\n  q: \"\",\n  sort: \"matchedAtDesc\",\n  loopIds: [],\n  platforms: [],\n  statuses: [],\n};\n\nexport type MatchesFilterChip =\n  | { key: \"q\"; kind: \"q\"; q: string; patch: Partial<MatchesFiltersState> }\n  | { key: \"sort\"; kind: \"sort\"; sort: MatchesSort; patch: Partial<MatchesFiltersState> }\n  | {\n      key: \"loops\";\n      kind: \"loops\";\n      loopNames: string[];\n      patch: Partial<MatchesFiltersState>;\n    }\n  | {\n      key: \"platforms\";\n      kind: \"platforms\";\n      platforms: string[];\n      patch: Partial<MatchesFiltersState>;\n    }\n  | {\n      key: \"statuses\";\n      kind: \"statuses\";\n      statuses: LoopMatchStatus[];\n      patch: Partial<MatchesFiltersState>;\n    };\n\nfunction includesCI(hay: string, needle: string) {\n  return hay.toLowerCase().includes(needle.toLowerCase());\n}\n\nfunction compareIso(a: string, b: string) {\n  if (a === b) return 0;\n  return a < b ? -1 : 1;\n}\n\nexport function selectVisibleMatches(matches: TypeMatch[], filters: MatchesFiltersState) {\n  const q = filters.q.trim();\n  const hasQ = q.length > 0;\n\n  const loopIdsSet = new Set(filters.loopIds);\n  const platformsSet = new Set(filters.platforms.map((p) => p.toLowerCase()));\n  const statusesSet = new Set(filters.statuses);\n\n  const filtered = matches.filter((m) => {\n    if (filters.loopIds.length && !loopIdsSet.has(m.loopId)) return false;\n\n    if (filters.platforms.length) {\n      const p = String(m.platform ?? \"\").toLowerCase();\n      if (!platformsSet.has(p)) return false;\n    }\n\n    if (filters.statuses.length && !statusesSet.has(m.status)) return false;\n\n    if (hasQ) {\n      const parts = [m.title, m.company, m.location, m.url, m.description]\n        .map((x) => String(x ?? \"\"))\n        .join(\" \");\n      if (!includesCI(parts, q)) return false;\n    }\n\n    return true;\n  });\n\n  const sorted = [...filtered].sort((a, b) => {\n    switch (filters.sort) {\n      case \"matchedAtAsc\":\n        return compareIso(a.matchedAt, b.matchedAt);\n      case \"matchedAtDesc\":\n        return compareIso(b.matchedAt, a.matchedAt);\n      case \"titleAsc\":\n        return String(a.title ?? \"\").localeCompare(String(b.title ?? \"\"), undefined, {\n          sensitivity: \"base\",\n        });\n      case \"companyAsc\":\n        return String(a.company ?? \"\").localeCompare(String(b.company ?? \"\"), undefined, {\n          sensitivity: \"base\",\n        });\n      default:\n        return 0;\n    }\n  });\n\n  return sorted;\n}\n\nexport function deriveMatchesFilterChips(args: {\n  filters: MatchesFiltersState;\n  loopOptions: Array<{ id: string; name: string }>;\n}) {\n  const { filters, loopOptions } = args;\n\n  const chips: MatchesFilterChip[] = [];\n\n  if (filters.q.trim()) {\n    chips.push({ key: \"q\", kind: \"q\", q: filters.q.trim(), patch: { q: \"\" } });\n  }\n\n  if (filters.sort !== matchesFiltersDefaults.sort) {\n    chips.push({\n      key: \"sort\",\n      kind: \"sort\",\n      sort: filters.sort,\n      patch: { sort: matchesFiltersDefaults.sort },\n    });\n  }\n\n  if (filters.loopIds.length) {\n    const nameById = new Map(loopOptions.map((l) => [l.id, l.name]));\n    const loopNames = filters.loopIds.map((id) => nameById.get(id) ?? id);\n    chips.push({ key: \"loops\", kind: \"loops\", loopNames, patch: { loopIds: [] } });\n  }\n\n  if (filters.platforms.length) {\n    chips.push({\n      key: \"platforms\",\n      kind: \"platforms\",\n      platforms: filters.platforms,\n      patch: { platforms: [] },\n    });\n  }\n\n  if (filters.statuses.length) {\n    chips.push({\n      key: \"statuses\",\n      kind: \"statuses\",\n      statuses: filters.statuses,\n      patch: { statuses: [] },\n    });\n  }\n\n  return chips;\n}\n","import type { TFunction } from \"i18next\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { getStatusMeta } from \"src/entities/application/model/status\";\nimport type { LoopMatchStatus } from \"src/entities/loopMatch\";\nimport { classNames } from \"src/shared/lib\";\nimport {\n  Button,\n  Card,\n  DebouncedInputField,\n  SelectField,\n  MultiSelectDropdown,\n  Pagination,\n} from \"src/shared/ui\";\n\nimport { matchesFiltersDefaults } from \"../model/filters\";\nimport type { MatchesFiltersState, MatchesSort } from \"../model/filters\";\n\n\nfunction Chip({\n  children,\n  onRemove,\n  removeLabel,\n}: {\n  children: React.ReactNode;\n  onRemove: () => void;\n  removeLabel: string;\n}) {\n  return (\n    <span className=\"inline-flex items-center gap-2 rounded-full border border-border bg-background px-3 py-1 text-xs text-foreground shadow-sm\">\n      <span className=\"truncate max-w-[220px]\">{children}</span>\n\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        shape=\"pill\"\n        shadow=\"none\"\n        onClick={onRemove}\n        aria-label={removeLabel}\n        className={classNames(\n          \"h-6 w-6 p-0\",\n          \"text-muted-foreground hover:text-foreground\",\n          \"focus-visible:ring-2 focus-visible:ring-ring\"\n        )}\n      >\n        ✕\n      </Button>\n    </span>\n  );\n}\n\nfunction labelSort(t: TFunction, v: MatchesSort) {\n  switch (v) {\n    case \"matchedAtDesc\":\n      return t(\"matches.filters.sort.options.matchedAtDesc\");\n    case \"matchedAtAsc\":\n      return t(\"matches.filters.sort.options.matchedAtAsc\");\n    case \"titleAsc\":\n      return t(\"matches.filters.sort.options.titleAsc\");\n    case \"companyAsc\":\n      return t(\"matches.filters.sort.options.companyAsc\");\n    default:\n      return String(v);\n  }\n}\n\nfunction labelStatus(t: TFunction, v: LoopMatchStatus) {\n  const meta = getStatusMeta(v);\n  const humanizeKey = (k: string) =>\n    k\n      .split(\"_\")\n      .map((p) => (p ? p[0].toUpperCase() + p.slice(1).toLowerCase() : p))\n      .join(\" \");\n  return t(meta.labelKey, { defaultValue: humanizeKey(meta.key) });\n}\n\nfunction buildChips(args: {\n  t: TFunction;\n  filters: MatchesFiltersState;\n  loopOptions: Array<{ id: string; name: string }>;\n}): Array<{ key: string; label: string; patch: Partial<MatchesFiltersState> }> {\n  const { t, filters, loopOptions } = args;\n  const chips: Array<{ key: string; label: string; patch: Partial<MatchesFiltersState> }> = [];\n\n  if (filters.q.trim()) {\n    chips.push({\n      key: \"q\",\n      label: t(\"matches.filters.chips.search\", { q: filters.q.trim() }),\n      patch: { q: \"\" },\n    });\n  }\n\n  if (filters.sort !== matchesFiltersDefaults.sort) {\n    chips.push({\n      key: \"sort\",\n      label: t(\"matches.filters.chips.sort\", { value: labelSort(t, filters.sort) }),\n      patch: { sort: matchesFiltersDefaults.sort },\n    });\n  }\n\n  if (filters.loopIds.length) {\n    const nameById = new Map(loopOptions.map((l) => [l.id, l.name]));\n    const names = filters.loopIds.map((id) => nameById.get(id) ?? id).join(\", \");\n    chips.push({\n      key: \"loops\",\n      label: t(\"matches.filters.chips.loops\", { value: names }),\n      patch: { loopIds: [] },\n    });\n  }\n\n  if (filters.platforms.length) {\n    const names = filters.platforms.map((p) => p.toUpperCase()).join(\", \");\n    chips.push({\n      key: \"platforms\",\n      label: t(\"matches.filters.chips.platforms\", { value: names }),\n      patch: { platforms: [] },\n    });\n  }\n\n  if (filters.statuses.length) {\n    const names = filters.statuses.map((s) => labelStatus(t, s)).join(\", \");\n    chips.push({\n      key: \"statuses\",\n      label: t(\"matches.filters.chips.statuses\", { value: names }),\n      patch: { statuses: [] },\n    });\n  }\n\n  return chips;\n}\n\nexport function MatchesFilters({\n  value,\n  onChange,\n  onReset,\n\n  loopOptions,\n  platformOptions,\n  statusOptions,\n\n  totalCount,\n  filteredCount,\n  loopsLoading,\n\n  page,\n  totalPages,\n  onPageChange,\n  pageFrom,\n  pageTo,\n  pageDisabled,\n}: {\n  value: MatchesFiltersState;\n  onChange: (next: MatchesFiltersState) => void;\n  onReset: () => void;\n\n  loopOptions: Array<{ id: string; name: string }>;\n  platformOptions: string[];\n  statusOptions: LoopMatchStatus[];\n\n  totalCount: number;\n  filteredCount: number;\n  loopsLoading: boolean;\n\n  page: number;\n  totalPages: number;\n  onPageChange: (next: number | ((prev: number) => number)) => void;\n  pageFrom: number;\n  pageTo: number;\n  pageDisabled: boolean;\n}) {\n  const { t } = useTranslation();\n\n  const set = (patch: Partial<MatchesFiltersState>) =>\n    onChange({ ...value, ...patch });\n\n  const chips = React.useMemo(() => {\n    return buildChips({ t, filters: value, loopOptions });\n  }, [t, value, loopOptions]);\n\n  const isDefault = chips.length === 0;\n\n  return (\n    <Card\n      variant=\"default\"\n      padding=\"sm\"\n      shadow=\"sm\"\n      className=\"space-y-md overflow-visible\"\n    >\n      <div className=\"flex flex-wrap items-center justify-between gap-md\">\n        <div className=\"flex flex-wrap items-center gap-sm\">\n          <div className=\"text-sm text-muted-foreground\">\n            {t(\"matches.filters.showing\", { filtered: filteredCount, total: totalCount })}\n          </div>\n\n          {chips.length ? (\n            <>\n              {chips.map((c) => (\n                <Chip\n                  key={c.key}\n                  onRemove={() => set(c.patch)}\n                  removeLabel={t(\"matches.filters.common.removeFilter\")}\n                >\n                  {c.label}\n                </Chip>\n              ))}\n\n              <Button\n                variant=\"link\"\n                size=\"sm\"\n                shape=\"pill\"\n                shadow=\"none\"\n                onClick={onReset}\n                className={classNames(\n                  \"ml-1 h-auto px-0 py-0\",\n                  \"text-xs text-muted-foreground\",\n                  \"underline underline-offset-2\",\n                  \"hover:text-foreground\"\n                )}\n              >\n                {t(\"matches.filters.clearAll\")}\n              </Button>\n            </>\n          ) : null}\n        </div>\n\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          shape=\"pill\"\n          shadow=\"sm\"\n          disabled={isDefault}\n          onClick={onReset}\n        >\n          {t(\"matches.filters.reset\")}\n        </Button>\n      </div>\n\n      {/* ONE ROW ON lg, WRAP ON SMALLER */}\n      <div className=\"grid grid-cols-1 gap-md md:grid-cols-12\">\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <DebouncedInputField\n            label={t(\"matches.filters.search.label\")}\n            value={value.q}\n            onValueChange={(q) => set({ q })}\n            delay={250}\n            preset=\"search\"\n            inputSize=\"sm\"\n            autoComplete=\"off\"\n          />\n        </div>\n\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <SelectField\n            label={t(\"matches.filters.sort.label\")}\n            value={value.sort}\n            onChange={(sort) => set({ sort })}\n            size=\"sm\"\n            options={[\n              { value: \"matchedAtDesc\", label: t(\"matches.filters.sort.options.matchedAtDesc\") },\n              { value: \"matchedAtAsc\", label: t(\"matches.filters.sort.options.matchedAtAsc\") },\n              { value: \"titleAsc\", label: t(\"matches.filters.sort.options.titleAsc\") },\n              { value: \"companyAsc\", label: t(\"matches.filters.sort.options.companyAsc\") },\n            ]}\n          />\n        </div>\n          \n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <MultiSelectDropdown\n            label={t(\"matches.filters.loops.label\")}\n            value={value.loopIds}\n            onChange={(loopIds) => set({ loopIds })}\n            options={loopOptions.map((l) => ({ value: l.id, label: l.name }))}\n            placeholder={loopsLoading ? t(\"matches.filters.loops.loading\") : t(\"matches.filters.loops.all\")}\n            clearLabel={t(\"matches.filters.common.clear\")}\n            searchable\n            disabled={loopsLoading}\n          />\n        </div>\n\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <MultiSelectDropdown\n            label={t(\"matches.filters.platforms.label\")}\n            value={value.platforms}\n            onChange={(platforms) => set({ platforms })}\n            options={platformOptions.map((p) => ({\n              value: p,\n              label: p.toUpperCase(),\n            }))}\n            placeholder={t(\"matches.filters.platforms.all\")}\n            clearLabel={t(\"matches.filters.common.clear\")}\n            searchable\n          />\n        </div>\n\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <MultiSelectDropdown\n            label={t(\"matches.filters.statuses.label\")}\n            value={value.statuses}\n            onChange={(statuses) => set({ statuses })}\n            options={statusOptions.map((s) => ({ value: s, label: labelStatus(t, s) }))}\n            placeholder={t(\"matches.filters.statuses.all\")}\n            clearLabel={t(\"matches.filters.common.clear\")}\n          />\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 items-center gap-md md:grid-cols-12\">\n        <div className=\"md:col-span-4 text-xs text-muted-foreground\">\n          {t(\"matches.filters.pageShowing\", { from: pageFrom, to: pageTo, total: filteredCount })}\n        </div>\n\n        <div className=\"md:col-span-8 flex justify-start md:justify-end\">\n          <Pagination\n            page={page}\n            totalPages={totalPages}\n            onPageChange={onPageChange}\n            disabled={pageDisabled}\n            siblingCount={1}\n          />\n        </div>\n      </div>\n    </Card>\n  );\n}\n","import React from \"react\";\n\nimport type { LoopMatchStatus } from \"src/entities/loopMatch\";\n\nfunction cmpStr(a: string, b: string) {\n  return a.localeCompare(b, undefined, { sensitivity: \"base\" });\n}\n\nfunction normalizeToken(v: unknown): string {\n  return String(v ?? \"\")\n    .toLowerCase()\n    .trim();\n}\n\ntype MatchLike = {\n  platform?: unknown;\n  status?: unknown;\n  loopId: string;\n};\n\ntype LoopLike = {\n  id: string;\n  name: string;\n};\n\nexport function useMatchesDerived(matches: MatchLike[], loops: LoopLike[]) {\n  const loopIdToName = React.useMemo(() => {\n    const map = new Map<string, string>();\n    for (const l of loops) map.set(l.id, l.name);\n    return map;\n  }, [loops]);\n\n  const platformOptions = React.useMemo(() => {\n    const set = new Set<string>();\n    for (const m of matches) {\n      const token = normalizeToken(m.platform);\n      if (token) set.add(token);\n    }\n    return Array.from(set).sort(cmpStr);\n  }, [matches]);\n\n  const statusOptions = React.useMemo(() => {\n    const set = new Set<string>();\n    for (const m of matches) {\n      const token = String(m.status ?? \"\").trim();\n      if (token) set.add(token);\n    }\n    return Array.from(set).sort(cmpStr) as LoopMatchStatus[];\n  }, [matches]);\n\n  return { loopIdToName, platformOptions, statusOptions };\n}\n","import React from \"react\";\nimport type { Location, NavigateFunction } from \"react-router-dom\";\n\nimport { updateURLParams } from \"src/shared/lib/url/updateURLParams\";\n\nimport type { MatchesFiltersState, TypeMatch } from \"./filters\";\nimport { matchesFiltersDefaults, selectVisibleMatches } from \"./filters\";\n\n\nconst CSV_SEP = \",\";\n\nfunction readCsv(sp: URLSearchParams, key: string): string[] {\n  const raw = sp.get(key);\n  if (!raw) return [];\n  return raw\n    .split(CSV_SEP)\n    .map((s) => s.trim())\n    .filter(Boolean);\n}\n\nfunction writeCsv(values: string[]): string | null {\n  const v = values.map((s) => String(s).trim()).filter(Boolean);\n  return v.length ? v.join(CSV_SEP) : null;\n}\n\nexport function readMatchesStateFromSearch(search: string): {\n  filters: MatchesFiltersState;\n  page: number;\n} {\n  const sp = new URLSearchParams(search);\n\n  const q = sp.get(\"q\") ?? matchesFiltersDefaults.q;\n  const sort = (sp.get(\"sort\") as MatchesFiltersState[\"sort\"]) ?? matchesFiltersDefaults.sort;\n  const loopIds = readCsv(sp, \"loop\");\n  const platforms = readCsv(sp, \"platform\");\n  const statuses = readCsv(sp, \"status\") as MatchesFiltersState[\"statuses\"];\n\n  const pageRaw = sp.get(\"page\");\n  const page = Math.max(1, Number(pageRaw ?? 1) || 1);\n\n  return {\n    filters: {\n      q,\n      sort,\n      loopIds,\n      platforms,\n      statuses,\n    },\n    page,\n  };\n}\n\nexport function writeMatchesStateToUrl(args: {\n  navigate: NavigateFunction;\n  location: Location;\n  filters: MatchesFiltersState;\n  page: number;\n  replace?: boolean;\n}) {\n  const { navigate, location, filters, page, replace = true } = args;\n\n  updateURLParams(\n    navigate,\n    location,\n    {\n      q: filters.q.trim() || null,\n      sort: filters.sort !== matchesFiltersDefaults.sort ? filters.sort : null,\n\n      loop: writeCsv(filters.loopIds),\n      platform: writeCsv(filters.platforms),\n      status: writeCsv(filters.statuses),\n\n      page: page > 1 ? page : null,\n    },\n    { replace },\n  );\n}\n\nexport function useMatchesPage(args: {\n  matches: TypeMatch[];\n  /** Route location.search */\n  search: string;\n  navigate: NavigateFunction;\n  location: Location;\n}) {\n  const { matches, search, navigate, location } = args;\n\n  const initial = React.useMemo(() => readMatchesStateFromSearch(search), [search]);\n\n  const [filters, setFiltersState] = React.useState<MatchesFiltersState>(initial.filters);\n\n  // Keep URL -> state in sync on first render only. We intentionally do not\n  // react to URL edits after mount to avoid complex bidirectional sync.\n  const didInitRef = React.useRef(false);\n  React.useEffect(() => {\n    if (didInitRef.current) return;\n    didInitRef.current = true;\n    setFiltersState(initial.filters);\n  }, [initial.filters]);\n\n  const visible = React.useMemo(() => {\n    return selectVisibleMatches(matches, filters);\n  }, [matches, filters]);\n\n  const setFilters = React.useCallback(\n    (next: MatchesFiltersState) => {\n      setFiltersState(next);\n      // Any filter change should reset pagination to page 1 in URL.\n      writeMatchesStateToUrl({ navigate, location, filters: next, page: 1, replace: true });\n    },\n    [navigate, location],\n  );\n\n  const reset = React.useCallback(() => {\n    setFiltersState(matchesFiltersDefaults);\n    writeMatchesStateToUrl({ navigate, location, filters: matchesFiltersDefaults, page: 1, replace: true });\n  }, [navigate, location]);\n\n  return { filters, setFilters, reset, visible, initialPage: initial.page };\n}\n","import React from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport type { UpdateMatchInput, LoopMatchStatus } from \"src/entities/loopMatch\";\nimport { usePagination } from \"src/shared/lib/pagination/usePagination\";\n\nimport { matchesFiltersDefaults } from \"./filters\";\nimport { useMatchesDerived } from \"./useMatchesDerived\";\nimport { useMatchesMutations } from \"./useMatchesMutations\";\nimport { useMatchesPage, writeMatchesStateToUrl } from \"./useMatchesPage\";\nimport { useMatchesQueries } from \"./useMatchesQueries\";\n\nfunction stableFiltersKey(filters: unknown): string {\n  const seen = new WeakSet<object>();\n\n  const sortDeep = (val: unknown): unknown => {\n    if (val === null || typeof val !== \"object\") return val;\n\n    if (val instanceof Date) return val.toISOString();\n\n    if (Array.isArray(val)) {\n      return val.map(sortDeep);\n    }\n\n    if (seen.has(val as object)) return \"[Circular]\";\n    seen.add(val as object);\n\n    const obj = val as Record<string, unknown>;\n    const keys = Object.keys(obj).sort((a, b) =>\n      a.localeCompare(b, undefined, { sensitivity: \"base\" }),\n    );\n\n    const out: Record<string, unknown> = {};\n    for (const k of keys) out[k] = sortDeep(obj[k]);\n    return out;\n  };\n\n  try {\n    return JSON.stringify(sortDeep(filters));\n  } catch {\n    return String(filters);\n  }\n}\n\nexport function useMatchesPageController() {\n  const { userId } = useAuthSelectors();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const { matchesQ, loopsQ, matches, loops } = useMatchesQueries();\n  const { busy, actions } = useMatchesMutations();\n\n  const { filters, setFilters, reset, visible, initialPage } = useMatchesPage({\n    matches,\n    search: location.search,\n    navigate,\n    location,\n  });\n\n  const [editingId, setEditingId] = React.useState<string | null>(null);\n\n  const { loopIdToName, platformOptions, statusOptions } = useMatchesDerived(\n    matches,\n    loops,\n  );\n\n  const filtersKey = React.useMemo(() => stableFiltersKey(filters), [filters]);\n\n  const resetKey = React.useMemo(() => {\n    return [\n      `userId:${userId ?? \"anon\"}`,\n      `filters:${filtersKey}`,\n      `total:${matches.length}`,\n      `visible:${visible.length}`,\n    ].join(\"|\");\n  }, [userId, filtersKey, matches.length, visible.length]);\n\n  const pagination = usePagination({\n    totalItems: visible.length,\n    pageSize: 6,\n    initialPage,\n    resetKey,\n  });\n\n  const setPage = React.useCallback(\n    (next: number | ((prev: number) => number)) => {\n      pagination.setPage(next);\n\n      const nextValue =\n        typeof next === \"function\" ? next(pagination.page) : next;\n      const safe = Math.max(1, Number(nextValue) || 1);\n      writeMatchesStateToUrl({\n        navigate,\n        location,\n        filters,\n        page: safe,\n        replace: true,\n      });\n    },\n    [pagination, navigate, location, filters],\n  );\n\n  const pagedMatches = React.useMemo(() => {\n    return visible.slice(\n      pagination.offset,\n      pagination.offset + pagination.limit,\n    );\n  }, [visible, pagination.offset, pagination.limit]);\n\n  const editingMatch = React.useMemo(() => {\n    if (!editingId) return null;\n    return matches.find((m) => m.id === editingId) ?? null;\n  }, [editingId, matches]);\n\n  const resetFilters = React.useCallback(\n    () => setFilters(matchesFiltersDefaults),\n    [setFilters],\n  );\n\n  const onReset = reset ?? resetFilters;\n\n  const onSaveEdit = React.useCallback(\n    async (matchId: string, patch: UpdateMatchInput[\"patch\"]) => {\n      await actions.onSaveEdit(matchId, patch);\n      setEditingId(null);\n    },\n    [actions],\n  );\n\n  return {\n    userId,\n    queries: { matchesQ, loopsQ },\n    busy,\n\n    matches,\n    loops,\n\n    loopIdToName,\n    platformOptions,\n    statusOptions,\n\n    filters,\n    setFilters,\n    onReset,\n\n    visible,\n    pagination: { ...pagination, setPage },\n    pagedMatches,\n\n    editingMatch,\n    setEditingId,\n\n    actions: {\n      onDelete: async (matchId: string) => {\n        const m = matches.find((x) => x.id === matchId);\n        if (!m) return;\n        await actions.onDelete(m.id, m.loopId);\n      },\n      onUpdateStatus: async (matchId: string, status: LoopMatchStatus) => {\n        const m = matches.find((x) => x.id === matchId);\n        if (!m) return;\n        await actions.onUpdateStatus(m.id, m.loopId, status);\n      },\n      onSaveEdit,\n    },\n  };\n}\n","import { useAuthSelectors } from \"src/entities/auth\";\nimport { useGetLoopsQuery } from \"src/entities/loop\";\nimport { useGetAllMatchesQuery } from \"src/entities/loopMatch\";\n\n\n\nexport function useMatchesQueries() {\n  const { isAuthReady, isAuthenticated } = useAuthSelectors();\n  const skip = !isAuthReady || !isAuthenticated;\n\n  const matchesQ = useGetAllMatchesQuery(undefined, { skip });\n  const loopsQ = useGetLoopsQuery(undefined, { skip });\n\n  const matches = matchesQ.data ?? [];\n  const loops = loopsQ.data ?? [];\n\n  return { matchesQ, loopsQ, matches, loops };\n}\n","import React from \"react\";\n\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport {\n  useDeleteMatchMutation,\n  useUpdateMatchMutation,\n  useUpdateMatchStatusMutation,\n  type UpdateMatchInput,\n} from \"src/entities/loopMatch\";\nimport type { LoopMatchStatus } from \"src/entities/loopMatch\";\nimport { notify } from \"src/shared/lib\";\nimport { getErrorMessage } from \"src/shared/lib/errors\";\n\n/**\n * All match mutations.\n *\n * NOTE: we do NOT pass `userId` anymore.\n * Firestore ownership is derived from the document path: users/{uid}/loopMatches/...\n */\nexport function useMatchesMutations() {\n  const { isAuthReady, isAuthenticated } = useAuthSelectors();\n\n  const [updateStatus, updStatus] = useUpdateMatchStatusMutation();\n  const [updateMatch, updMatch] = useUpdateMatchMutation();\n  const [deleteMatch, del] = useDeleteMatchMutation();\n\n  const busy = updStatus.isLoading || updMatch.isLoading || del.isLoading;\n\n  const guardAuth = React.useCallback(() => {\n    if (!isAuthReady || !isAuthenticated) {\n      notify(\"error\", \"You are not signed in.\");\n      return false;\n    }\n    return true;\n  }, [isAuthReady, isAuthenticated]);\n\n  const onDelete = React.useCallback(\n    async (matchId: string, loopId: string) => {\n      if (!guardAuth()) return;\n\n      try {\n        await deleteMatch({ matchId, loopId }).unwrap();\n        notify(\"success\", \"Match deleted\");\n      } catch (err) {\n        notify(\"error\", `Failed to delete match: ${getErrorMessage(err)}`);\n      }\n    },\n    [deleteMatch, guardAuth],\n  );\n\n  const onUpdateStatus = React.useCallback(\n    async (matchId: string, loopId: string, status: LoopMatchStatus) => {\n      if (!guardAuth()) return;\n\n      try {\n        await updateStatus({ matchId, loopId, status }).unwrap();\n        notify(\"success\", \"Match updated\");\n      } catch (err) {\n        notify(\"error\", `Failed to update match: ${getErrorMessage(err)}`);\n      }\n    },\n    [guardAuth, updateStatus],\n  );\n\n  const onSaveEdit = React.useCallback(\n    async (matchId: string, patch: UpdateMatchInput[\"patch\"]) => {\n      if (!guardAuth()) throw new Error(\"Not signed in\");\n\n      try {\n        await updateMatch({ matchId, patch }).unwrap();\n        notify(\"success\", \"Match saved\");\n      } catch (err) {\n        notify(\"error\", `Failed to save match: ${getErrorMessage(err)}`);\n        throw err;\n      }\n    },\n    [guardAuth, updateMatch],\n  );\n\n  return { busy, actions: { onDelete, onUpdateStatus, onSaveEdit } };\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { MatchCard } from \"src/entities/loopMatch\";\nimport { getErrorMessage } from \"src/shared/lib\";\nimport { PageHeader, PageMessage } from \"src/shared/ui\";\n\nimport { EditMatchModal } from \"./components/EditMatchModal\";\nimport { MatchesFilters } from \"./components/MatchesFilters\";\nimport { useMatchesPageController } from \"./model/useMatchesPageController\";\n\nexport default function MatchesPage() {\n  const { t } = useTranslation();\n  const vm = useMatchesPageController();\n  const { matchesQ, loopsQ } = vm.queries;\n\n  if (matchesQ.isLoading) {\n    return (\n      <div className=\"w-full h-full flex flex-col min-h-0\">\n        <PageHeader title={t(\"matches.list.title\")} subtitle={t(\"matches.list.subtitle\")} />\n        <PageMessage>{t(\"matches.common.loading\")}</PageMessage>\n      </div>\n    );\n  }\n\n  if (matchesQ.isError) {\n    return (\n      <div className=\"w-full h-full flex flex-col min-h-0\">\n        <PageHeader title={t(\"matches.list.title\")} subtitle={t(\"matches.list.subtitle\")} />\n        <PageMessage>{getErrorMessage(matchesQ.error)}</PageMessage>\n      </div>\n    );\n  }\n\n  if (vm.matches.length === 0) {\n    return (\n      <div className=\"w-full h-full flex flex-col min-h-0\">\n        <PageHeader title={t(\"matches.list.title\")} subtitle={t(\"matches.list.subtitle\")} />\n        <PageMessage>{t(\"matches.list.empty\")}</PageMessage>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full h-full flex flex-col min-h-0\">\n      <PageHeader\n        title={t(\"matches.list.title\")}\n        subtitle={t(\"matches.list.subtitle\")}\n      />\n\n      <>\n        <MatchesFilters\n          value={vm.filters}\n          onChange={vm.setFilters}\n          onReset={vm.onReset}\n          loopOptions={vm.loops.map((l) => ({ id: l.id, name: l.name }))}\n          platformOptions={vm.platformOptions}\n          statusOptions={vm.statusOptions}\n          totalCount={vm.matches.length}\n          filteredCount={vm.visible.length}\n          loopsLoading={loopsQ.isLoading}\n          page={vm.pagination.page}\n          totalPages={vm.pagination.totalPages}\n          onPageChange={vm.pagination.setPage}\n          pageFrom={vm.pagination.info.from}\n          pageTo={vm.pagination.info.to}\n          pageDisabled={vm.busy || matchesQ.isFetching}\n        />\n\n        <div className=\"flex-1 min-h-0 overflow-auto pt-md\">\n          <div className=\"grid grid-cols-1 gap-md\">\n            {vm.pagedMatches.map((m) => (\n              <MatchCard\n                key={m.id}\n                match={m}\n                loopName={vm.loopIdToName.get(m.loopId) ?? \"\"}\n                busy={vm.busy}\n                onUpdateStatus={vm.actions.onUpdateStatus}\n                onDelete={vm.actions.onDelete}\n                onEdit={vm.setEditingId}\n              />\n            ))}\n          </div>\n        </div>\n\n        <EditMatchModal\n          open={Boolean(vm.editingMatch)}\n          busy={vm.busy}\n          loopName={vm.editingMatch ? (vm.loopIdToName.get(vm.editingMatch.loopId) ?? \"\") : \"\"}\n          match={vm.editingMatch}\n          onClose={() => vm.setEditingId(null)}\n          onSave={vm.actions.onSaveEdit}\n        />\n      </>\n    </div>\n  );\n}\n"],"names":["updateURLParams","navigate","location","updates","options","replace","sp","URLSearchParams","search","key","value","Object","entries","set","String","delete","nextSearch","toString","pathname","StatusLabel","status","fallback","t","useTranslation","meta","getStatusMeta","fb","split","map","p","toUpperCase","slice","toLowerCase","join","_jsx","_Fragment","children","labelKey","defaultValue","clsx","xs","filter","Boolean","SIZE_CLASS","sm","md","StatusDot","className","size","color","getStageColorForStatus","STATUS_COLOR_DOT_CLASS","StatusMenu","onChange","disabled","stage","items","useMemo","length","statusesForStage","m","STATUS_KEYS","e","target","k","StatusBadge","STATUS_COLOR_CLASS","knownPlatforms","Set","PLATFORM_REGISTRY","id","normalizePlatform","v","trim","has","formatMatchedAt","iso","d","Date","Number","isNaN","getTime","yyyy","getFullYear","mm","getMonth","padStart","getDate","MatchCard","match","loopName","busy","onUpdateStatus","onDelete","onEdit","matchedAt","React","platform","_jsxs","Card","variant","padding","shadow","title","company","StatusPill","s","Button","shape","onClick","MatchDetailsModal","open","onOpenChange","url","hasUrl","description","hasDescription","Modal","undefined","Field","label","classNames","asChild","href","rel","EditMatchModal","onClose","onSave","localBusy","setLocalBusy","useState","setTitle","setCompany","setLocation","setUrl","setMatchedAt","setDescription","useEffect","toDateInputValue","patch","toISOString","name","showClose","InputField","type","TextAreaField","rows","async","matchesFiltersDefaults","q","sort","loopIds","platforms","statuses","compareIso","a","b","Chip","onRemove","removeLabel","labelSort","labelStatus","MatchesFilters","onReset","loopOptions","platformOptions","statusOptions","totalCount","filteredCount","loopsLoading","page","totalPages","onPageChange","pageFrom","pageTo","pageDisabled","chips","args","filters","push","nameById","Map","l","names","get","buildChips","isDefault","filtered","total","c","DebouncedInputField","onValueChange","delay","preset","inputSize","autoComplete","SelectField","MultiSelectDropdown","placeholder","clearLabel","searchable","from","to","Pagination","siblingCount","cmpStr","localeCompare","sensitivity","normalizeToken","readCsv","raw","writeCsv","values","writeMatchesStateToUrl","loop","useMatchesPageController","userId","useAuthSelectors","useNavigate","useLocation","matchesQ","loopsQ","matches","loops","isAuthReady","isAuthenticated","skip","useGetAllMatchesQuery","useGetLoopsQuery","data","useMatchesQueries","actions","updateStatus","updStatus","useUpdateMatchStatusMutation","updateMatch","updMatch","useUpdateMatchMutation","deleteMatch","del","useDeleteMatchMutation","isLoading","guardAuth","notify","matchId","loopId","unwrap","err","getErrorMessage","onSaveEdit","Error","useMatchesMutations","setFilters","reset","visible","initialPage","initial","pageRaw","Math","max","readMatchesStateFromSearch","setFiltersState","didInitRef","current","hasQ","loopIdsSet","platformsSet","statusesSet","parts","x","needle","includes","selectVisibleMatches","next","useMatchesPage","editingId","setEditingId","loopIdToName","token","add","Array","useMatchesDerived","filtersKey","seen","WeakSet","sortDeep","val","isArray","obj","keys","out","JSON","stringify","stableFiltersKey","resetKey","pagination","usePagination","totalItems","pageSize","setPage","nextValue","safe","pagedMatches","offset","limit","editingMatch","find","resetFilters","queries","MatchesPage","vm","PageHeader","subtitle","PageMessage","isError","error","info","isFetching"],"ignoreList":[],"sourceRoot":""}