{"version":3,"file":"assets/js/4665.6b06c97f.chunk.js","mappings":"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","sources":["webpack://job-tracker-dashboard/./src/pages/BoardPage/model/order.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/model/useBoardMutations.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/model/useBoardController.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/model/useBoardQueries.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/model/useBoardOrderState.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/model/grouping.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/BoardLane.tsx","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/BoardMatchCardView.tsx","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/BoardMatchCard.tsx","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/BoardColumn.tsx","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/boardColumns/columnsState.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/BoardColumns.tsx","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/boardColumns/useBoardColumnsDnd.ts","webpack://job-tracker-dashboard/./src/pages/BoardPage/ui/BoardState.tsx","webpack://job-tracker-dashboard/./src/pages/BoardPage/BoardPage.tsx","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusKit/StatusLabel.tsx","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusKit/StatusDot.tsx","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusKit/StatusMenu.tsx","webpack://job-tracker-dashboard/./src/entities/application/ui/StatusBadge/StatusBadge.tsx","webpack://job-tracker-dashboard/./src/entities/loopMatch/ui/matchCard/matchFormat.ts","webpack://job-tracker-dashboard/./src/entities/loopMatch/ui/matchCard/MatchCard.tsx","webpack://job-tracker-dashboard/./src/entities/loopMatch/ui/matchCard/MatchDetailsModal.tsx"],"sourcesContent":["import { BOARD_COLUMNS_LIST, type BoardColumnKey } from \"src/entities/application/model/status\";\nimport { getBoardColumn } from \"src/entities/application/model/status\";\nimport type { LoopMatch } from \"src/entities/loopMatch\";\n\nimport type { BoardOrderByStatus } from \"./types\";\n\nfunction storageKey(userId: string) {\n  return `board_order_v1:${userId}`;\n}\n\nfunction statusValuesSet(): Set<string> {\n  return new Set(BOARD_COLUMNS_LIST.map((s) => String(s.key)));\n}\n\nfunction isValidStatus(value: unknown): value is BoardColumnKey {\n  if (typeof value !== \"string\") return false;\n  return statusValuesSet().has(value);\n}\n\nexport function createEmptyOrder(): BoardOrderByStatus {\n  const obj = {} as BoardOrderByStatus;\n  for (const s of BOARD_COLUMNS_LIST) obj[s.key] = [];\n  return obj;\n}\n\nexport function loadOrder(userId: string): BoardOrderByStatus {\n  try {\n    const raw = localStorage.getItem(storageKey(userId));\n    if (!raw) return createEmptyOrder();\n\n    const parsed = JSON.parse(raw) as Partial<Record<BoardColumnKey, unknown>>;\n\n    const base = createEmptyOrder();\n    for (const s of BOARD_COLUMNS_LIST) {\n      const key = s.key;\n      const arr = Array.isArray(parsed?.[key]) ? (parsed?.[key] as unknown[]) : [];\n      base[key] = arr.filter((x): x is string => typeof x === \"string\");\n    }\n    return base;\n  } catch {\n    return createEmptyOrder();\n  }\n}\n\nexport function saveOrder(userId: string, order: BoardOrderByStatus): void {\n  try {\n    localStorage.setItem(storageKey(userId), JSON.stringify(order));\n  } catch {\n    // ignore\n  }\n}\n\n/**\n * Делает order \"железобетонным\":\n * 1) гарантирует массивы для всех статусов\n * 2) удаляет id, которых нет в matches\n * 3) добавляет отсутствующие id в правильный статус (невалидный статус -> \"new\")\n */\nexport function ensureIdsExist(order: BoardOrderByStatus, matches: readonly LoopMatch[]): void {\n  // 1) Ensure all statuses exist\n  for (const s of BOARD_COLUMNS_LIST) {\n    const key = s.key;\n    if (!Array.isArray(order[key])) order[key] = [];\n  }\n\n  const existingIds = new Set(matches.map((m) => m.id));\n\n  // 2) Remove ids that no longer exist\n  for (const s of BOARD_COLUMNS_LIST) {\n    const key = s.key;\n    order[key] = (order[key] ?? []).filter((id) => existingIds.has(id));\n  }\n\n  // 3) Add missing ids into the correct bucket\n  for (const m of matches) {\n    const col = getBoardColumn(m.status);\n    const status: BoardColumnKey = isValidStatus(col) ? col : \"ACTIVE\";\n    const arr = order[status] ?? (order[status] = []);\n    if (!arr.includes(m.id)) arr.push(m.id);\n  }\n}\n\nexport function moveInArray<T>(arr: readonly T[], from: number, to: number): T[] {\n  const copy = [...arr];\n  const [item] = copy.splice(from, 1);\n  copy.splice(to, 0, item);\n  return copy;\n}\n\n\nexport function sortByOrder(\n  matches: readonly LoopMatch[],\n  orderIds: readonly string[],\n): LoopMatch[] {\n  const idx = new Map<string, number>();\n  for (let i = 0; i < orderIds.length; i++) idx.set(orderIds[i], i);\n\n  const decorated = matches.map((m, i) => ({\n    m,\n    rank: idx.has(m.id) ? (idx.get(m.id) as number) : Number.MAX_SAFE_INTEGER,\n    stable: i,\n  }));\n\n  decorated.sort((a, b) => {\n    if (a.rank !== b.rank) return a.rank - b.rank;\n    return a.stable - b.stable;\n  });\n\n  return decorated.map((x) => x.m);\n}\n","import React from \"react\";\n\nimport type { BoardColumnKey, StatusKey } from \"src/entities/application/model/status\";\nimport {\n  useDeleteMatchMutation,\n  useUpdateMatchStatusMutation,\n  type LoopMatch,\n} from \"src/entities/loopMatch\";\n\nexport type BoardMutations = Readonly<{\n  busy: boolean;\n  deleteMatch: (args: Readonly<{ matchId: string; loopId: string }>) => Promise<unknown>;\n  updateStatus: (args: Readonly<{ matchId: string; loopId: string; status: BoardColumnKey }>) => Promise<unknown>;\n  onDeleteById: (matches: readonly LoopMatch[], matchId: LoopMatch[\"id\"]) => Promise<void>;\n}>;\n\nconst COLUMN_DEFAULT_STATUS: Record<BoardColumnKey, StatusKey> = {\n  ACTIVE: \"APPLIED\",\n  INTERVIEW: \"HR_CALL_SCHEDULED\",\n  OFFER: \"OFFER_RECEIVED\",\n  HIRED: \"OFFER_ACCEPTED\",\n  REJECTED: \"REJECTED_PRE_INTERVIEW\",\n  NO_RESPONSE: \"GHOSTING\",\n  ARCHIVED: \"ARCHIVED_GENERAL\",\n};\n\nfunction fireAndForget(p: Promise<unknown>): void {\n  p.catch(() => {\n    // Errors are handled by RTK Query state in UI.\n  });\n}\n\n\nexport function useBoardMutations(): BoardMutations {\n  const [deleteMatchTrigger, deleteState] = useDeleteMatchMutation();\n  const [updateStatusTrigger, updateState] = useUpdateMatchStatusMutation();\n\n  const busy = Boolean(deleteState.isLoading || updateState.isLoading);\n\n  const deleteMatch = React.useCallback(\n    async (args: Readonly<{ matchId: string; loopId: string }>) => {\n      return deleteMatchTrigger(args);\n    },\n    [deleteMatchTrigger],\n  );\n\n  const updateStatus = React.useCallback(\n    async (args: Readonly<{ matchId: string; loopId: string; status: BoardColumnKey }>) => {\n      return updateStatusTrigger({\n        matchId: args.matchId,\n        loopId: args.loopId,\n        status: COLUMN_DEFAULT_STATUS[args.status],\n      });\n    },\n    [updateStatusTrigger],\n  );\n\n  const onDeleteById = React.useCallback(\n    async (matches: readonly LoopMatch[], matchId: LoopMatch[\"id\"]) => {\n      const match = matches.find((m) => m.id === matchId);\n      if (!match) return;\n      await deleteMatch({ matchId: match.id, loopId: match.loopId });\n    },\n    [deleteMatch],\n  );\n\n  return {\n    busy,\n    deleteMatch,\n    updateStatus,\n    onDeleteById,\n  };\n}\n\n\nexport function fireAndForgetMutation(p: Promise<unknown>): void {\n  fireAndForget(p);\n}\n","import React from \"react\";\n\nimport { BOARD_COLUMNS_LIST, type BoardColumnKey } from \"src/entities/application/model/status\";\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport type { LoopMatch } from \"src/entities/loopMatch\";\n\nimport { groupMatchesByStatus } from \"./grouping\";\nimport { sortByOrder } from \"./order\";\nimport type { BoardDragPayload, BoardVM } from \"./types\";\nimport { useBoardMutations, fireAndForgetMutation } from \"./useBoardMutations\";\nimport { useBoardOrderState } from \"./useBoardOrderState\";\nimport { useBoardQueries } from \"./useBoardQueries\";\n\nfunction buildLoopIdToName(loops: ReadonlyArray<{ id: string; name: string }>): ReadonlyMap<string, string> {\n  const map = new Map<string, string>();\n  for (const l of loops) map.set(l.id, l.name);\n  return map;\n}\n\nfunction findMatchById(matches: readonly LoopMatch[], matchId: string): LoopMatch | undefined {\n  return matches.find((m) => m.id === matchId);\n}\n\nfunction buildBoardColumns(\n  matches: readonly LoopMatch[],\n  orderByStatus: Record<BoardColumnKey, string[]>,\n): ReadonlyMap<BoardColumnKey, readonly LoopMatch[]> {\n  const grouped = groupMatchesByStatus(matches);\n\n\n  for (const s of BOARD_COLUMNS_LIST) {\n    const status = s.key;\n    const list = grouped.get(status) ?? [];\n    const ordered = sortByOrder(list, orderByStatus[status] ?? []);\n    grouped.set(status, ordered);\n  }\n\n  return grouped as ReadonlyMap<BoardColumnKey, readonly LoopMatch[]>;\n}\n\nexport function useBoardController(): BoardVM {\n  const { userId } = useAuthSelectors();\n\n\n  const { loops, matches, matchesQ } = useBoardQueries();\n  const loopIdToName = React.useMemo(() => buildLoopIdToName(loops), [loops]);\n\n\n  const { orderByStatus, applyDrop } = useBoardOrderState({ userId, matches });\n\n\n  const { busy, onDeleteById, updateStatus } = useBoardMutations();\n\n\n  const byStatus = React.useMemo(\n    () => buildBoardColumns(matches, orderByStatus),\n    [matches, orderByStatus],\n  );\n\n\n  const onDelete = React.useCallback(\n    (matchId: string) => {\n      fireAndForgetMutation(onDeleteById(matches, matchId));\n    },\n    [matches, onDeleteById],\n  );\n\n  const onDropToStatus = React.useCallback(\n    async (payload: BoardDragPayload, toStatus: BoardColumnKey, toIndex: number) => {\n      if (!userId) return;\n      if (busy) return;\n\n\n      applyDrop(payload, toStatus, toIndex);\n\n\n      if (payload.fromStatus === toStatus) return;\n\n      const match = findMatchById(matches, payload.matchId);\n      if (!match) return;\n\n      await updateStatus({ matchId: match.id, loopId: match.loopId, status: toStatus });\n    },\n    [applyDrop, busy, matches, updateStatus, userId],\n  );\n\n  return {\n    busy,\n    queries: { matchesQ },\n    data: { matches, byStatus, loopIdToName },\n    actions: { onDelete, onDropToStatus },\n  };\n}\n","import React from \"react\";\n\nimport { useGetLoopsQuery, type Loop } from \"src/entities/loop\";\nimport { useGetAllMatchesQuery, type LoopMatch } from \"src/entities/loopMatch\";\n\nimport type { BoardMatchesQueryState } from \"./types\";\n\nexport type BoardQueries = Readonly<{\n  loops: readonly Loop[];\n  matches: readonly LoopMatch[];\n  matchesQ: BoardMatchesQueryState;\n}>;\n\n\nexport function useBoardQueries(): BoardQueries {\n  const loopsQ = useGetLoopsQuery();\n  const matchesQ = useGetAllMatchesQuery();\n\n  const loops = React.useMemo(() => loopsQ.data ?? [], [loopsQ.data]);\n  const matches = React.useMemo(() => matchesQ.data ?? [], [matchesQ.data]);\n\n  const matchesQueryState: BoardMatchesQueryState = React.useMemo(\n    () => ({\n      isLoading: matchesQ.isLoading,\n      isError: matchesQ.isError,\n      error: matchesQ.error,\n    }),\n    [matchesQ.error, matchesQ.isError, matchesQ.isLoading],\n  );\n\n  return { loops, matches, matchesQ: matchesQueryState };\n}\n","import React from \"react\";\n\nimport type { BoardColumnKey } from \"src/entities/application/model/status\";\nimport type { LoopMatch } from \"src/entities/loopMatch\";\n\nimport { createEmptyOrder, ensureIdsExist, loadOrder, saveOrder } from \"./order\";\nimport type { BoardDragPayload, BoardOrderByStatus } from \"./types\";\n\n\nexport type BoardOrderController = Readonly<{\n  orderByStatus: BoardOrderByStatus;\n  applyDrop: (payload: BoardDragPayload, toStatus: BoardColumnKey, toIndex: number) => void;\n}>;\n\nexport function useBoardOrderState(params: Readonly<{\n  userId: string | null | undefined;\n  matches: readonly LoopMatch[];\n}>): BoardOrderController {\n  const { userId, matches } = params;\n\n\n  const [orderByStatus, setOrderByStatus] = React.useState<BoardOrderByStatus>(() => {\n    if (!userId) return createEmptyOrder();\n    return loadOrder(userId);\n  });\n\n  React.useEffect(() => {\n    if (!userId) {\n      setOrderByStatus(createEmptyOrder());\n      return;\n    }\n    setOrderByStatus(loadOrder(userId));\n  }, [userId]);\n\n\n  React.useEffect(() => {\n    if (!userId) return;\n\n    setOrderByStatus((prev) => {\n      const next: BoardOrderByStatus = { ...prev };\n      ensureIdsExist(next, matches);\n      saveOrder(userId, next);\n      return next;\n    });\n  }, [matches, userId]);\n\n  const applyDrop = React.useCallback(\n    (payload: BoardDragPayload, toStatus: BoardColumnKey, toIndex: number) => {\n      if (!userId) return;\n\n      setOrderByStatus((prev) => {\n        const next: BoardOrderByStatus = { ...prev };\n\n        const fromArr = [...(next[payload.fromStatus] ?? [])];\n        const toArr = payload.fromStatus === toStatus ? fromArr : [...(next[toStatus] ?? [])];\n\n        const currentFromIndex = fromArr.indexOf(payload.matchId);\n        if (currentFromIndex !== -1) fromArr.splice(currentFromIndex, 1);\n\n        const safeIndex = Math.max(0, Math.min(toIndex, toArr.length));\n        toArr.splice(safeIndex, 0, payload.matchId);\n\n        next[payload.fromStatus] = payload.fromStatus === toStatus ? toArr : fromArr;\n        next[toStatus] = toArr;\n\n        saveOrder(userId, next);\n        return next;\n      });\n    },\n    [userId],\n  );\n\n  return { orderByStatus, applyDrop };\n}\n","import { BOARD_COLUMNS_LIST, getBoardColumn, type BoardColumnKey } from \"src/entities/application/model/status\";\nimport type { LoopMatch } from \"src/entities/loopMatch\";\n\n\nexport function groupMatchesByStatus(\n  matches: readonly LoopMatch[],\n): Map<BoardColumnKey, LoopMatch[]> {\n  const map = new Map<BoardColumnKey, LoopMatch[]>();\n\n  for (const s of BOARD_COLUMNS_LIST) {\n    map.set(s.key, []);\n  }\n\n  for (const match of matches) {\n    const col = getBoardColumn(match.status);\n    (map.get(col) ?? []).push(match);\n  }\n\n  return map;\n}\n","import { useDroppable } from \"@dnd-kit/core\";\nimport React from \"react\";\n\nimport type { BoardColumnKey } from \"src/entities/application/model/status\";\nimport { classNames } from \"src/shared/lib\";\n\n\ntype Props = Readonly<{\n  status: BoardColumnKey;\n  children: React.ReactNode;\n}>;\n\nexport function BoardLane({ status, children }: Props) {\n  const droppableId = `lane:${status}`;\n\n  const { setNodeRef, isOver } = useDroppable({\n    id: droppableId,\n  });\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={classNames(\n        \"flex-1 min-h-0\",\n        // Important: when a lane is empty, the content height may collapse and the drop-zone becomes\n        // too small to hit. Keep a reasonable minimum height so dropping into empty columns works.\n        \"min-h-[180px]\",\n        \"rounded-xl border border-border bg-muted/40\",\n        \"p-sm md:p-md\",\n        \"overflow-y-auto overflow-x-hidden\",\n        isOver && \"bg-muted ring-2 ring-primary/40\",\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n","import { Trash2 } from \"lucide-react\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  MatchDetailsModal,\n  formatMatchedAt,\n  normalizePlatform,\n  type LoopMatch,\n} from \"src/entities/loopMatch\";\nimport { classNames } from \"src/shared/lib\";\nimport { Card } from \"src/shared/ui\";\n\nexport type BoardMatchCardViewProps = Readonly<{\n  match: LoopMatch;\n  loopName: string;\n  busy: boolean;\n  onDelete: (matchId: LoopMatch[\"id\"]) => void | Promise<void>;\n  overlay?: boolean;\n}>;\n\nexport function BoardMatchCardView({\n  match,\n  loopName,\n  busy,\n  onDelete,\n  overlay = false,\n}: BoardMatchCardViewProps) {\n  const { t } = useTranslation();\n  const [open, setOpen] = React.useState(false);\n\n  const onQuickDelete = React.useCallback(\n    (e: React.SyntheticEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      if (busy || overlay) return;\n\n      const ok = window.confirm(\n        t(\"board.deleteConfirm\", \"Delete this job from the board?\"),\n      );\n      if (!ok) return;\n\n      Promise.resolve(onDelete(match.id)).catch(() => {});\n    },\n    [busy, overlay, onDelete, match.id, t],\n  );\n\n  const title = React.useMemo(\n    () => String(match.title ?? \"\").trim() || \"—\",\n    [match.title],\n  );\n  const company = React.useMemo(\n    () => String(match.company ?? \"\").trim() || \"—\",\n    [match.company],\n  );\n  const matchedAt = React.useMemo(\n    () => formatMatchedAt(match.matchedAt),\n    [match.matchedAt],\n  );\n\n  const platform = React.useMemo(() => {\n    const p = normalizePlatform(match.platform);\n    return p ? p.toUpperCase() : \"\";\n  }, [match.platform]);\n\n  const meta = React.useMemo(() => {\n    const parts = [match.location, platform, matchedAt, loopName]\n      .map((v) => String(v ?? \"\").trim())\n      .filter(Boolean);\n    return parts.join(\" • \");\n  }, [match.location, matchedAt, loopName, platform]);\n\n  const url = React.useMemo(() => String(match.url ?? \"\").trim(), [match.url]);\n  const hasUrl = Boolean(url);\n\n  const onOpen = React.useCallback(() => {\n    if (!busy && !overlay) setOpen(true);\n  }, [busy, overlay]);\n  let cursorClass: string;\n\n  if (overlay) {\n    cursorClass = \"cursor-grabbing\";\n  } else if (busy) {\n    cursorClass = \"opacity-60 cursor-not-allowed\";\n  } else {\n    cursorClass = \"cursor-pointer md:cursor-grab\";\n  }\n\n  return (\n    <>\n      <div\n        role=\"button\"\n        tabIndex={0}\n        onClick={onOpen}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" || e.key === \" \") onOpen();\n        }}\n        className={classNames(\n          \"rounded-xl outline-none\",\n          cursorClass,\n          \"focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n        )}\n      >\n        <Card\n          variant=\"default\"\n          padding=\"md\"\n          shadow=\"sm\"\n          interactive={!overlay}\n          className={classNames(\n            \"relative flex flex-col gap-sm\",\n            \"transition-[box-shadow,transform] duration-fast ease-ease-out\",\n            !busy && !overlay && \"hover:shadow-md hover:-translate-y-[1px]\",\n            overlay && \"shadow-lg\",\n          )}\n        >\n          {!overlay ? (\n            <button\n              type=\"button\"\n              aria-label={t(\"board.delete\", \"Delete\")}\n              title={t(\"board.delete\", \"Delete\")}\n              disabled={busy}\n              className={classNames(\n                \"absolute right-2 top-2\",\n                \"inline-flex h-10 w-10 md:h-8 md:w-8 items-center justify-center rounded-full\",\n                \"border border-border bg-card text-muted-foreground\",\n                \"shadow-sm\",\n                \"hover:bg-muted hover:text-foreground\",\n                \"disabled:opacity-50 disabled:cursor-not-allowed\",\n                \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n              )}\n              onPointerDown={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n              }}\n              onClick={onQuickDelete}\n            >\n              <Trash2 className=\"h-5 w-5 md:h-4 md:w-4\" />\n            </button>\n          ) : null}\n\n          <div className=\"min-w-0\">\n            <div className=\"min-w-0 whitespace-nowrap overflow-hidden text-ellipsis text-sm\">\n              <span className=\"font-semibold text-foreground\">{title}</span>\n              <span className=\"ml-2 text-muted-foreground\">{company}</span>\n            </div>\n\n            {meta ? (\n              <div className=\"mt-1 text-xs text-muted-foreground whitespace-nowrap overflow-hidden text-ellipsis\">\n                {meta}\n              </div>\n            ) : null}\n          </div>\n\n          {hasUrl ? (\n            <div className=\"pt-2\">\n              <a\n                href={url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-xs text-primary underline hover:no-underline\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                {t(\"board.openLink\", \"Open link\")}\n              </a>\n            </div>\n          ) : null}\n        </Card>\n      </div>\n\n      {!overlay ? (\n        <MatchDetailsModal\n          open={open}\n          onOpenChange={setOpen}\n          match={match}\n          loopName={loopName}\n          busy={busy}\n          onDelete={(id) => {\n            Promise.resolve(onDelete(id)).catch(() => {});\n          }}\n        />\n      ) : null}\n    </>\n  );\n}\n","import { useSortable } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport React from \"react\";\n\nimport type { LoopMatch } from \"src/entities/loopMatch\";\nimport { classNames } from \"src/shared/lib\";\n\nimport { BoardMatchCardView } from \"./BoardMatchCardView\";\n\ntype Props = Readonly<{\n  match: LoopMatch;\n  loopName: string;\n  busy: boolean;\n  onDelete: (matchId: LoopMatch[\"id\"]) => void | Promise<void>;\n  index: number;\n  overlay?: boolean;\n}>;\n\nexport function BoardMatchCard({ match, loopName, busy, onDelete, index }: Props) {\n  const { setNodeRef, attributes, listeners, transform, transition, isDragging } =\n    useSortable({\n      id: match.id,\n      disabled: busy,\n      data: {\n        matchId: match.id,\n        status: match.status,\n        index,\n      },\n    });\n\n  const style: React.CSSProperties = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.25 : 1,\n  };\n\n  return (\n    <div\n      ref={setNodeRef}\n      style={style}\n      // Mobile: keep vertical scroll usable while still allowing drag after long-press.\n      className={classNames(\n        \"select-none touch-pan-y touch-manipulation md:touch-none\",\n        isDragging && \"z-10\",\n      )}\n      {...attributes}\n      {...listeners}\n    >\n      <BoardMatchCardView\n        match={match}\n        loopName={loopName}\n        busy={busy}\n        onDelete={onDelete}\n        overlay={false}\n      />\n    </div>\n  );\n}\n\n\nexport function BoardMatchCardOverlay({\n  match,\n  loopName,\n  busy,\n  onDelete,\n}: Omit<Props, \"index\">) {\n  return (\n    <div className=\"rotate-[1deg]\">\n      <BoardMatchCardView\n        match={match}\n        loopName={loopName}\n        busy={busy}\n        onDelete={onDelete}\n        overlay\n      />\n    </div>\n  );\n}\n","import { SortableContext, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport type { BoardColumnKey } from \"src/entities/application/model/status\";\nimport type { LoopMatch } from \"src/entities/loopMatch\";\nimport { Card } from \"src/shared/ui\";\n\nimport { BoardLane } from \"./BoardLane\";\nimport { BoardMatchCard } from \"./BoardMatchCard\";\n\ntype Props = Readonly<{\n  status: BoardColumnKey;\n  title: string;\n  matches: readonly LoopMatch[];\n  loopIdToName: ReadonlyMap<string, string>;\n  busy: boolean;\n  onDelete: (matchId: string) => void | Promise<void>;\n}>;\n\nexport function BoardColumn({\n  status,\n  title,\n  matches,\n  loopIdToName,\n  busy,\n  onDelete,\n}: Props) {\n  const { t } = useTranslation();\n\n  const itemIds = React.useMemo(() => matches.map((m) => m.id), [matches]);\n\n  return (\n    <div className=\"w-[calc(100vw-2rem)] md:w-[320px] shrink-0 h-full min-h-0 flex flex-col\">\n      <Card\n        variant=\"subtle\"\n        padding=\"md\"\n        shadow=\"none\"\n        className=\"shrink-0 mb-sm md:mb-md\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm font-semibold text-foreground\">{title}</div>\n          <div className=\"text-xs text-muted-foreground\">{matches.length}</div>\n        </div>\n      </Card>\n\n      <BoardLane status={status}>\n        <SortableContext\n          id={status}                 \n          items={itemIds}\n          strategy={verticalListSortingStrategy}\n        >\n          <div className=\"flex flex-col gap-sm md:gap-md\">\n            {matches.map((m, i) => (\n              <BoardMatchCard\n                key={m.id}\n                match={m}\n                loopName={loopIdToName.get(m.loopId) ?? \"\"}\n                busy={busy}\n                onDelete={onDelete}\n                index={i}\n              />\n            ))}\n          </div>\n        </SortableContext>\n\n        {matches.length === 0 ? (\n          <div className=\"pt-md text-xs text-muted-foreground\">\n            {t(\"board.dropHere\", \"Drop matches here.\")}\n          </div>\n        ) : null}\n      </BoardLane>\n    </div>\n  );\n}\n","import { BOARD_COLUMNS_LIST, type BoardColumnKey } from \"src/entities/application/model/status\";\nimport type { LoopMatch } from \"src/entities/loopMatch\";\n\nimport type { BoardVM } from \"../../model/types\";\n\nexport type ColumnsState = Map<BoardColumnKey, LoopMatch[]>;\n\nexport function cloneColumns(src: ColumnsState): ColumnsState {\n  const m = new Map<BoardColumnKey, LoopMatch[]>();\n  for (const [k, v] of src.entries()) m.set(k, [...v]);\n  return m;\n}\n\nexport function buildColumnsFromVm(vm: BoardVM): ColumnsState {\n  const m = new Map<BoardColumnKey, LoopMatch[]>();\n  for (const c of BOARD_COLUMNS_LIST) {\n    m.set(c.key, [...(vm.data.byStatus.get(c.key) ?? [])]);\n  }\n  return m;\n}\n\nexport function findContainerOfId(\n  state: ColumnsState,\n  matchId: string,\n): BoardColumnKey | null {\n  for (const [status, list] of state.entries()) {\n    if (list.some((x) => x.id === matchId)) return status;\n  }\n  return null;\n}\n\nexport function removeFromList(\n  list: LoopMatch[],\n  id: string,\n): { next: LoopMatch[]; item: LoopMatch | null } {\n  const idx = list.findIndex((x) => x.id === id);\n  if (idx === -1) return { next: list, item: null };\n  const item = list[idx];\n  const next = [...list.slice(0, idx), ...list.slice(idx + 1)];\n  return { next, item };\n}\n\nexport function insertIntoList(\n  list: LoopMatch[],\n  item: LoopMatch,\n  index: number,\n): LoopMatch[] {\n  const i = Math.max(0, Math.min(index, list.length));\n  return [...list.slice(0, i), item, ...list.slice(i)];\n}\n\nexport function getLaneStatusFromOverId(\n  overId: string,\n): BoardColumnKey | null {\n\n  if (overId.startsWith(\"lane:\")) return overId.slice(5) as BoardColumnKey;\n  if (overId.startsWith(\"lane-tab:\")) return overId.slice(9) as BoardColumnKey;\n  return null;\n}\n","import { DndContext, DragOverlay, closestCorners, useDroppable } from \"@dnd-kit/core\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { BOARD_COLUMNS_LIST, type BoardColumnKey } from \"src/entities/application/model/status\";\n\nimport type { BoardVM } from \"../model/types\";\n\nimport { BoardColumn } from \"./BoardColumn\";\nimport { useBoardColumnsDnd } from \"./boardColumns/useBoardColumnsDnd\";\nimport { BoardMatchCardOverlay } from \"./BoardMatchCard\";\n\nfunction StatusTabTarget({\n  status,\n  label,\n  isActive,\n  onClick,\n}: {\n  status: BoardColumnKey;\n  label: string;\n  isActive: boolean;\n  onClick: () => void;\n}) {\n  const droppableId = `lane-tab:${status}`;\n  const { setNodeRef, isOver } = useDroppable({ id: droppableId });\n\n  return (\n    <button\n      ref={setNodeRef}\n      type=\"button\"\n      onClick={onClick}\n      className={\n        [\n          \"shrink-0 rounded-full px-md py-sm text-sm\",\n          \"border border-border\",\n          \"transition\",\n          isActive ? \"bg-foreground text-background\" : \"bg-background text-foreground\",\n          isOver ? \"ring-2 ring-primary/40\" : \"\",\n        ].join(\" \")\n      }\n    >\n      {label}\n    </button>\n  );\n}\n\nexport function BoardColumns({ vm }: { vm: BoardVM }) {\n  const { t } = useTranslation();\n\n  const statuses = React.useMemo(\n    () =>\n      BOARD_COLUMNS_LIST.map((c) => ({\n        status: c.key,\n        title: t(c.labelKey, { defaultValue: c.key }),\n      })),\n    [t],\n  );\n\n  const [activeStatus, setActiveStatus] = React.useState<BoardColumnKey>(\n    (statuses[0]?.status ?? \"ACTIVE\") as BoardColumnKey,\n  );\n\n  const scrollerRef = React.useRef<HTMLDivElement | null>(null);\n  const colRefs = React.useRef<Record<string, HTMLDivElement | null>>({});\n  const setColRef = React.useCallback(\n    (status: BoardColumnKey) => (el: HTMLDivElement | null) => {\n      colRefs.current[status] = el;\n    },\n    [],\n  );\n\n  const scrollToStatus = React.useCallback((status: BoardColumnKey) => {\n    const el = colRefs.current[status];\n    if (!el) return;\n    el.scrollIntoView({ behavior: \"smooth\", inline: \"start\", block: \"nearest\" });\n  }, []);\n\n  const rafRef = React.useRef<number | null>(null);\n  const handleScrollerScroll = React.useCallback(() => {\n    if (rafRef.current) return;\n    rafRef.current = window.requestAnimationFrame(() => {\n      rafRef.current = null;\n      const scroller = scrollerRef.current;\n      if (!scroller) return;\n\n      // Find nearest column start relative to current scroll.\n      const left = scroller.scrollLeft;\n      let bestStatus: BoardColumnKey = activeStatus;\n      let bestDist = Number.POSITIVE_INFINITY;\n      for (const { status } of statuses) {\n        const el = colRefs.current[status];\n        if (!el) continue;\n        const dist = Math.abs(el.offsetLeft - left);\n        if (dist < bestDist) {\n          bestDist = dist;\n          bestStatus = status;\n        }\n      }\n\n      if (bestStatus && bestStatus !== activeStatus) setActiveStatus(bestStatus);\n    });\n  }, [activeStatus, statuses]);\n\n  React.useEffect(() => {\n    return () => {\n      if (rafRef.current) window.cancelAnimationFrame(rafRef.current);\n    };\n  }, []);\n\n  const {\n    sensors,\n    columnsState,\n    activeMatch,\n    activeLoopName,\n    handleDragStart,\n    handleDragOver,\n    handleDragEnd,\n  } = useBoardColumnsDnd(vm);\n\n  return (\n    <DndContext\n      sensors={sensors}\n      collisionDetection={closestCorners}\n      onDragStart={handleDragStart}\n      onDragOver={handleDragOver}\n      onDragEnd={handleDragEnd}\n    >\n      <div className=\"h-full min-h-0 flex flex-col overflow-hidden\">\n        {/* Mobile: status tabs (also act as drop targets while dragging) */}\n        <div className=\"md:hidden shrink-0 px-md pb-sm\">\n          <div className=\"flex gap-sm overflow-x-auto no-scrollbar py-sm\">\n            {statuses.map(({ status, title }) => (\n              <StatusTabTarget\n                key={status}\n                status={status}\n                label={title}\n                isActive={activeStatus === status}\n                onClick={() => {\n                  setActiveStatus(status);\n                  scrollToStatus(status);\n                }}\n              />\n            ))}\n          </div>\n        </div>\n\n        {/* Columns scroller */}\n        <div\n          ref={scrollerRef}\n          onScroll={handleScrollerScroll}\n          className={\n            [\n              \"flex-1 min-h-0\",\n              \"overflow-x-auto overflow-y-hidden\",\n              // Mobile: Trello-like paging between columns\n              \"md:overflow-x-auto\",\n              \"snap-x snap-mandatory md:snap-none\",\n            ].join(\" \")\n          }\n        >\n          <div className=\"h-full min-h-0 flex items-stretch gap-md min-w-max px-md md:px-0\">\n            {statuses.map(({ status, title }) => {\n              const matches = columnsState.get(status) ?? [];\n              return (\n                <div\n                  key={status}\n                  ref={setColRef(status)}\n                  className=\"snap-start h-full\"\n                >\n                  <BoardColumn\n                    status={status}\n                    title={title}\n                    matches={matches}\n                    loopIdToName={vm.data.loopIdToName}\n                    busy={vm.busy}\n                    onDelete={vm.actions.onDelete}\n                  />\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      <DragOverlay adjustScale={false}>\n        {activeMatch ? (\n          <div className=\"w-[min(90vw,320px)]\">\n            <BoardMatchCardOverlay\n              match={activeMatch}\n              loopName={activeLoopName}\n              busy={vm.busy}\n              onDelete={vm.actions.onDelete}\n            />\n          </div>\n        ) : null}\n      </DragOverlay>\n    </DndContext>\n  );\n}\n","import {\n  PointerSensor,\n  TouchSensor,\n  useSensor,\n  useSensors,\n  type DragEndEvent,\n  type DragOverEvent,\n  type DragStartEvent,\n} from \"@dnd-kit/core\";\nimport React from \"react\";\n\nimport { getBoardColumn, type BoardColumnKey } from \"src/entities/application/model/status\";\nimport type { LoopMatch } from \"src/entities/loopMatch\";\n\nimport type { BoardDragPayload, BoardVM } from \"../../model/types\";\n\nimport {\n  buildColumnsFromVm,\n  cloneColumns,\n  findContainerOfId,\n  getLaneStatusFromOverId,\n  insertIntoList,\n  removeFromList,\n  type ColumnsState,\n} from \"./columnsState\";\n\nexport type UseBoardColumnsDndResult = Readonly<{\n  sensors: ReturnType<typeof useSensors>;\n  columnsState: ColumnsState;\n  activeId: string | null;\n  activeMatch: LoopMatch | null;\n  activeLoopName: string;\n  handleDragStart: (e: DragStartEvent) => void;\n  handleDragOver: (e: DragOverEvent) => void;\n  handleDragEnd: (e: DragEndEvent) => Promise<void>;\n}>;\n\nexport function useBoardColumnsDnd(vm: BoardVM): UseBoardColumnsDndResult {\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: { distance: 6 },\n    }),\n    // Mobile: allow normal scrolling; start drag only after a short long-press.\n    useSensor(TouchSensor, {\n      activationConstraint: { delay: 220, tolerance: 6 },\n    }),\n  );\n\n  const [columnsState, setColumnsState] = React.useState<ColumnsState>(() =>\n    buildColumnsFromVm(vm),\n  );\n  const [activeId, setActiveId] = React.useState<string | null>(null);\n\n\n  const pendingDropRef = React.useRef<\n    | {\n        matchId: string;\n        toStatus: BoardColumnKey;\n        toIndex: number;\n      }\n    | null\n  >(null);\n\n  React.useEffect(() => {\n    if (activeId) return;\n\n    const pending = pendingDropRef.current;\n    if (pending) {\n      const list = vm.data.byStatus.get(pending.toStatus) ?? [];\n      const idx = list.findIndex((x) => x.id === pending.matchId);\n\n      const isAtTargetIndex =\n        idx === pending.toIndex ||\n        (pending.toIndex >= list.length && idx === list.length - 1);\n\n      if (idx === -1 || !isAtTargetIndex) return;\n      pendingDropRef.current = null;\n    }\n\n    setColumnsState(buildColumnsFromVm(vm));\n  }, [vm.data.byStatus, vm.data.matches, activeId, vm]);\n\n  const activeMatch = React.useMemo(() => {\n    if (!activeId) return null;\n    for (const list of columnsState.values()) {\n      const found = list.find((m) => m.id === activeId);\n      if (found) return found;\n    }\n    return null;\n  }, [activeId, columnsState]);\n\n  const activeLoopName = React.useMemo(() => {\n    if (!activeMatch) return \"\";\n    return vm.data.loopIdToName.get(activeMatch.loopId) ?? \"\";\n  }, [activeMatch, vm.data.loopIdToName]);\n\n  const dragFromRef = React.useRef<BoardDragPayload | null>(null);\n\n  const handleDragStart = React.useCallback(\n    (e: DragStartEvent) => {\n      const id = String(e.active.id);\n      setActiveId(id);\n\n      const fromStatus: BoardColumnKey | undefined =\n        (findContainerOfId(columnsState, id) as BoardColumnKey | null) ??\n        (activeMatch ? getBoardColumn(activeMatch.status) : undefined);\n      const fromIndex = fromStatus\n        ? columnsState.get(fromStatus)?.findIndex((x) => x.id === id) ?? 0\n        : 0;\n\n      if (fromStatus) {\n        dragFromRef.current = { matchId: id, fromStatus, fromIndex };\n      } else {\n        dragFromRef.current = null;\n      }\n    },\n    [columnsState, activeMatch],\n  );\n\n  const handleDragOver = React.useCallback((e: DragOverEvent) => {\n    const { active, over } = e;\n    if (!over) return;\n\n    const activeIdStr = String(active.id);\n    const overIdStr = String(over.id);\n\n    const isBelowOverItem =\n      !!active.rect.current.translated &&\n      active.rect.current.translated.top > over.rect.top + over.rect.height / 2;\n    const overIndexModifier = isBelowOverItem ? 1 : 0;\n\n    setColumnsState((prev) => {\n      const next = cloneColumns(prev);\n\n      const fromStatus = findContainerOfId(next, activeIdStr);\n      if (!fromStatus) return prev;\n\n      const overLaneStatus = getLaneStatusFromOverId(overIdStr);\n      const overSortable = over.data.current?.sortable as\n        | { containerId: string; index: number }\n        | undefined;\n\n      const toStatus =\n        (overSortable?.containerId as BoardColumnKey | undefined) ??\n        (overLaneStatus ??\n          (findContainerOfId(next, overIdStr) as BoardColumnKey | null));\n\n      if (!toStatus) return prev;\n\n      const fromList = next.get(fromStatus) ?? [];\n      const toList = next.get(toStatus) ?? [];\n\n      const overIndexInTo =\n        typeof overSortable?.index === \"number\"\n          ? overSortable.index + overIndexModifier\n          : toList.length;\n\n      if (fromStatus === toStatus) {\n        const oldIndex = fromList.findIndex((x) => x.id === activeIdStr);\n        if (oldIndex === -1) return prev;\n\n        let newIndex = overIndexInTo;\n        if (newIndex > oldIndex) newIndex -= 1;\n\n        if (oldIndex === newIndex) return prev;\n\n        const { next: removed, item } = removeFromList(fromList, activeIdStr);\n        if (!item) return prev;\n\n        next.set(fromStatus, insertIntoList(removed, item, newIndex));\n        return next;\n      }\n\n      const { next: removedFrom, item } = removeFromList(fromList, activeIdStr);\n      if (!item) return prev;\n\n      next.set(fromStatus, removedFrom);\n      next.set(toStatus, insertIntoList(toList, item, overIndexInTo));\n      return next;\n    });\n  }, []);\n\n  const handleDragEnd = React.useCallback(\n    async (e: DragEndEvent) => {\n      const { active, over } = e;\n\n      const from = dragFromRef.current;\n      dragFromRef.current = null;\n      setActiveId(null);\n\n      if (!from) return;\n      if (!over) {\n        setColumnsState(buildColumnsFromVm(vm));\n        return;\n      }\n\n      const activeIdStr = String(active.id);\n\n      const toStatus = findContainerOfId(columnsState, activeIdStr);\n      if (!toStatus) {\n        setColumnsState(buildColumnsFromVm(vm));\n        return;\n      }\n\n      const toList = columnsState.get(toStatus) ?? [];\n      const toIndex = toList.findIndex((x) => x.id === activeIdStr);\n\n      pendingDropRef.current = {\n        matchId: activeIdStr,\n        toStatus,\n        toIndex: Math.max(0, toIndex),\n      };\n\n      try {\n        await vm.actions.onDropToStatus(\n          {\n            matchId: activeIdStr,\n            fromStatus: from.fromStatus,\n            fromIndex: from.fromIndex,\n          },\n          toStatus,\n          Math.max(0, toIndex),\n        );\n      } catch {\n        pendingDropRef.current = null;\n        setColumnsState(buildColumnsFromVm(vm));\n      }\n    },\n    [columnsState, vm],\n  );\n\n  return {\n    sensors,\n    columnsState,\n    activeId,\n    activeMatch,\n    activeLoopName,\n    handleDragStart,\n    handleDragOver,\n    handleDragEnd,\n  };\n}\n","import type { ReactNode } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { getErrorMessage } from \"src/shared/lib\";\nimport { PageMessage } from \"src/shared/ui\";\n\nimport type { BoardMatchesQueryState } from \"../model/types\";\n\ntype Props = Readonly<{\n  matchesQ: BoardMatchesQueryState;\n  isEmpty: boolean;\n  children: ReactNode;\n}>;\n\nexport function BoardState({ matchesQ, isEmpty, children }: Props) {\n  const { t } = useTranslation();\n\n  if (matchesQ.isLoading) {\n    return <PageMessage>{t(\"board.loading\", \"Loading matches…\")}</PageMessage>;\n  }\n\n  if (matchesQ.isError) {\n    return <PageMessage>{getErrorMessage(matchesQ.error)}</PageMessage>;\n  }\n\n  if (isEmpty) {\n    return <PageMessage>{t(\"board.empty\", \"No matches yet.\")}</PageMessage>;\n  }\n\n  return <>{children}</>;\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { PageHeader } from \"src/shared/ui\";\n\nimport { useBoardController } from \"./model/useBoardController\";\nimport { BoardColumns } from \"./ui/BoardColumns\";\nimport { BoardState } from \"./ui/BoardState\";\n\nexport default function BoardPage() {\n  const vm = useBoardController();\n  const { t } = useTranslation();\n\n  const matchesQ = vm.queries.matchesQ;\n  const isEmpty = vm.data.matches.length === 0;\n\n  const title = t(\"board.title\", \"Board\");\n  const subtitle = t(\"board.subtitle\", \"Drag matches between columns to update status.\");\n\n  return (\n    <div className=\"h-full min-h-0 flex flex-col overflow-hidden\">\n      <PageHeader title={title} subtitle={subtitle} />\n\n      <div className=\"flex-1 min-h-0 overflow-hidden\">\n        <BoardState matchesQ={matchesQ} isEmpty={isEmpty}>\n          <BoardColumns vm={vm} />\n        </BoardState>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { getStatusMeta, type StatusKey } from \"../../model/status\";\n\nfunction humanizeKey(k: string): string {\n  return k\n    .split(\"_\")\n    .map((p) => (p ? p[0].toUpperCase() + p.slice(1).toLowerCase() : p))\n    .join(\" \");\n}\n\nexport type StatusLabelProps = {\n  status: StatusKey;\n  fallback?: string;\n};\n\nexport function StatusLabel({ status, fallback }: StatusLabelProps) {\n  const { t } = useTranslation();\n  const meta = getStatusMeta(status);\n  const fb = fallback ?? humanizeKey(meta.key);\n  return <>{t(meta.labelKey, { defaultValue: fb })}</>;\n}\n","import React from \"react\";\n\nimport { getStageColorForStatus, STATUS_COLOR_DOT_CLASS, type StatusKey } from \"../../model/status\";\n\nfunction clsx(...xs: Array<string | false | null | undefined>) {\n  return xs.filter(Boolean).join(\" \");\n}\n\nexport type StatusDotProps = {\n  status: StatusKey;\n  className?: string;\n  size?: \"xs\" | \"sm\" | \"md\";\n};\n\nconst SIZE_CLASS: Record<NonNullable<StatusDotProps[\"size\"]>, string> = {\n  xs: \"h-1.5 w-1.5\",\n  sm: \"h-2 w-2\",\n  md: \"h-2.5 w-2.5\",\n};\n\nexport function StatusDot({ status, className, size = \"sm\" }: StatusDotProps) {\n  const color = getStageColorForStatus(status);\n  return (\n    <span\n      aria-hidden\n      className={clsx(\"inline-block rounded-full\", SIZE_CLASS[size], STATUS_COLOR_DOT_CLASS[color], className)}\n    />\n  );\n}\n","import React, { useMemo } from \"react\";\n\nimport { STATUS_KEYS, statusesForStage, type Stage, type StatusKey } from \"../../model/status\";\n\nimport { StatusLabel } from \"./StatusLabel\";\n\nfunction clsx(...xs: Array<string | false | null | undefined>) {\n  return xs.filter(Boolean).join(\" \");\n}\n\nexport type StatusMenuProps = {\n  value: StatusKey;\n  onChange: (next: StatusKey) => void;\n  disabled?: boolean;\n  stage?: Stage;\n  options?: readonly StatusKey[];\n  className?: string;\n  size?: \"sm\" | \"md\";\n};\n\nconst SIZE_CLASS: Record<NonNullable<StatusMenuProps[\"size\"]>, string> = {\n  sm: \"h-9 px-sm text-sm\",\n  md: \"h-10 px-md text-sm\",\n};\n\nexport function StatusMenu({\n  value,\n  onChange,\n  disabled = false,\n  stage,\n  options,\n  className,\n  size = \"sm\",\n}: StatusMenuProps) {\n  const items = useMemo<readonly StatusKey[]>(() => {\n    if (options?.length) return options;\n    if (stage) return statusesForStage(stage).map((m) => m.key);\n    return STATUS_KEYS;\n  }, [options, stage]);\n\n  return (\n    <select\n      value={value}\n      disabled={disabled}\n      onChange={(e) => onChange(e.target.value as StatusKey)}\n      className={clsx(\n        \"rounded-full border border-border bg-card text-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n        SIZE_CLASS[size],\n        className,\n      )}\n    >\n      {items.map((k) => (\n        <option key={k} value={k}>\n          <StatusLabel status={k} />\n        </option>\n      ))}\n    </select>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { getStatusMeta, getStageColorForStatus, STATUS_COLOR_CLASS, type StatusKey } from \"../../model/status\";\n\nfunction clsx(...xs: Array<string | false | null | undefined>) {\n  return xs.filter(Boolean).join(\" \");\n}\n\ntype Props = {\n  status: StatusKey;\n  className?: string;\n};\n\nexport function StatusBadge({ status, className }: Props) {\n  const { t } = useTranslation();\n  const meta = getStatusMeta(status);\n\n  return (\n    <span\n      className={clsx(\n        \"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium\",\n        STATUS_COLOR_CLASS[getStageColorForStatus(status)],\n        className\n      )}\n    >\n      {t(meta.labelKey)}\n    </span>\n  );\n}","import type { LoopPlatform } from \"src/entities/loop/model\";\nimport { PLATFORM_REGISTRY } from \"src/entities/loop/model/platformRegistry\";\n\nconst knownPlatforms = new Set<string>(PLATFORM_REGISTRY.map((p) => p.id));\n\nexport function normalizePlatform(p: unknown): LoopPlatform | \"\" {\n  if (typeof p !== \"string\") return \"\";\n  const v = p.trim().toLowerCase();\n  if (!v) return \"\";\n  if (!knownPlatforms.has(v)) return \"\";\n  return v as LoopPlatform;\n}\n\nexport function formatMatchedAt(iso: string): string {\n  if (!iso) return \"\";\n  const d = new Date(iso);\n  if (Number.isNaN(d.getTime())) return iso;\n\n  const yyyy = String(d.getFullYear());\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n\n  return `${dd}.${mm}.${yyyy}`;\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { StatusBadge } from \"src/entities/application/ui/StatusBadge/StatusBadge\";\nimport { StatusMenu } from \"src/entities/application/ui/StatusKit\";\nimport { Button, Card } from \"src/shared/ui\";\n\nimport type { LoopMatch, LoopMatchStatus } from \"../../model/types\";\n\nimport { formatMatchedAt, normalizePlatform } from \"./matchFormat\";\n\ntype MatchCardProps = {\n  match: LoopMatch;\n  loopName: string;\n  busy: boolean;\n  onUpdateStatus: (matchId: LoopMatch[\"id\"], status: LoopMatchStatus) => void;\n  onDelete: (matchId: LoopMatch[\"id\"]) => void;\n  onEdit?: (matchId: LoopMatch[\"id\"]) => void;\n};\n\nexport function MatchCard({\n  match,\n  loopName,\n  busy,\n  onUpdateStatus,\n  onDelete,\n  onEdit,\n}: MatchCardProps) {\n  const { t } = useTranslation();\n\n  const matchedAt = React.useMemo(\n    () => formatMatchedAt(match.matchedAt),\n    [match.matchedAt],\n  );\n\n  const platform = React.useMemo(() => {\n    const p = normalizePlatform(match.platform);\n    return p ? p.toUpperCase() : \"\";\n  }, [match.platform]);\n\n  const meta = React.useMemo(() => {\n    const parts = [match.location, platform, matchedAt, loopName]\n      .map((v) => String(v ?? \"\").trim())\n      .filter(Boolean);\n    return parts.join(\" • \");\n  }, [match.location, platform, matchedAt, loopName]);\n\n  return (\n    <Card variant=\"default\" padding=\"md\" shadow=\"sm\" className=\"flex flex-col gap-sm\">\n      <div className=\"flex items-start justify-between gap-md\">\n        <div className=\"min-w-0\">\n          <div className=\"min-w-0 whitespace-nowrap overflow-hidden text-ellipsis text-sm\">\n            <span className=\"font-semibold text-foreground\">{match.title || \"—\"}</span>\n            <span className=\"ml-2 text-muted-foreground\">{match.company || \"—\"}</span>\n          </div>\n\n          {meta ? (\n            <div className=\"mt-1 text-xs text-muted-foreground whitespace-nowrap overflow-hidden text-ellipsis\">\n              {meta}\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"flex items-center gap-sm\">\n          <StatusPill value={match.status} />\n        </div>\n      </div>\n\n      <div className=\"flex flex-wrap items-center justify-between gap-sm pt-xs\">\n        <label className=\"flex items-center gap-sm text-sm\">\n          <span className=\"text-muted-foreground\">{t(\"matches.common.status\")}</span>\n          <StatusMenu\n              value={match.status}\n              disabled={busy}\n              onChange={(s) => onUpdateStatus(match.id, s as LoopMatchStatus)}\n              size=\"sm\"\n            />\n        </label>\n\n        <div className=\"flex items-center gap-sm\">\n          {onEdit ? (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              shape=\"pill\"\n              disabled={busy}\n              onClick={() => onEdit(match.id)}\n            >\n              {t(\"matches.common.edit\")}\n            </Button>\n          ) : null}\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            shape=\"pill\"\n            disabled={busy}\n            onClick={() => onDelete(match.id)}\n          >\n            {t(\"matches.common.delete\")}\n          </Button>\n        </div>\n      </div>\n    </Card>\n  );\n}\n\ntype StatusPillProps = {\n  value: LoopMatchStatus;\n};\n\nfunction StatusPill({ value }: StatusPillProps) {\n  return <StatusBadge status={value} />;\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { StatusLabel, StatusMenu } from \"src/entities/application/ui/StatusKit\";\nimport { classNames } from \"src/shared/lib\";\nimport { Button, Modal } from \"src/shared/ui\";\n\nimport type { LoopMatch, LoopMatchStatus } from \"../../model/types\";\n\nimport { formatMatchedAt, normalizePlatform } from \"./matchFormat\";\n\ntype Props = Readonly<{\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n\n  match: LoopMatch;\n  loopName: string;\n\n  busy: boolean;\n\n  onDelete: (matchId: string) => void;\n  onUpdateStatus?: (matchId: string, status: LoopMatchStatus) => void;\n  onEdit?: (matchId: string) => void;\n}>;\n\nexport function MatchDetailsModal({\n  open,\n  onOpenChange,\n  match,\n  loopName,\n  busy,\n  onDelete,\n  onUpdateStatus,\n  onEdit,\n}: Props) {\n  const { t } = useTranslation();\n  const matchedAt = React.useMemo(() => formatMatchedAt(match.matchedAt), [match.matchedAt]);\n\n  const platform = React.useMemo(() => {\n    const p = normalizePlatform(match.platform);\n    return p ? p.toUpperCase() : \"\";\n  }, [match.platform]);\n\n  const meta = React.useMemo(() => {\n    const parts = [match.location, platform, matchedAt, loopName]\n      .map((v) => String(v ?? \"\").trim())\n      .filter(Boolean);\n    return parts.join(\" • \");\n  }, [match.location, platform, matchedAt, loopName]);\n\n  const title = React.useMemo(() => {\n    const raw = String(match.title ?? \"\").trim();\n    return raw ? raw : t(\"matches.details.untitled\", { defaultValue: \"Match\" });\n  }, [match.title, t]);\n\n  const url = React.useMemo(() => String(match.url ?? \"\").trim(), [match.url]);\n  const hasUrl = Boolean(url);\n\n  const description = React.useMemo(() => String(match.description ?? \"\").trim(), [match.description]);\n  const hasDescription = Boolean(description);\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={title}\n      description={meta || undefined}\n      size=\"md\"\n    >\n      <div className=\"flex flex-col gap-lg\">\n        {/* Details */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-md\">\n          <Field label={t(\"matches.fields.location\", { defaultValue: \"Location\" })} value={match.location} />\n          <Field label={t(\"matches.fields.platform\", { defaultValue: \"Platform\" })} value={platform} />\n          <Field label={t(\"matches.fields.matchedAt\", { defaultValue: \"Matched\" })} value={matchedAt} />\n          <Field label={t(\"matches.fields.loop\", { defaultValue: \"Loop\" })} value={loopName} />\n        </div>\n\n        {/* Description */}\n        <div>\n          <div className=\"text-sm font-semibold text-foreground\">\n            {t(\"matches.fields.description\", { defaultValue: \"Description\" })}\n          </div>\n          <div\n            className={classNames(\n              \"mt-2 rounded-xl border border-border bg-card p-md\",\n              \"text-sm leading-relaxed whitespace-pre-wrap\",\n              !hasDescription && \"text-muted-foreground\",\n            )}\n          >\n            {hasDescription ? description : t(\"matches.details.noDescription\", { defaultValue: \"No description.\" })}\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className={classNames(\"flex flex-wrap items-center justify-end gap-sm pt-sm\")}>\n          {/* Keep status visible, but do not duplicate the whole summary card */}\n          <span className=\"mr-auto rounded-full border border-border bg-card px-sm py-1 text-xs text-muted-foreground\">\n            <StatusLabel status={match.status} />\n          </span>\n\n          {hasUrl ? (\n            <Button asChild variant=\"outline\" size=\"sm\" shape=\"pill\" disabled={busy}>\n              <a href={url} target=\"_blank\" rel=\"noreferrer\">\n                {t(\"matches.common.openLink\", { defaultValue: \"Open link\" })}\n              </a>\n            </Button>\n          ) : null}\n\n          {onUpdateStatus ? (\n            <StatusMenu value={match.status} disabled={busy} onChange={(s) => onUpdateStatus(match.id, s)} size=\"sm\" />\n          ) : null}\n\n          {onEdit ? (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              shape=\"pill\"\n              disabled={busy}\n              onClick={() => onEdit(match.id)}\n            >\n              {t(\"matches.common.edit\", { defaultValue: \"Edit\" })}\n            </Button>\n          ) : null}\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            shape=\"pill\"\n            disabled={busy}\n            onClick={() => onDelete(match.id)}\n          >\n            {t(\"matches.common.delete\", { defaultValue: \"Delete\" })}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\ntype FieldProps = Readonly<{ label: string; value: string | null | undefined }>;\n\nfunction Field({ label, value }: FieldProps) {\n  const v = String(value ?? \"\").trim();\n  return (\n    <div className=\"rounded-xl border border-border bg-card p-md\">\n      <div className=\"text-xs text-muted-foreground\">{label}</div>\n      <div className=\"mt-1 text-sm font-medium text-foreground whitespace-nowrap overflow-hidden text-ellipsis\">\n        {v || \"—\"}\n      </div>\n    </div>\n  );\n}\n\n"],"names":["storageKey","userId","isValidStatus","value","Set","BOARD_COLUMNS_LIST","map","s","String","key","has","createEmptyOrder","obj","loadOrder","raw","localStorage","getItem","parsed","JSON","parse","base","arr","Array","isArray","filter","x","saveOrder","order","setItem","stringify","sortByOrder","matches","orderIds","idx","Map","i","length","set","decorated","m","rank","id","get","Number","MAX_SAFE_INTEGER","stable","sort","a","b","COLUMN_DEFAULT_STATUS","ACTIVE","INTERVIEW","OFFER","HIRED","REJECTED","NO_RESPONSE","ARCHIVED","useBoardController","useAuthSelectors","loops","matchesQ","loopsQ","useGetLoopsQuery","useGetAllMatchesQuery","React","data","isLoading","isError","error","useBoardQueries","loopIdToName","l","name","buildLoopIdToName","orderByStatus","applyDrop","params","setOrderByStatus","prev","next","existingIds","col","getBoardColumn","status","includes","push","ensureIdsExist","payload","toStatus","toIndex","fromArr","fromStatus","toArr","currentFromIndex","indexOf","matchId","splice","safeIndex","Math","max","min","useBoardOrderState","busy","onDeleteById","updateStatus","deleteMatchTrigger","deleteState","useDeleteMatchMutation","updateStatusTrigger","updateState","useUpdateMatchStatusMutation","Boolean","deleteMatch","async","args","loopId","match","find","useBoardMutations","byStatus","grouped","groupMatchesByStatus","ordered","buildBoardColumns","onDelete","catch","onDropToStatus","findMatchById","queries","actions","BoardLane","children","droppableId","setNodeRef","isOver","useDroppable","_jsx","ref","className","classNames","BoardMatchCardView","loopName","overlay","t","useTranslation","open","setOpen","onQuickDelete","e","preventDefault","stopPropagation","window","confirm","Promise","resolve","title","trim","company","matchedAt","formatMatchedAt","platform","p","normalizePlatform","toUpperCase","meta","location","v","join","url","hasUrl","onOpen","cursorClass","_jsxs","_Fragment","role","tabIndex","onClick","onKeyDown","Card","variant","padding","shadow","interactive","type","disabled","onPointerDown","Trash2","href","target","rel","MatchDetailsModal","onOpenChange","BoardMatchCard","index","attributes","listeners","transform","transition","isDragging","useSortable","style","CSS","Transform","toString","opacity","BoardMatchCardOverlay","BoardColumn","itemIds","SortableContext","items","strategy","verticalListSortingStrategy","buildColumnsFromVm","vm","c","findContainerOfId","state","list","entries","some","removeFromList","findIndex","item","slice","insertIntoList","StatusTabTarget","label","isActive","BoardColumns","statuses","labelKey","defaultValue","activeStatus","setActiveStatus","scrollerRef","colRefs","setColRef","el","current","scrollToStatus","scrollIntoView","behavior","inline","block","rafRef","handleScrollerScroll","requestAnimationFrame","scroller","left","scrollLeft","bestStatus","bestDist","POSITIVE_INFINITY","dist","abs","offsetLeft","cancelAnimationFrame","sensors","columnsState","activeMatch","activeLoopName","handleDragStart","handleDragOver","handleDragEnd","useSensors","useSensor","PointerSensor","activationConstraint","distance","TouchSensor","delay","tolerance","setColumnsState","activeId","setActiveId","pendingDropRef","pending","isAtTargetIndex","values","found","dragFromRef","active","undefined","fromIndex","over","activeIdStr","overIdStr","overIndexModifier","rect","translated","top","height","src","k","cloneColumns","overLaneStatus","overId","startsWith","overSortable","sortable","containerId","fromList","toList","overIndexInTo","oldIndex","newIndex","removed","removedFrom","from","useBoardColumnsDnd","DndContext","collisionDetection","closestCorners","onDragStart","onDragOver","onDragEnd","onScroll","DragOverlay","adjustScale","BoardState","isEmpty","PageMessage","getErrorMessage","BoardPage","subtitle","PageHeader","StatusLabel","fallback","getStatusMeta","fb","split","toLowerCase","clsx","xs","SIZE_CLASS","sm","md","StatusDot","size","color","getStageColorForStatus","STATUS_COLOR_DOT_CLASS","StatusMenu","onChange","stage","options","useMemo","statusesForStage","STATUS_KEYS","StatusBadge","STATUS_COLOR_CLASS","knownPlatforms","PLATFORM_REGISTRY","iso","d","Date","isNaN","getTime","yyyy","getFullYear","mm","getMonth","padStart","getDate","MatchCard","onUpdateStatus","onEdit","StatusPill","Button","shape","description","hasDescription","Modal","Field","asChild"],"ignoreList":[],"sourceRoot":""}