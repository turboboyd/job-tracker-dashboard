"use strict";(self.webpackChunkjob_tracker_dashboard=self.webpackChunkjob_tracker_dashboard||[]).push([[7163],{338(e,t,s){function a(e,t,s,a={replace:!0}){const l=new URLSearchParams(t.search);for(const[e,t]of Object.entries(s))null!=t&&!1!==t?!0!==t?l.set(e,String(t)):l.set(e,"1"):l.delete(e);const o=l.toString();e({pathname:t.pathname,search:o?`?${o}`:""},{replace:a.replace??!0})}s.d(t,{N:()=>a})},61300(e,t,s){s.d(t,{md:()=>d,VX:()=>i,Wq:()=>p});var a=s(96540),l=s(22022),o=s(39819),n=s(74848);function i({status:e,fallback:t}){const{t:s}=(0,l.Bd)(),a=(0,o.Ax)(e),i=t??a.key.split("_").map(e=>e?e[0].toUpperCase()+e.slice(1).toLowerCase():e).join(" ");return(0,n.jsx)(n.Fragment,{children:s(a.labelKey,{defaultValue:i})})}function r(...e){return e.filter(Boolean).join(" ")}const c={xs:"h-1.5 w-1.5",sm:"h-2 w-2",md:"h-2.5 w-2.5"};function d({status:e,className:t,size:s="sm"}){const a=(0,o.Xu)(e);return(0,n.jsx)("span",{"aria-hidden":!0,className:r("inline-block rounded-full",c[s],o.Ss[a],t)})}function m(...e){return e.filter(Boolean).join(" ")}const u={sm:"h-9 px-sm text-sm",md:"h-10 px-md text-sm"};function p({value:e,onChange:t,disabled:s=!1,stage:l,options:r,className:c,size:d="sm"}){const p=(0,a.useMemo)(()=>r?.length?r:l?(0,o.kF)(l).map(e=>e.key):o.i2,[r,l]);return(0,n.jsx)("select",{value:e,disabled:s,onChange:e=>t(e.target.value),className:m("rounded-full border border-border bg-card text-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",u[d],c),children:p.map(e=>(0,n.jsx)("option",{value:e,children:(0,n.jsx)(i,{status:e})},e))})}},86988(e,t,s){s.d(t,{Cq:()=>g,B6:()=>b,v:()=>f,FL:()=>h,Xk:()=>a.Xk,g5:()=>a.g5,$V:()=>a.$V,LC:()=>a.LC});var a=s(15019),l=(s(65546),s(96540)),o=s(22022),n=s(39819),i=s(74848);function r(...e){return e.filter(Boolean).join(" ")}function c({status:e,className:t}){const{t:s}=(0,o.Bd)(),a=(0,n.Ax)(e);return(0,i.jsx)("span",{className:r("inline-flex items-center rounded-full px-2 py-1 text-xs font-medium",n.oZ[(0,n.Xu)(e)],t),children:s(a.labelKey)})}var d=s(61300),m=s(46681),u=s(61239);const p=new Set(u.Aj.map(e=>e.id));function h(e){if("string"!=typeof e)return"";const t=e.trim().toLowerCase();return t&&p.has(t)?t:""}function f(e){if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return e;const s=String(t.getFullYear()),a=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}.${a}.${s}`}function g({match:e,loopName:t,busy:s,onUpdateStatus:a,onDelete:n,onEdit:r}){const{t:c}=(0,o.Bd)(),u=l.useMemo(()=>f(e.matchedAt),[e.matchedAt]),p=l.useMemo(()=>{const t=h(e.platform);return t?t.toUpperCase():""},[e.platform]),g=l.useMemo(()=>[e.location,p,u,t].map(e=>String(e??"").trim()).filter(Boolean).join(" • "),[e.location,p,u,t]);return(0,i.jsxs)(m.Zp,{variant:"default",padding:"md",shadow:"sm",className:"flex flex-col gap-sm",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-md",children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsxs)("div",{className:"min-w-0 whitespace-nowrap overflow-hidden text-ellipsis text-sm",children:[(0,i.jsx)("span",{className:"font-semibold text-foreground",children:e.title||"—"}),(0,i.jsx)("span",{className:"ml-2 text-muted-foreground",children:e.company||"—"})]}),g?(0,i.jsx)("div",{className:"mt-1 text-xs text-muted-foreground whitespace-nowrap overflow-hidden text-ellipsis",children:g}):null]}),(0,i.jsx)("div",{className:"flex items-center gap-sm",children:(0,i.jsx)(x,{value:e.status})})]}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-sm pt-xs",children:[(0,i.jsxs)("label",{className:"flex items-center gap-sm text-sm",children:[(0,i.jsx)("span",{className:"text-muted-foreground",children:c("matches.common.status")}),(0,i.jsx)(d.Wq,{value:e.status,disabled:s,onChange:t=>a(e.id,t),size:"sm"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-sm",children:[r?(0,i.jsx)(m.$n,{variant:"outline",size:"sm",shape:"pill",disabled:s,onClick:()=>r(e.id),children:c("matches.common.edit")}):null,(0,i.jsx)(m.$n,{variant:"outline",size:"sm",shape:"pill",disabled:s,onClick:()=>n(e.id),children:c("matches.common.delete")})]})]})]})}function x({value:e}){return(0,i.jsx)(c,{status:e})}var v=s(99653);function b({open:e,onOpenChange:t,match:s,loopName:a,busy:n,onDelete:r,onUpdateStatus:c,onEdit:u}){const{t:p}=(0,o.Bd)(),g=l.useMemo(()=>f(s.matchedAt),[s.matchedAt]),x=l.useMemo(()=>{const e=h(s.platform);return e?e.toUpperCase():""},[s.platform]),b=l.useMemo(()=>[s.location,x,g,a].map(e=>String(e??"").trim()).filter(Boolean).join(" • "),[s.location,x,g,a]),w=l.useMemo(()=>String(s.title??"").trim()||p("matches.details.untitled",{defaultValue:"Match"}),[s.title,p]),y=l.useMemo(()=>String(s.url??"").trim(),[s.url]),N=Boolean(y),C=l.useMemo(()=>String(s.description??"").trim(),[s.description]),S=Boolean(C);return(0,i.jsx)(m.aF,{open:e,onOpenChange:t,title:w,description:b||void 0,size:"md",children:(0,i.jsxs)("div",{className:"flex flex-col gap-lg",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-md",children:[(0,i.jsx)(j,{label:p("matches.fields.location",{defaultValue:"Location"}),value:s.location}),(0,i.jsx)(j,{label:p("matches.fields.platform",{defaultValue:"Platform"}),value:x}),(0,i.jsx)(j,{label:p("matches.fields.matchedAt",{defaultValue:"Matched"}),value:g}),(0,i.jsx)(j,{label:p("matches.fields.loop",{defaultValue:"Loop"}),value:a})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:p("matches.fields.description",{defaultValue:"Description"})}),(0,i.jsx)("div",{className:(0,v.xW)("mt-2 rounded-xl border border-border bg-card p-md","text-sm leading-relaxed whitespace-pre-wrap",!S&&"text-muted-foreground"),children:S?C:p("matches.details.noDescription",{defaultValue:"No description."})})]}),(0,i.jsxs)("div",{className:(0,v.xW)("flex flex-wrap items-center justify-end gap-sm pt-sm"),children:[(0,i.jsx)("span",{className:"mr-auto rounded-full border border-border bg-card px-sm py-1 text-xs text-muted-foreground",children:(0,i.jsx)(d.VX,{status:s.status})}),N?(0,i.jsx)(m.$n,{asChild:!0,variant:"outline",size:"sm",shape:"pill",disabled:n,children:(0,i.jsx)("a",{href:y,target:"_blank",rel:"noreferrer",children:p("matches.common.openLink",{defaultValue:"Open link"})})}):null,c?(0,i.jsx)(d.Wq,{value:s.status,disabled:n,onChange:e=>c(s.id,e),size:"sm"}):null,u?(0,i.jsx)(m.$n,{variant:"outline",size:"sm",shape:"pill",disabled:n,onClick:()=>u(s.id),children:p("matches.common.edit",{defaultValue:"Edit"})}):null,(0,i.jsx)(m.$n,{variant:"outline",size:"sm",shape:"pill",disabled:n,onClick:()=>r(s.id),children:p("matches.common.delete",{defaultValue:"Delete"})})]})]})})}function j({label:e,value:t}){const s=String(t??"").trim();return(0,i.jsxs)("div",{className:"rounded-xl border border-border bg-card p-md",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:e}),(0,i.jsx)("div",{className:"mt-1 text-sm font-medium text-foreground whitespace-nowrap overflow-hidden text-ellipsis",children:s||"—"})]})}},87163(e,t,s){s.r(t),s.d(t,{default:()=>I});var a=s(22022),l=s(86988),o=s(99653),n=s(46681),i=s(96540),r=s(74848);function c({open:e,busy:t,match:s,loopName:l,onClose:o,onSave:c}){const{t:d}=(0,a.Bd)(),[m,u]=(0,i.useState)(!1),[p,h]=(0,i.useState)(""),[f,g]=(0,i.useState)(""),[x,v]=(0,i.useState)(""),[b,j]=(0,i.useState)(""),[w,y]=(0,i.useState)(""),[N,C]=(0,i.useState)(""),S=t||m;(0,i.useEffect)(()=>{e&&s&&(h(s.title??""),g(s.company??""),v(s.location??""),j(s.url??""),y(function(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":`${String(t.getFullYear())}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}(s.matchedAt??null)),C(String(s.description??"")))},[e,s]);const A=(0,i.useMemo)(()=>{const e={title:p.trim(),company:f.trim(),location:x.trim(),url:b.trim(),description:N.trim()};return w&&(e.matchedAt=new Date(w).toISOString()),e},[p,f,x,b,N,w]);return s?(0,r.jsx)(n.aF,{open:e,onOpenChange:e=>{e||o()},title:d("matches.modal.editTitle"),description:l?d("matches.modal.loop",{name:l}):void 0,size:"lg",showClose:!1,children:(0,r.jsxs)("div",{className:"flex flex-col gap-lg",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-md md:grid-cols-2",children:[(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)(n.FO,{label:d("matches.modal.fields.title"),value:p,onChange:e=>h(e.target.value),disabled:S})}),(0,r.jsx)(n.FO,{label:d("matches.modal.fields.company"),value:f,onChange:e=>g(e.target.value),disabled:S}),(0,r.jsx)(n.FO,{label:d("matches.modal.fields.location"),value:x,onChange:e=>v(e.target.value),disabled:S}),(0,r.jsx)(n.FO,{label:d("matches.modal.fields.url"),value:b,onChange:e=>j(e.target.value),disabled:S}),(0,r.jsx)(n.FO,{label:d("matches.modal.fields.matchedAt"),type:"date",value:w,onChange:e=>y(e.target.value),disabled:S}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)(n.l2,{label:d("matches.modal.fields.description"),value:N,onChange:e=>C(e.target.value),disabled:S,rows:6})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-sm border-t border-border pt-md",children:[(0,r.jsx)(n.$n,{variant:"outline",size:"sm",shape:"pill",shadow:"sm",disabled:S,onClick:o,children:d("matches.common.cancel")}),(0,r.jsx)(n.$n,{variant:"default",size:"sm",shape:"pill",shadow:"sm",disabled:S,onClick:async()=>{if(s)try{u(!0),await c(s.id,A),o()}finally{u(!1)}},children:d("matches.common.save")})]})]})}):null}var d=s(39819);const m={q:"",sort:"matchedAtDesc",loopIds:[],platforms:[],statuses:[]};function u(e,t){return e===t?0:e<t?-1:1}function p({children:e,onRemove:t,removeLabel:s}){return(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-border bg-background px-3 py-1 text-xs text-foreground shadow-sm",children:[(0,r.jsx)("span",{className:"truncate max-w-[220px]",children:e}),(0,r.jsx)(n.$n,{variant:"ghost",size:"icon",shape:"pill",shadow:"none",onClick:t,"aria-label":s,className:(0,o.xW)("h-6 w-6 p-0","text-muted-foreground hover:text-foreground","focus-visible:ring-2 focus-visible:ring-ring"),children:"✕"})]})}function h(e,t){switch(t){case"matchedAtDesc":return e("matches.filters.sort.options.matchedAtDesc");case"matchedAtAsc":return e("matches.filters.sort.options.matchedAtAsc");case"titleAsc":return e("matches.filters.sort.options.titleAsc");case"companyAsc":return e("matches.filters.sort.options.companyAsc");default:return String(t)}}function f(e,t){const s=(0,d.Ax)(t);return e(s.labelKey,{defaultValue:(a=s.key,a.split("_").map(e=>e?e[0].toUpperCase()+e.slice(1).toLowerCase():e).join(" "))});var a}function g({value:e,onChange:t,onReset:s,loopOptions:l,platformOptions:c,statusOptions:d,totalCount:u,filteredCount:g,loopsLoading:x,page:v,totalPages:b,onPageChange:j,pageFrom:w,pageTo:y,pageDisabled:N}){const{t:C}=(0,a.Bd)(),S=s=>t({...e,...s}),A=i.useMemo(()=>function(e){const{t,filters:s,loopOptions:a}=e,l=[];if(s.q.trim()&&l.push({key:"q",label:t("matches.filters.chips.search",{q:s.q.trim()}),patch:{q:""}}),s.sort!==m.sort&&l.push({key:"sort",label:t("matches.filters.chips.sort",{value:h(t,s.sort)}),patch:{sort:m.sort}}),s.loopIds.length){const e=new Map(a.map(e=>[e.id,e.name])),o=s.loopIds.map(t=>e.get(t)??t).join(", ");l.push({key:"loops",label:t("matches.filters.chips.loops",{value:o}),patch:{loopIds:[]}})}if(s.platforms.length){const e=s.platforms.map(e=>e.toUpperCase()).join(", ");l.push({key:"platforms",label:t("matches.filters.chips.platforms",{value:e}),patch:{platforms:[]}})}if(s.statuses.length){const e=s.statuses.map(e=>f(t,e)).join(", ");l.push({key:"statuses",label:t("matches.filters.chips.statuses",{value:e}),patch:{statuses:[]}})}return l}({t:C,filters:e,loopOptions:l}),[C,e,l]),k=0===A.length;return(0,r.jsxs)(n.Zp,{variant:"default",padding:"sm",shadow:"sm",className:"space-y-md overflow-visible",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-md",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-sm",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:C("matches.filters.showing",{filtered:g,total:u})}),A.length?(0,r.jsxs)(r.Fragment,{children:[A.map(e=>(0,r.jsx)(p,{onRemove:()=>S(e.patch),removeLabel:C("matches.filters.common.removeFilter"),children:e.label},e.key)),(0,r.jsx)(n.$n,{variant:"link",size:"sm",shape:"pill",shadow:"none",onClick:s,className:(0,o.xW)("ml-1 h-auto px-0 py-0","text-xs text-muted-foreground","underline underline-offset-2","hover:text-foreground"),children:C("matches.filters.clearAll")})]}):null]}),(0,r.jsx)(n.$n,{variant:"outline",size:"sm",shape:"pill",shadow:"sm",disabled:k,onClick:s,children:C("matches.filters.reset")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-md md:grid-cols-12",children:[(0,r.jsx)("div",{className:"md:col-span-6 lg:col-span-2",children:(0,r.jsx)(n.so,{label:C("matches.filters.search.label"),value:e.q,onValueChange:e=>S({q:e}),delay:250,preset:"search",inputSize:"sm",autoComplete:"off"})}),(0,r.jsx)("div",{className:"md:col-span-6 lg:col-span-2",children:(0,r.jsx)(n.zM,{label:C("matches.filters.sort.label"),value:e.sort,onChange:e=>S({sort:e}),size:"sm",options:[{value:"matchedAtDesc",label:C("matches.filters.sort.options.matchedAtDesc")},{value:"matchedAtAsc",label:C("matches.filters.sort.options.matchedAtAsc")},{value:"titleAsc",label:C("matches.filters.sort.options.titleAsc")},{value:"companyAsc",label:C("matches.filters.sort.options.companyAsc")}]})}),(0,r.jsx)("div",{className:"md:col-span-6 lg:col-span-2",children:(0,r.jsx)(n.X,{label:C("matches.filters.loops.label"),value:e.loopIds,onChange:e=>S({loopIds:e}),options:l.map(e=>({value:e.id,label:e.name})),placeholder:C(x?"matches.filters.loops.loading":"matches.filters.loops.all"),clearLabel:C("matches.filters.common.clear"),searchable:!0,disabled:x})}),(0,r.jsx)("div",{className:"md:col-span-6 lg:col-span-2",children:(0,r.jsx)(n.X,{label:C("matches.filters.platforms.label"),value:e.platforms,onChange:e=>S({platforms:e}),options:c.map(e=>({value:e,label:e.toUpperCase()})),placeholder:C("matches.filters.platforms.all"),clearLabel:C("matches.filters.common.clear"),searchable:!0})}),(0,r.jsx)("div",{className:"md:col-span-6 lg:col-span-2",children:(0,r.jsx)(n.X,{label:C("matches.filters.statuses.label"),value:e.statuses,onChange:e=>S({statuses:e}),options:d.map(e=>({value:e,label:f(C,e)})),placeholder:C("matches.filters.statuses.all"),clearLabel:C("matches.filters.common.clear")})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 items-center gap-md md:grid-cols-12",children:[(0,r.jsx)("div",{className:"md:col-span-4 text-xs text-muted-foreground",children:C("matches.filters.pageShowing",{from:w,to:y,total:g})}),(0,r.jsx)("div",{className:"md:col-span-8 flex justify-start md:justify-end",children:(0,r.jsx)(n.dK,{page:v,totalPages:b,onPageChange:j,disabled:N,siblingCount:1})})]})]})}var x=s(3433),v=s(71563),b=s(48330);function j(e,t){return e.localeCompare(t,void 0,{sensitivity:"base"})}function w(e){return String(e??"").toLowerCase().trim()}var y=s(95531),N=s(338);function C(e,t){const s=e.get(t);return s?s.split(",").map(e=>e.trim()).filter(Boolean):[]}function S(e){const t=e.map(e=>String(e).trim()).filter(Boolean);return t.length?t.join(","):null}function A(e){const{navigate:t,location:s,filters:a,page:l,replace:o=!0}=e;(0,N.N)(t,s,{q:a.q.trim()||null,sort:a.sort!==m.sort?a.sort:null,loop:S(a.loopIds),platform:S(a.platforms),status:S(a.statuses),page:l>1?l:null},{replace:o})}var k=s(73431);function M(){const{userId:e}=(0,v.gv)(),t=(0,x.Zp)(),s=(0,x.zy)(),{matchesQ:a,loopsQ:n,matches:r,loops:c}=function(){const{isAuthReady:e,isAuthenticated:t}=(0,v.gv)(),s=!e||!t,a=(0,l.g5)(void 0,{skip:s}),o=(0,k.fZ)(void 0,{skip:s});return{matchesQ:a,loopsQ:o,matches:a.data??[],loops:o.data??[]}}(),{busy:d,actions:p}=function(){const{isAuthReady:e,isAuthenticated:t}=(0,v.gv)(),[s,a]=(0,l.LC)(),[n,r]=(0,l.$V)(),[c,d]=(0,l.Xk)(),m=a.isLoading||r.isLoading||d.isLoading,u=i.useCallback(()=>!(!e||!t)||((0,o.me)("error","You are not signed in."),!1),[e,t]);return{busy:m,actions:{onDelete:i.useCallback(async(e,t)=>{if(u())try{await c({matchId:e,loopId:t}).unwrap(),(0,o.me)("success","Match deleted")}catch(e){(0,o.me)("error",`Failed to delete match: ${(0,y.u)(e)}`)}},[c,u]),onUpdateStatus:i.useCallback(async(e,t,a)=>{if(u())try{await s({matchId:e,loopId:t,status:a}).unwrap(),(0,o.me)("success","Match updated")}catch(e){(0,o.me)("error",`Failed to update match: ${(0,y.u)(e)}`)}},[u,s]),onSaveEdit:i.useCallback(async(e,t)=>{if(!u())throw new Error("Not signed in");try{await n({matchId:e,patch:t}).unwrap(),(0,o.me)("success","Match saved")}catch(e){throw(0,o.me)("error",`Failed to save match: ${(0,y.u)(e)}`),e}},[u,n])}}}(),{filters:h,setFilters:f,reset:g,visible:N,initialPage:S}=function(e){const{matches:t,search:s,navigate:a,location:l}=e,o=i.useMemo(()=>function(e){const t=new URLSearchParams(e),s=t.get("q")??m.q,a=t.get("sort")??m.sort,l=C(t,"loop"),o=C(t,"platform"),n=C(t,"status"),i=t.get("page");return{filters:{q:s,sort:a,loopIds:l,platforms:o,statuses:n},page:Math.max(1,Number(i??1)||1)}}(s),[s]),[n,r]=i.useState(o.filters),c=i.useRef(!1);i.useEffect(()=>{c.current||(c.current=!0,r(o.filters))},[o.filters]);const d=i.useMemo(()=>function(e,t){const s=t.q.trim(),a=s.length>0,l=new Set(t.loopIds),o=new Set(t.platforms.map(e=>e.toLowerCase())),n=new Set(t.statuses);return[...e.filter(e=>{if(t.loopIds.length&&!l.has(e.loopId))return!1;if(t.platforms.length){const t=String(e.platform??"").toLowerCase();if(!o.has(t))return!1}if(t.statuses.length&&!n.has(e.status))return!1;if(a){const t=[e.title,e.company,e.location,e.url,e.description].map(e=>String(e??"")).join(" ");if(i=s,!t.toLowerCase().includes(i.toLowerCase()))return!1}var i;return!0})].sort((e,s)=>{switch(t.sort){case"matchedAtAsc":return u(e.matchedAt,s.matchedAt);case"matchedAtDesc":return u(s.matchedAt,e.matchedAt);case"titleAsc":return String(e.title??"").localeCompare(String(s.title??""),void 0,{sensitivity:"base"});case"companyAsc":return String(e.company??"").localeCompare(String(s.company??""),void 0,{sensitivity:"base"});default:return 0}})}(t,n),[t,n]),p=i.useCallback(e=>{r(e),A({navigate:a,location:l,filters:e,page:1,replace:!0})},[a,l]),h=i.useCallback(()=>{r(m),A({navigate:a,location:l,filters:m,page:1,replace:!0})},[a,l]);return{filters:n,setFilters:p,reset:h,visible:d,initialPage:o.page}}({matches:r,search:s.search,navigate:t,location:s}),[M,I]=i.useState(null),{loopIdToName:O,platformOptions:L,statusOptions:$}=function(e,t){return{loopIdToName:i.useMemo(()=>{const e=new Map;for(const s of t)e.set(s.id,s.name);return e},[t]),platformOptions:i.useMemo(()=>{const t=new Set;for(const s of e){const e=w(s.platform);e&&t.add(e)}return Array.from(t).sort(j)},[e]),statusOptions:i.useMemo(()=>{const t=new Set;for(const s of e){const e=String(s.status??"").trim();e&&t.add(e)}return Array.from(t).sort(j)},[e])}}(r,c),z=i.useMemo(()=>function(e){const t=new WeakSet,s=e=>{if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(s);if(t.has(e))return"[Circular]";t.add(e);const a=e,l=Object.keys(a).sort((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})),o={};for(const e of l)o[e]=s(a[e]);return o};try{return JSON.stringify(s(e))}catch{return String(e)}}(h),[h]),F=i.useMemo(()=>[`userId:${e??"anon"}`,`filters:${z}`,`total:${r.length}`,`visible:${N.length}`].join("|"),[e,z,r.length,N.length]),D=(0,b.W)({totalItems:N.length,pageSize:6,initialPage:S,resetKey:F}),q=i.useCallback(e=>{D.setPage(e);const a="function"==typeof e?e(D.page):e,l=Math.max(1,Number(a)||1);A({navigate:t,location:s,filters:h,page:l,replace:!0})},[D,t,s,h]),B=i.useMemo(()=>N.slice(D.offset,D.offset+D.limit),[N,D.offset,D.limit]),V=i.useMemo(()=>M?r.find(e=>e.id===M)??null:null,[M,r]),P=i.useCallback(()=>f(m),[f]),E=g??P,U=i.useCallback(async(e,t)=>{await p.onSaveEdit(e,t),I(null)},[p]);return{userId:e,queries:{matchesQ:a,loopsQ:n},busy:d,matches:r,loops:c,loopIdToName:O,platformOptions:L,statusOptions:$,filters:h,setFilters:f,onReset:E,visible:N,pagination:{...D,setPage:q},pagedMatches:B,editingMatch:V,setEditingId:I,actions:{onDelete:async e=>{const t=r.find(t=>t.id===e);t&&await p.onDelete(t.id,t.loopId)},onUpdateStatus:async(e,t)=>{const s=r.find(t=>t.id===e);s&&await p.onUpdateStatus(s.id,s.loopId,t)},onSaveEdit:U}}}function I(){const{t:e}=(0,a.Bd)(),t=M(),{matchesQ:s,loopsQ:i}=t.queries;return s.isLoading?(0,r.jsxs)("div",{className:"w-full h-full flex flex-col min-h-0",children:[(0,r.jsx)(n.zY,{title:e("matches.list.title"),subtitle:e("matches.list.subtitle")}),(0,r.jsx)(n.xS,{children:e("matches.common.loading")})]}):s.isError?(0,r.jsxs)("div",{className:"w-full h-full flex flex-col min-h-0",children:[(0,r.jsx)(n.zY,{title:e("matches.list.title"),subtitle:e("matches.list.subtitle")}),(0,r.jsx)(n.xS,{children:(0,o.u1)(s.error)})]}):0===t.matches.length?(0,r.jsxs)("div",{className:"w-full h-full flex flex-col min-h-0",children:[(0,r.jsx)(n.zY,{title:e("matches.list.title"),subtitle:e("matches.list.subtitle")}),(0,r.jsx)(n.xS,{children:e("matches.list.empty")})]}):(0,r.jsxs)("div",{className:"w-full h-full flex flex-col min-h-0",children:[(0,r.jsx)(n.zY,{title:e("matches.list.title"),subtitle:e("matches.list.subtitle")}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{value:t.filters,onChange:t.setFilters,onReset:t.onReset,loopOptions:t.loops.map(e=>({id:e.id,name:e.name})),platformOptions:t.platformOptions,statusOptions:t.statusOptions,totalCount:t.matches.length,filteredCount:t.visible.length,loopsLoading:i.isLoading,page:t.pagination.page,totalPages:t.pagination.totalPages,onPageChange:t.pagination.setPage,pageFrom:t.pagination.info.from,pageTo:t.pagination.info.to,pageDisabled:t.busy||s.isFetching}),(0,r.jsx)("div",{className:"flex-1 min-h-0 overflow-auto pt-md",children:(0,r.jsx)("div",{className:"grid grid-cols-1 gap-md",children:t.pagedMatches.map(e=>(0,r.jsx)(l.Cq,{match:e,loopName:t.loopIdToName.get(e.loopId)??"",busy:t.busy,onUpdateStatus:t.actions.onUpdateStatus,onDelete:t.actions.onDelete,onEdit:t.setEditingId},e.id))})}),(0,r.jsx)(c,{open:Boolean(t.editingMatch),busy:t.busy,loopName:t.editingMatch?t.loopIdToName.get(t.editingMatch.loopId)??"":"",match:t.editingMatch,onClose:()=>t.setEditingId(null),onSave:t.actions.onSaveEdit})]})]})}}}]);
//# sourceMappingURL=7163.2a2ee6c8.chunk.js.map