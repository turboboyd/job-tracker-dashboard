{"version":3,"file":"assets/js/346.0d0b038f.chunk.js","mappings":"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","sources":["webpack://job-tracker-dashboard/./src/pages/DashboardPage/model/useDashboardData.ts","webpack://job-tracker-dashboard/./src/entities/application/model/status.ts","webpack://job-tracker-dashboard/./src/pages/ApplicationsPage/api/applicationsRepo.ts","webpack://job-tracker-dashboard/./src/pages/DashboardPage/DashboardIcon.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardStats.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardPipelineCard.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardRecentJobsCard.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardOnboardingActions.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardLoopsFilterModal.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardTabsNav.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/trends/trends.constants.ts","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/trends/TrendsChart.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/trends/TrendsLegend.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/model/dashboardTimeSeries.ts","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/trends/useTrendsData.ts","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/trends/DashboardTrendsCard.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardInsightsCard.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardTimelineCard.tsx","webpack://job-tracker-dashboard/./src/pages/DashboardPage/ui/DashboardStatusRadarCard.tsx","webpack://job-tracker-dashboard/./src/shared/lib/firestore/toMillis.ts"],"sourcesContent":["import { skipToken } from \"@reduxjs/toolkit/query\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  BOARD_COLUMN_KEYS,\n  getBoardColumn,\n  type BoardColumnKey,\n  normalizeStatusKey,\n  type StatusKey,\n} from \"src/entities/application/model/status\";\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport { useGetLoopsQuery, type Loop } from \"src/entities/loop\";\nimport { createApplicationsRepo } from \"src/pages/ApplicationsPage/api/applicationsRepo\";\nimport type { ApplicationDoc } from \"src/pages/ApplicationsPage/api/applicationsRepo\";\nimport { db } from \"src/shared/config/firebase/firebase\";\n\nimport type { DashboardLoopsFilterValue } from \"../ui\";\nimport type { RecentJob } from \"../ui/DashboardRecentJobsCard\";\n\ntype MatchLike = {\n  id: string;\n  loopId?: string;\n  createdAt?: unknown;\n  title?: string | null;\n  company?: string | null;\n  location?: string | null;\n  url?: string | null;\n  notes?: string | null;\n  status?: unknown;\n  updatedAt?: unknown;\n  statusHistory?: Array<{ status: unknown; date?: unknown; changedAt?: unknown }>;\n};\n\nexport type DashboardChartMatch = {\n  status: StatusKey;\n  createdAt: unknown;\n  updatedAt: unknown;\n  loopId: string | undefined;\n  statusHistory?: Array<{ status: StatusKey; date?: unknown; changedAt?: unknown }>;\n};\n\nexport type DashboardPipelineSummary = {\n  total: number;\n  byColumn: Record<BoardColumnKey, number>;\n};\n\nexport type DashboardData = {\n  userId: string | null;\n  loops: Loop[];\n\n  loopsFilter: DashboardLoopsFilterValue;\n  setLoopsFilter: (v: DashboardLoopsFilterValue) => void;\n\n  matches: MatchLike[];\n  matchesAll: MatchLike[];\n  chartMatches: DashboardChartMatch[];\n\n  isLoading: boolean;\n  error: string | null;\n\n  hasMatches: boolean;\n  /** Most recent jobs (used by DashboardActivityPage) */\n  recentJobs: RecentJob[];\n  /** Back-compat alias */\n  recent: RecentJob[];\n\n  pipelineSummary: DashboardPipelineSummary;\n};\n\nconst LS_KEY = \"dashboard:loops-filter:v1\";\n\nfunction safeParseFilter(raw: string | null): DashboardLoopsFilterValue {\n  try {\n    if (!raw) return { mode: \"all\" };\n    const parsed: unknown = JSON.parse(raw);\n    if (!parsed || typeof parsed !== \"object\") return { mode: \"all\" };\n    const obj = parsed as Record<string, unknown>;\n    if (obj.mode === \"all\") return { mode: \"all\" };\n    if (obj.mode === \"selected\" && Array.isArray(obj.selectedLoopIds)) {\n      return {\n        mode: \"selected\",\n        selectedLoopIds: obj.selectedLoopIds.filter(\n          (x): x is string => typeof x === \"string\",\n        ),\n      };\n    }\n  } catch {\n    // ignore\n  }\n  return { mode: \"all\" };\n}\n\nfunction toMillis(value: unknown): number {\n  if (\n    value &&\n    typeof (value as { toMillis?: unknown }).toMillis === \"function\"\n  ) {\n    return (value as { toMillis: () => number }).toMillis();\n  }\n  if (typeof value === \"number\") return value;\n  if (typeof value === \"string\") {\n    const ms = Date.parse(value);\n    return Number.isFinite(ms) ? ms : 0;\n  }\n  // Firestore timestamp { seconds }\n  const seconds = (value as { seconds?: unknown } | null)?.seconds;\n  if (typeof seconds === \"number\") return seconds * 1000;\n  return 0;\n}\n\nfunction buildSummary(cols: BoardColumnKey[]): {\n  total: number;\n  byStatus: Record<BoardColumnKey, number>;\n} {\n  const byStatus = Object.fromEntries(\n    BOARD_COLUMN_KEYS.map((k: BoardColumnKey) => [k, 0]),\n  ) as Record<BoardColumnKey, number>;\n\n  let total = 0;\n  for (const st of cols) {\n    total += 1;\n    byStatus[st] = (byStatus[st] ?? 0) + 1;\n  }\n  return { total, byStatus };\n}\n\nfunction toPipelineSummary(\n  total: number,\n  byStatus: Record<BoardColumnKey, number>,\n): DashboardPipelineSummary {\n  return { total, byColumn: byStatus };\n}\n\nexport function useDashboardData(): DashboardData {\n    const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n  const { userId, isAuthReady } = useAuthSelectors();\n\n  const loopsQ = useGetLoopsQuery(userId && isAuthReady ? undefined : skipToken);\n  const loops = loopsQ.data ?? [];\n\n  const [loopsFilter, setLoopsFilter] = useState<DashboardLoopsFilterValue>(\n    () =>\n      safeParseFilter(\n        typeof window !== \"undefined\"\n          ? window.localStorage.getItem(LS_KEY)\n          : null,\n      ),\n  );\n\n  useEffect(() => {\n    try {\n      window.localStorage.setItem(LS_KEY, JSON.stringify(loopsFilter));\n    } catch {\n      // ignore\n    }\n  }, [loopsFilter]);\n\n  const repo = useMemo(() => createApplicationsRepo(db), []);\n\n  const [appsRows, setAppsRows] = useState<Array<{ id: string; data: ApplicationDoc }>>([]);\n  const [appsLoading, setAppsLoading] = useState(false);\n  const [appsError, setAppsError] = useState<string | null>(null);\n  const [historyByAppId, setHistoryByAppId] = useState<Record<string, Array<{ status: StatusKey; date?: unknown; changedAt?: unknown }>>>({});\n\n  useEffect(() => {\n    if (!isAuthReady || !userId) return;\n    let cancelled = false;\n    (async () => {\n      try {\n        setAppsLoading(true);\n        setAppsError(null);\n        const rows = await repo.queryAllActiveApplications(userId, 500);\n        if (!cancelled) setAppsRows(rows);\n      } catch (e: unknown) {\n        const message = e instanceof Error ? e.message : String(e);\n        if (!cancelled) setAppsError(message);\n      } finally {\n        if (!cancelled) setAppsLoading(false);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [isAuthReady, userId, repo]);\n\n  useEffect(() => {\n    if (!isAuthReady || !userId) return;\n    if (!appsRows.length) return;\n\n    let cancelled = false;\n\n    (async () => {\n      try {\n        const entries = await Promise.all(\n          appsRows.map(async (row) => {\n            try {\n              const events = await repo.getApplicationHistory(userId, row.id, 200);\n              const items: Array<{ status: StatusKey; date?: unknown; changedAt?: unknown }> = [];\n\n              const statusRaw =\n                (row.data as { process?: { subStatus?: unknown; status?: unknown } })?.process?.subStatus ??\n                (row.data as { process?: { subStatus?: unknown; status?: unknown } })?.process?.status;\n              const initial: StatusKey = normalizeStatusKey(statusRaw) ?? \"SAVED\";\n              items.push({ status: initial, date: row.data.createdAt });\n\n              for (const ev of events) {\n                const d = ev.data as unknown as { type?: unknown; toStatus?: unknown; createdAt?: unknown };\n                if (d?.type === \"STATUS_CHANGE\" && d?.toStatus) {\n                  const st: StatusKey = normalizeStatusKey(d.toStatus) ?? \"SAVED\";\n                  items.push({ status: st, date: d.createdAt });\n                }\n              }\n\n              return [row.id, items] as const;\n            } catch {\n              return [row.id, [] as Array<{ status: StatusKey; date?: unknown; changedAt?: unknown }>] as const;\n            }\n          }),\n        );\n\n        if (cancelled) return;\n        const map: Record<string, Array<{ status: StatusKey; date?: unknown; changedAt?: unknown }>> = {};\n        for (const [id, arr] of entries) map[id] = arr;\n        setHistoryByAppId(map);\n      } catch {\n        if (!cancelled) setHistoryByAppId({});\n      }\n    })();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [isAuthReady, userId, appsRows, repo]);\n\n\n  const matchesAll = useMemo<MatchLike[]>(() => {\n    return appsRows.map((r) => {\n      const a = r.data;\n      const statusRaw =\n        (a as { process?: { subStatus?: unknown; status?: unknown } })?.process\n          ?.subStatus ??\n        (a as { process?: { subStatus?: unknown; status?: unknown } })?.process\n          ?.status;\n      const status: StatusKey = normalizeStatusKey(statusRaw) ?? \"SAVED\";\n      return {\n        id: r.id,\n        loopId: undefined,\n        createdAt: a.createdAt,\n        updatedAt: a.updatedAt,\n        title: a.job?.roleTitle ?? null,\n        company: a.job?.companyName ?? null,\n        location: a.job?.locationText ?? null,\n        url: a.job?.vacancyUrl ?? null,\n        notes: a.notes?.currentNote ?? null,\n        status,\n        statusHistory: historyByAppId[r.id],\n      };\n    });\n  }, [appsRows, historyByAppId]);\n\n  const isLoading = appsLoading;\n  const error = appsError ? (appsError || t(\"loadError\", \"Failed to load applications\")) : null;\n\n  const matches = useMemo(() => {\n    // Applications are not tied to loops. Keep the filter state for UI, but do not filter.\n    return matchesAll;\n  }, [matchesAll]);\n\n  const summary = useMemo(() => {\n    const cols = matches.map((m) => getBoardColumn(m.status as StatusKey));\n    return buildSummary(cols);\n  }, [matches]);\n\n  const hasMatches = summary.total > 0;\n\n  const recent = useMemo<RecentJob[]>(() => {\n    const copy: RecentJob[] = matches.map((m) => ({\n      id: m.id,\n      title: m.title ?? null,\n      company: m.company ?? null,\n      status: m.status,\n      createdAt: m.createdAt,\n    }));\n    copy.sort((a, b) => toMillis(b.createdAt) - toMillis(a.createdAt));\n    return copy.slice(0, 5);\n  }, [matches]);\n\n  const chartMatches = useMemo<DashboardChartMatch[]>(() => {\n    return matches.flatMap((m) => {\n      const st: StatusKey = normalizeStatusKey(m.status) ?? \"SAVED\";\n      return [\n        {\n          status: st,\n          createdAt: m.createdAt,\n          updatedAt: m.updatedAt,\n          loopId: m.loopId,\n          statusHistory: (m as { statusHistory?: Array<{ status: StatusKey; date?: unknown; changedAt?: unknown }> }).statusHistory,\n        },\n      ];\n    });\n  }, [matches]);\n\n  const pipelineSummary = useMemo(() => {\n    return toPipelineSummary(summary.total, summary.byStatus);\n  }, [summary]);\n\n  return {\n    userId,\n    loops,\n    loopsFilter,\n    setLoopsFilter,\n    matches,\n    matchesAll,\n    chartMatches,\n    isLoading,\n    error,\n    hasMatches,\n    recentJobs: recent,\n    recent,\n    pipelineSummary,\n  };\n}","/**\n * Stage =   .\n *      (  //).\n */\nexport type Stage =\n  | \"ACTIVE\"\n  | \"INTERVIEW\"\n  | \"OFFER\"\n  | \"HIRED\"\n  | \"REJECTED\"\n  | \"NO_RESPONSE\"\n  | \"ARCHIVED\";\n\nexport const STAGES: readonly Stage[] = [\n  \"ACTIVE\",\n  \"INTERVIEW\",\n  \"OFFER\",\n  \"HIRED\",\n  \"REJECTED\",\n  \"NO_RESPONSE\",\n  \"ARCHIVED\",\n] as const;\n\n/**\n *  =    ().\n * Stage   /,  UI    StatusKey.\n */\nexport type StatusKey =\n  // ACTIVE (prep + applied + waiting)\n  | \"SAVED\"\n  | \"REVIEWED\"\n  | \"CV_ADAPTING\"\n  | \"COVER_LETTER_WRITING\"\n  | \"READY_TO_APPLY\"\n  | \"APPLIED\"\n  | \"REAPPLIED\"\n  | \"WAITING_RESPONSE\"\n  | \"AUTO_REPLY_RECEIVED\"\n  | \"RESPONSE_RECEIVED\"\n  | \"MORE_INFO_REQUESTED\"\n  | \"FOLLOW_UP_REQUIRED\"\n  | \"WONT_APPLY\"\n  // INTERVIEW\n  | \"HR_CALL_SCHEDULED\"\n  | \"HR_PASSED\"\n  | \"HR_FAILED\"\n  | \"TECH_SCHEDULED\"\n  | \"TECH_PASSED\"\n  | \"TECH_FAILED\"\n  | \"FINAL_INTERVIEW\"\n  | \"TEST_TASK_RECEIVED\"\n  | \"TEST_TASK_SUBMITTED\"\n  | \"WAITING_DECISION\"\n  // OFFER\n  | \"OFFER_RECEIVED\"\n  | \"OFFER_REVIEWING\"\n  | \"NEGOTIATING\"\n  | \"OFFER_ACCEPTED\"\n  | \"OFFER_DECLINED\"\n  | \"OFFER_RESCINDED\"\n  // HIRED\n  | \"START_PLANNED\"\n  | \"STARTED\"\n  // REJECTED / NO_RESPONSE / ARCHIVED\n  | \"REJECTED_PRE_INTERVIEW\"\n  | \"REJECTED_AFTER_INTERVIEW\"\n  | \"ROLE_CLOSED\"\n  | \"GHOSTING\"\n  | \"ARCHIVED_GENERAL\"\n  | \"KEEP_IN_TOUCH\"\n  | \"WITHDREW_BEFORE_START\";\n\nexport type StatusColor =\n  | \"neutral\"\n  | \"info\"\n  | \"warning\"\n  | \"success\"\n  | \"danger\"\n  | \"purple\";\n\nexport const STATUS_COLORS: readonly StatusColor[] = [\n  \"neutral\",\n  \"info\",\n  \"warning\",\n  \"success\",\n  \"danger\",\n  \"purple\",\n] as const;\n\nexport type BoardColumnKey =\n  | \"ACTIVE\"\n  | \"INTERVIEW\"\n  | \"OFFER\"\n  | \"HIRED\"\n  | \"REJECTED\"\n  | \"NO_RESPONSE\"\n  | \"ARCHIVED\";\n\n\nexport const BOARD_COLUMN_KEYS: readonly BoardColumnKey[] = [\n  \"ACTIVE\",\n  \"INTERVIEW\",\n  \"OFFER\",\n  \"HIRED\",\n  \"REJECTED\",\n  \"NO_RESPONSE\",\n  \"ARCHIVED\",\n] as const;\n\nexport type StatusMeta = {\n  key: StatusKey;\n  stage: Stage;\n  labelKey: string;\n  color: StatusColor;\n  boardColumn: BoardColumnKey;\n  order: number;\n};\n\nconst STATUS_BASE: Record<StatusKey, StatusMeta> = {\n  // =========================\n  // ACTIVE\n  // =========================\n  SAVED: {\n    key: \"SAVED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.SAVED\",\n    color: \"neutral\",\n    boardColumn: \"ACTIVE\",\n    order: 10,\n  },\n  REVIEWED: {\n    key: \"REVIEWED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.REVIEWED\",\n    color: \"neutral\",\n    boardColumn: \"ACTIVE\",\n    order: 20,\n  },\n  CV_ADAPTING: {\n    key: \"CV_ADAPTING\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.CV_ADAPTING\",\n    color: \"info\",\n    boardColumn: \"ACTIVE\",\n    order: 30,\n  },\n  COVER_LETTER_WRITING: {\n    key: \"COVER_LETTER_WRITING\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.COVER_LETTER_WRITING\",\n    color: \"info\",\n    boardColumn: \"ACTIVE\",\n    order: 40,\n  },\n  READY_TO_APPLY: {\n    key: \"READY_TO_APPLY\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.READY_TO_APPLY\",\n    color: \"info\",\n    boardColumn: \"ACTIVE\",\n    order: 50,\n  },\n  APPLIED: {\n    key: \"APPLIED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.APPLIED\",\n    color: \"warning\",\n    boardColumn: \"ACTIVE\",\n    order: 60,\n  },\n  REAPPLIED: {\n    key: \"REAPPLIED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.REAPPLIED\",\n    color: \"warning\",\n    boardColumn: \"ACTIVE\",\n    order: 70,\n  },\n  WAITING_RESPONSE: {\n    key: \"WAITING_RESPONSE\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.WAITING_RESPONSE\",\n    color: \"warning\",\n    boardColumn: \"ACTIVE\",\n    order: 80,\n  },\n  AUTO_REPLY_RECEIVED: {\n    key: \"AUTO_REPLY_RECEIVED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.AUTO_REPLY_RECEIVED\",\n    color: \"warning\",\n    boardColumn: \"ACTIVE\",\n    order: 90,\n  },\n  RESPONSE_RECEIVED: {\n    key: \"RESPONSE_RECEIVED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.RESPONSE_RECEIVED\",\n    color: \"info\",\n    boardColumn: \"ACTIVE\",\n    order: 100,\n  },\n  MORE_INFO_REQUESTED: {\n    key: \"MORE_INFO_REQUESTED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.MORE_INFO_REQUESTED\",\n    color: \"info\",\n    boardColumn: \"ACTIVE\",\n    order: 110,\n  },\n  FOLLOW_UP_REQUIRED: {\n    key: \"FOLLOW_UP_REQUIRED\",\n    stage: \"ACTIVE\",\n    labelKey: \"status.FOLLOW_UP_REQUIRED\",\n    color: \"warning\",\n    boardColumn: \"ACTIVE\",\n    order: 120,\n  },\n  WONT_APPLY: {\n    key: \"WONT_APPLY\",\n    stage: \"REJECTED\",\n    labelKey: \"status.WONT_APPLY\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 900,\n  },\n\n  // =========================\n  // INTERVIEW\n  // =========================\n  HR_CALL_SCHEDULED: {\n    key: \"HR_CALL_SCHEDULED\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.HR_CALL_SCHEDULED\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 200,\n  },\n  HR_PASSED: {\n    key: \"HR_PASSED\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.HR_PASSED\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 210,\n  },\n  HR_FAILED: {\n    key: \"HR_FAILED\",\n    stage: \"REJECTED\",\n    labelKey: \"status.HR_FAILED\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 910,\n  },\n  TECH_SCHEDULED: {\n    key: \"TECH_SCHEDULED\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.TECH_SCHEDULED\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 220,\n  },\n  TECH_PASSED: {\n    key: \"TECH_PASSED\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.TECH_PASSED\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 230,\n  },\n  TECH_FAILED: {\n    key: \"TECH_FAILED\",\n    stage: \"REJECTED\",\n    labelKey: \"status.TECH_FAILED\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 920,\n  },\n  FINAL_INTERVIEW: {\n    key: \"FINAL_INTERVIEW\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.FINAL_INTERVIEW\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 240,\n  },\n  TEST_TASK_RECEIVED: {\n    key: \"TEST_TASK_RECEIVED\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.TEST_TASK_RECEIVED\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 250,\n  },\n  TEST_TASK_SUBMITTED: {\n    key: \"TEST_TASK_SUBMITTED\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.TEST_TASK_SUBMITTED\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 260,\n  },\n  WAITING_DECISION: {\n    key: \"WAITING_DECISION\",\n    stage: \"INTERVIEW\",\n    labelKey: \"status.WAITING_DECISION\",\n    color: \"purple\",\n    boardColumn: \"INTERVIEW\",\n    order: 270,\n  },\n\n  // =========================\n  // OFFER\n  // =========================\n  OFFER_RECEIVED: {\n    key: \"OFFER_RECEIVED\",\n    stage: \"OFFER\",\n    labelKey: \"status.OFFER_RECEIVED\",\n    color: \"success\",\n    boardColumn: \"OFFER\",\n    order: 300,\n  },\n  OFFER_REVIEWING: {\n    key: \"OFFER_REVIEWING\",\n    stage: \"OFFER\",\n    labelKey: \"status.OFFER_REVIEWING\",\n    color: \"success\",\n    boardColumn: \"OFFER\",\n    order: 310,\n  },\n  NEGOTIATING: {\n    key: \"NEGOTIATING\",\n    stage: \"OFFER\",\n    labelKey: \"status.NEGOTIATING\",\n    color: \"success\",\n    boardColumn: \"OFFER\",\n    order: 320,\n  },\n  OFFER_ACCEPTED: {\n    key: \"OFFER_ACCEPTED\",\n    stage: \"HIRED\",\n    labelKey: \"status.OFFER_ACCEPTED\",\n    color: \"success\",\n    boardColumn: \"OFFER\",\n    order: 330,\n  },\n  OFFER_DECLINED: {\n    key: \"OFFER_DECLINED\",\n    stage: \"ARCHIVED\",\n    labelKey: \"status.OFFER_DECLINED\",\n    color: \"neutral\",\n    boardColumn: \"REJECTED\",\n    order: 800,\n  },\n  OFFER_RESCINDED: {\n    key: \"OFFER_RESCINDED\",\n    stage: \"REJECTED\",\n    labelKey: \"status.OFFER_RESCINDED\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 930,\n  },\n\n  // =========================\n  // HIRED\n  // =========================\n  START_PLANNED: {\n    key: \"START_PLANNED\",\n    stage: \"HIRED\",\n    labelKey: \"status.START_PLANNED\",\n    color: \"success\",\n    boardColumn: \"OFFER\",\n    order: 400,\n  },\n  STARTED: {\n    key: \"STARTED\",\n    stage: \"HIRED\",\n    labelKey: \"status.STARTED\",\n    color: \"success\",\n    boardColumn: \"OFFER\",\n    order: 410,\n  },\n\n  // =========================\n  // REJECTED\n  // =========================\n  REJECTED_PRE_INTERVIEW: {\n    key: \"REJECTED_PRE_INTERVIEW\",\n    stage: \"REJECTED\",\n    labelKey: \"status.REJECTED_PRE_INTERVIEW\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 940,\n  },\n  REJECTED_AFTER_INTERVIEW: {\n    key: \"REJECTED_AFTER_INTERVIEW\",\n    stage: \"REJECTED\",\n    labelKey: \"status.REJECTED_AFTER_INTERVIEW\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 950,\n  },\n  ROLE_CLOSED: {\n    key: \"ROLE_CLOSED\",\n    stage: \"REJECTED\",\n    labelKey: \"status.ROLE_CLOSED\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 960,\n  },\n\n  // =========================\n  // NO_RESPONSE\n  // =========================\n  GHOSTING: {\n    key: \"GHOSTING\",\n    stage: \"NO_RESPONSE\",\n    labelKey: \"status.GHOSTING\",\n    color: \"danger\",\n    boardColumn: \"REJECTED\",\n    order: 970,\n  },\n\n  // =========================\n  // ARCHIVED\n  // =========================\n  ARCHIVED_GENERAL: {\n    key: \"ARCHIVED_GENERAL\",\n    stage: \"ARCHIVED\",\n    labelKey: \"status.ARCHIVED_GENERAL\",\n    color: \"neutral\",\n    boardColumn: \"REJECTED\",\n    order: 980,\n  },\n  KEEP_IN_TOUCH: {\n    key: \"KEEP_IN_TOUCH\",\n    stage: \"ARCHIVED\",\n    labelKey: \"status.KEEP_IN_TOUCH\",\n    color: \"neutral\",\n    boardColumn: \"REJECTED\",\n    order: 990,\n  },\n  WITHDREW_BEFORE_START: {\n    key: \"WITHDREW_BEFORE_START\",\n    stage: \"ARCHIVED\",\n    labelKey: \"status.WITHDREW_BEFORE_START\",\n    color: \"neutral\",\n    boardColumn: \"REJECTED\",\n    order: 995,\n  },\n};\n\nexport const STATUS: Record<StatusKey, StatusMeta> = Object.fromEntries(\n  Object.entries(STATUS_BASE).map(([k, v]) => [k, { ...v, boardColumn: v.stage }]),\n) as Record<StatusKey, StatusMeta>;\n\nexport const STATUS_KEYS: readonly StatusKey[] = Object.keys(STATUS) as StatusKey[];\n\nexport const BOARD_COLUMNS: Record<\n  BoardColumnKey,\n  { key: BoardColumnKey; labelKey: string; order: number }\n> = {\n  ACTIVE: { key: \"ACTIVE\", labelKey: \"board.column.ACTIVE\", order: 1 },\n  INTERVIEW: { key: \"INTERVIEW\", labelKey: \"board.column.INTERVIEW\", order: 2 },\n  OFFER: { key: \"OFFER\", labelKey: \"board.column.OFFER\", order: 3 },\n  HIRED: { key: \"HIRED\", labelKey: \"board.column.HIRED\", order: 4 },\n  REJECTED: { key: \"REJECTED\", labelKey: \"board.column.REJECTED\", order: 5 },\n  NO_RESPONSE: { key: \"NO_RESPONSE\", labelKey: \"board.column.NO_RESPONSE\", order: 6 },\n  ARCHIVED: { key: \"ARCHIVED\", labelKey: \"board.column.ARCHIVED\", order: 7 },\n};\n\nexport const BOARD_COLUMNS_LIST: readonly { key: BoardColumnKey; labelKey: string; order: number }[] =\n  BOARD_COLUMN_KEYS.map((k) => BOARD_COLUMNS[k]).sort((a, b) => a.order - b.order);\n\n/**\n *  mapping   UI.\n * Badge/Board/Charts    meta.color.\n */\nexport const STATUS_COLOR_CLASS: Record<StatusColor, string> = {\n  neutral: \"bg-muted text-foreground\",\n  info: \"bg-blue-100 text-blue-900\",\n  warning: \"bg-amber-100 text-amber-900\",\n  success: \"bg-emerald-100 text-emerald-900\",\n  danger: \"bg-red-100 text-red-900\",\n  purple: \"bg-purple-100 text-purple-900\",\n};\n\n\n/**\n * Dot variant (background only).\n *\n * Derived from StatusColor, so changing meta.color updates dots everywhere.\n */\nexport const STATUS_COLOR_DOT_CLASS: Record<StatusColor, string> = {\n  // Unified status tokens (tailwind -> CSS vars in theme files)\n  neutral: \"bg-status-neutral\",\n  info: \"bg-status-info\",\n  warning: \"bg-status-warning\",\n  success: \"bg-status-success\",\n  danger: \"bg-status-danger\",\n  purple: \"bg-status-purple\",\n};\n\n/**\n *    .\n */\nexport const STATUS_COLOR_HEX: Record<StatusColor, string> = {\n  neutral: \"#64748b\",\n  info: \"#2563eb\",\n  warning: \"#d97706\",\n  success: \"#059669\",\n  danger: \"#dc2626\",\n  purple: \"#7c3aed\",\n};\n\n\n\n/**\n * Stage colors: keep consistent across the whole UI (dots, charts, badges).\n * We intentionally map \"stage\" -> color, so HR_CALL_SCHEDULED and TECH_* share INTERVIEW color etc.\n */\nexport const STAGE_COLOR: Record<Stage, StatusColor> = {\n  ACTIVE: \"info\",\n  INTERVIEW: \"purple\",\n  OFFER: \"warning\",\n  HIRED: \"success\",\n  REJECTED: \"danger\",\n  NO_RESPONSE: \"neutral\",\n  ARCHIVED: \"neutral\",\n};\n\nexport function getStageColorForStatus(status: StatusKey): StatusColor {\n  return STAGE_COLOR[getStatusMeta(status).stage];\n}\n\n/**\n * Column (board stage) colors for charts/legends.\n */\nexport const BOARD_COLUMN_COLOR: Record<BoardColumnKey, StatusColor> = {\n  ACTIVE: \"info\",\n  INTERVIEW: \"purple\",\n  OFFER: \"warning\",\n  HIRED: \"success\",\n  REJECTED: \"danger\",\n  NO_RESPONSE: \"neutral\",\n  ARCHIVED: \"neutral\",\n};\n\nexport const BOARD_COLUMN_COLOR_HEX: Record<BoardColumnKey, string> = {\n  ACTIVE: STATUS_COLOR_HEX[BOARD_COLUMN_COLOR.ACTIVE],\n  INTERVIEW: STATUS_COLOR_HEX[BOARD_COLUMN_COLOR.INTERVIEW],\n  OFFER: STATUS_COLOR_HEX[BOARD_COLUMN_COLOR.OFFER],\n  HIRED: STATUS_COLOR_HEX[BOARD_COLUMN_COLOR.HIRED],\n  REJECTED: STATUS_COLOR_HEX[BOARD_COLUMN_COLOR.REJECTED],\n  NO_RESPONSE: STATUS_COLOR_HEX[BOARD_COLUMN_COLOR.NO_RESPONSE],\n  ARCHIVED: STATUS_COLOR_HEX[BOARD_COLUMN_COLOR.ARCHIVED],\n};\nexport const ALL_STATUSES: StatusMeta[] = Object.values(STATUS).sort(\n  (a, b) => a.order - b.order\n);\n\nexport function isStatusKey(v: unknown): v is StatusKey {\n  return typeof v === \"string\" && (v as StatusKey) in STATUS;\n}\n\nexport function getStatusMeta(status: StatusKey): StatusMeta {\n  return STATUS[status];\n}\n\nexport function getStage(status: StatusKey): Stage {\n  return STATUS[status].stage;\n}\n\nexport function getBoardColumn(status: StatusKey): BoardColumnKey {\n  const meta = STATUS[status];\n  // Defensive: in case legacy/invalid data slipped through.\n  return meta?.boardColumn ?? \"ACTIVE\";\n}\n\nexport function defaultStatusForBoardColumn(col: BoardColumnKey): StatusKey {\n  const first = ALL_STATUSES\n    .filter((s) => s.boardColumn === col)\n    .sort((a, b) => a.order - b.order)[0];\n  return (first?.key ?? \"SAVED\") as StatusKey;\n}\n\nexport function statusesForStage(stage: Stage): StatusMeta[] {\n  return ALL_STATUSES.filter((s) => s.stage === stage);\n}\n\n/**\n * Legacy process.status ( enum) ->  StatusKey.\n *    /  .\n */\nexport type LegacyProcessStatus =\n  | \"SAVED\"\n  | \"PLANNED\"\n  | \"APPLIED\"\n  | \"VIEWED\"\n  | \"INTERVIEW_1\"\n  | \"INTERVIEW_2\"\n  | \"TEST_TASK\"\n  | \"OFFER\"\n  | \"REJECTED\"\n  | \"NO_RESPONSE\";\n\nconst LEGACY_TO_STATUS: Record<LegacyProcessStatus, StatusKey> = {\n  SAVED: \"SAVED\",\n  PLANNED: \"READY_TO_APPLY\",\n  APPLIED: \"APPLIED\",\n  VIEWED: \"RESPONSE_RECEIVED\",\n  INTERVIEW_1: \"HR_CALL_SCHEDULED\",\n  INTERVIEW_2: \"TECH_SCHEDULED\",\n  TEST_TASK: \"TEST_TASK_RECEIVED\",\n  OFFER: \"OFFER_RECEIVED\",\n  REJECTED: \"REJECTED_PRE_INTERVIEW\",\n  NO_RESPONSE: \"GHOSTING\",\n};\n\nexport function legacyStatusToStatusKey(v: unknown): StatusKey | null {\n  if (typeof v !== \"string\") return null;\n  const up = v.toUpperCase() as LegacyProcessStatus;\n  return up in LEGACY_TO_STATUS ? LEGACY_TO_STATUS[up] : null;\n}\n\nfunction asRecord(v: unknown): Record<string, unknown> | null {\n  return v && typeof v === \"object\" ? (v as Record<string, unknown>) : null;\n}\n\n/**\n * Normalize a raw status value (legacy strings, any casing) into StatusKey.\n * Returns null if value is not recognized.\n */\nexport function normalizeStatusKey(v: unknown): StatusKey | null {\n  // 1) Already a valid StatusKey\n  if (isStatusKey(v)) return v;\n\n  // 2) Legacy enum values (older versions)\n  const legacy = legacyStatusToStatusKey(v);\n  if (legacy) return legacy;\n\n  // 3) Be tolerant to different casing / spaces / hyphens\n  if (typeof v === \"string\") {\n    const up = v.trim().toUpperCase();\n    const normalized = up.replace(/[\\s-]+/g, \"_\");\n    if (isStatusKey(normalized)) return normalized;\n\n    // 4) If someone accidentally stored a board column key instead of subStatus,\n    // map it to the default StatusKey for that column so analytics/board stay consistent.\n    if ((BOARD_COLUMN_KEYS as readonly string[]).includes(normalized)) {\n      return defaultStatusForBoardColumn(normalized as BoardColumnKey);\n    }\n  }\n\n  return null;\n}\n\n/**\n *   :\n * -    process.stage + process.subStatus ( subStatus )    \n * -    legacy process.status\n * -    SAVED/ACTIVE\n */\nexport function normalizeAppStatus(app: unknown): { stage: Stage; subStatus: StatusKey; changed: boolean } {\n  const obj = asRecord(app);\n  const process = asRecord(obj?.[\"process\"]);\n\n  const stageIn = process?.[\"stage\"];\n  const subIn = process?.[\"subStatus\"];\n\n  if (typeof stageIn === \"string\" && typeof subIn === \"string\" && isStatusKey(subIn)) {\n    return {\n      stage: STATUS[subIn].stage,\n      subStatus: subIn,\n      changed: stageIn !== STATUS[subIn].stage,\n    };\n  }\n\n  const legacy = legacyStatusToStatusKey(process?.[\"status\"]);\n  if (legacy) {\n    return { stage: STATUS[legacy].stage, subStatus: legacy, changed: true };\n  }\n\n  return { stage: \"ACTIVE\", subStatus: \"SAVED\", changed: true };\n}\n\n/**\n * Back-compat alias: older code imported normalizeStatus() expecting app normalization.\n */\nexport const normalizeStatus = normalizeAppStatus;\n\nexport function getRepresentativeStatusForColumn(col: BoardColumnKey): StatusKey {\n  // Pick the earliest status (by order) that belongs to this board column.\n  const found = STATUS_KEYS.map((k) => STATUS[k])\n    .filter((m) => m.boardColumn === col)\n    .sort((a, b) => a.order - b.order)[0];\n  return found?.key ?? STATUS_KEYS[0];\n}\n","import type { Firestore } from \"firebase/firestore\";\n\nimport {\n  type ApplicationDoc,\n  type ProcessStatus,\n  createApplication,\n  autoMarkGhosting,\n  ensureUserDoc,\n  queryAllActiveApplications,\n  queryFollowUpsDue,\n  queryPipelineByStatus,\n  queryTodayTopPriority,\n  getApplicationHistory,\n} from \"src/features/applications/firestoreApplications\";\n\nexport type ApplicationsRepo = ReturnType<typeof createApplicationsRepo>;\n\n/**\n * DI-friendly repository for ApplicationsPage.\n * The page (composition layer) injects Firestore; the model/hooks stay db-agnostic.\n */\nexport function createApplicationsRepo(db: Firestore) {\n  return {\n    ensureUserDoc: (userId: string) => ensureUserDoc(db, userId),\n\n    createApplication: (\n      userId: string,\n      payload: Parameters<typeof createApplication>[2]\n    ) => createApplication(db, userId, payload),\n\n    queryPipelineByStatus: (\n      userId: string,\n      status: ProcessStatus,\n      limit: number\n    ) => queryPipelineByStatus(db, userId, status, limit),\n\n    queryAllActiveApplications: (userId: string, limit: number) =>\n      queryAllActiveApplications(db, userId, limit),\n\n    queryTodayTopPriority: (userId: string, limit: number) =>\n      queryTodayTopPriority(db, userId, limit),\n\n    getApplicationHistory: (userId: string, appId: string, take: number) =>\n      getApplicationHistory(db, userId, appId, take),\n\n    queryFollowUpsDue: (userId: string, limit: number) =>\n      queryFollowUpsDue(db, userId, limit),\n\n    autoMarkGhosting: (userId: string, rows: Array<{ id: string; data: ApplicationDoc }>) =>\n      autoMarkGhosting(db, userId, rows, 30),\n  };\n}\n\nexport type { ApplicationDoc, ProcessStatus };\n","import React from \"react\";\n\nexport type IconName =\n  | \"user\"\n  | \"question\"\n  | \"loop\"\n  | \"add\"\n  | \"total\"\n  | \"new\"\n  | \"applied\"\n  | \"saved\"\n  | \"interview\"\n  | \"offer\"\n  | \"hired\"\n  | \"rejected\"\n  | \"no_response\";\n\nconst ICONS: Record<IconName, string> = {\n  user: \"\",\n  question: \"\",\n  loop: \"\",\n  add: \"\",\n\n  total: \"\",\n  new: \"\",\n  applied: \"\",\n  saved: \"\",\n  interview: \"\",\n  offer: \"\",\n  hired: \"\",\n  rejected: \"\",\n  no_response: \"\",\n};\n\nconst COLOR: Record<IconName, string> = {\n  // Action rows\n  user: \"text-foreground\",\n  question: \"text-foreground\",\n  loop: \"text-foreground\",\n  add: \"text-foreground\",\n\n  // KPI ( /)\n  total: \"text-foreground\",\n  new: \"text-slate-700 dark:text-slate-200\",\n  applied: \"text-status-info\",\n  saved: \"text-status-info\",\n  interview: \"text-status-purple\",\n  offer: \"text-status-warning\",\n  hired: \"text-status-success\",\n  rejected: \"text-status-danger\",\n  no_response: \"text-status-neutral\",\n};\n\nexport type DashboardIconProps = {\n  name: IconName;\n  size?: number;\n  className?: string;\n  title?: string;\n};\n\nexport function DashboardIcon({\n  name,\n  size = 18,\n  className,\n  title,\n}: DashboardIconProps) {\n  return (\n    <span\n      aria-hidden={title ? undefined : true}\n      title={title}\n      style={{ fontSize: size }}\n      className={[\n        \"leading-none\",\n        COLOR[name],\n        className ?? \"\",\n      ].join(\" \").trim()}\n    >\n      {ICONS[name]}\n    </span>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport type { BoardColumnKey } from \"src/entities/application/model/status\";\nimport { BOARD_COLUMN_COLOR, STATUS_COLOR_DOT_CLASS } from \"src/entities/application/model/status\";\nimport { KpiCard, CardButton, Button } from \"src/shared/ui\";\nimport { Card } from \"src/shared/ui/Card/Card\";\n\nimport { DashboardIcon } from \"../DashboardIcon\";\n\n\ntype Summary = {\n  total: number;\n  byColumn: Record<BoardColumnKey, number>;\n};\n\ntype Status = BoardColumnKey;\n\ntype Props = {\n  isLoading: boolean;\n  error?: string | null;\n  summary: Summary;\n  onGoJobs?: (status?: Status) => void;\n\n  onAddFirstJob?: () => void;\n};\n\nfunction MiniStat({ label, value }: { label: string; value: number }) {\n  return (\n    <div className=\"rounded-2xl border border-border bg-muted/30 p-3\">\n      <div className=\"text-xs text-muted-foreground\">{label}</div>\n      <div className=\"mt-1 text-base font-semibold text-foreground\">{value}</div>\n    </div>\n  );\n}\n\nfunction StatusTitle({ col, label }: { col: BoardColumnKey; label: string }) {\n  const color = BOARD_COLUMN_COLOR[col];\n  return (\n    <span className=\"inline-flex items-center gap-2\">\n      <span className={\"h-2 w-2 rounded-full \" + STATUS_COLOR_DOT_CLASS[color]} />\n      <span>{label}</span>\n    </span>\n  );\n}\n\nexport function DashboardStats({\n  isLoading,\n  error,\n  summary,\n  onGoJobs,\n  onAddFirstJob,\n}: Props) {\n  const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n\n  if (isLoading) {\n    return (\n      <Card padding=\"md\" className=\"rounded-3xl\">\n        <div className=\"text-sm text-muted-foreground\">Loading</div>\n      </Card>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card padding=\"md\" className=\"rounded-3xl\">\n        <div className=\"text-sm font-medium text-foreground\">Couldnt load jobs</div>\n        <div className=\"mt-1 text-sm text-muted-foreground\">{error}</div>\n      </Card>\n    );\n  }\n\n  if (summary.total === 0) {\n    return (\n      <Card padding=\"md\" className=\"rounded-3xl\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"min-w-0\">\n            <div className=\"text-base font-semibold text-foreground\">\n              {t(\"stats.empty.title\", \"Add your first job\")}\n            </div>\n            <div className=\"mt-1 text-sm text-muted-foreground\">\n              {t(\n                \"stats.empty.subtitle\",\n                \"Start tracking your applications  your statistics will appear here.\",\n              )}\n            </div>\n          </div>\n\n          <Button variant=\"outline\" shadow=\"sm\" onClick={onAddFirstJob}>\n            {t(\"stats.empty.cta\", \"Add job\")}\n          </Button>\n        </div>\n\n        <div className=\"mt-4 grid grid-cols-2 gap-3 sm:grid-cols-6\">\n          <MiniStat label={t(\"board.column.ACTIVE\", \"Active\")} value={0} />\n          <MiniStat label={t(\"board.column.INTERVIEW\", \"Interview\")} value={0} />\n          <MiniStat label={t(\"board.column.OFFER\", \"Offer\")} value={0} />\n          <MiniStat label={t(\"board.column.HIRED\", \"Hired\")} value={0} />\n          <MiniStat label={t(\"board.column.REJECTED\", \"Rejected\")} value={0} />\n          <MiniStat label={t(\"board.column.NO_RESPONSE\", \"No response\")} value={0} />\n        </div>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"text-lg font-semibold text-foreground\">{t(\"stats.title\", \"Statistics\")}</div>\n\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3\">\n        <CardButton onClick={() => onGoJobs?.(\"ACTIVE\")}>\n          <KpiCard\n            title={<StatusTitle col=\"ACTIVE\" label={t(\"board.column.ACTIVE\", \"Active\")} />}\n            value={summary.byColumn.ACTIVE}\n            icon={<DashboardIcon name=\"applied\" />}\n          />\n        </CardButton>\n\n        <CardButton onClick={() => onGoJobs?.(\"INTERVIEW\")}>\n          <KpiCard\n            title={<StatusTitle col=\"INTERVIEW\" label={t(\"board.column.INTERVIEW\", \"Interview\")} />}\n            value={summary.byColumn.INTERVIEW}\n            icon={<DashboardIcon name=\"interview\" />}\n          />\n        </CardButton>\n\n        <CardButton onClick={() => onGoJobs?.(\"OFFER\")}>\n          <KpiCard\n            title={<StatusTitle col=\"OFFER\" label={t(\"board.column.OFFER\", \"Offer\")} />}\n            value={summary.byColumn.OFFER}\n            icon={<DashboardIcon name=\"offer\" />}\n          />\n        </CardButton>\n\n        <CardButton onClick={() => onGoJobs?.(\"HIRED\")}>\n          <KpiCard\n            title={<StatusTitle col=\"HIRED\" label={t(\"board.column.HIRED\", \"Hired\")} />}\n            value={summary.byColumn.HIRED}\n            icon={<DashboardIcon name=\"hired\" />}\n          />\n        </CardButton>\n\n        <CardButton onClick={() => onGoJobs?.(\"REJECTED\")}>\n          <KpiCard\n            title={<StatusTitle col=\"REJECTED\" label={t(\"board.column.REJECTED\", \"Rejected\")} />}\n            value={summary.byColumn.REJECTED}\n            icon={<DashboardIcon name=\"rejected\" />}\n          />\n        </CardButton>\n\n        <CardButton onClick={() => onGoJobs?.(\"NO_RESPONSE\")}> \n          <KpiCard\n            title={<StatusTitle col=\"NO_RESPONSE\" label={t(\"board.column.NO_RESPONSE\", \"No response\")} />}\n            value={summary.byColumn.NO_RESPONSE}\n            icon={<DashboardIcon name=\"no_response\" />}\n          />\n        </CardButton>\n      </div>\n    </div>\n  );\n}\n","import type { TFunction } from \"i18next\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  BOARD_COLUMN_KEYS,\n  BOARD_COLUMNS_LIST,\n  type BoardColumnKey,\n  BOARD_COLUMN_COLOR_HEX,\n} from \"src/entities/application/model/status\";\nimport { Card, DonutChart } from \"src/shared/ui\";\n\ntype Summary = {\n  total: number;\n  byColumn: Record<BoardColumnKey, number>;\n};\n\nconst PIPELINE_COLS: BoardColumnKey[] = BOARD_COLUMN_KEYS.filter((c) => c !== \"ARCHIVED\");\n\nfunction colLabel(t: TFunction, col: BoardColumnKey): string {\n  const meta = BOARD_COLUMNS_LIST.find((c) => c.key === col);\n  return t(meta?.labelKey ?? `board.column.${col}`, { defaultValue: col });\n}\n\nexport function DashboardPipelineCard({\n  summary,\n  size,\n  stroke,\n}: {\n  summary: Summary;\n  size: number;\n  stroke: number;\n}) {\n  const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n\n  const slices = React.useMemo(() => {\n    return PIPELINE_COLS.map((col) => {\n      return {\n        label: colLabel(t, col),\n        value: summary.byColumn[col] ?? 0,\n        color: BOARD_COLUMN_COLOR_HEX[col],\n        className: \"\",\n      };\n    });\n  }, [summary.byColumn, t]);\n\n  return (\n    <Card className=\"p-6\">\n      <div className=\"text-sm font-semibold text-foreground\">\n        {t(\"pipeline.title\", \"Pipeline\")}\n      </div>\n      <div className=\"text-xs text-muted-foreground\">\n        {t(\"pipeline.subtitle\", \"By stage\")}\n      </div>\n\n      <div className=\"mt-5 flex items-center justify-center\">\n        <DonutChart\n          size={size}\n          stroke={stroke}\n          slices={slices}\n          centerTop={t(\"pipeline.total\", \"Total\")}\n          centerBottom={String(summary.total)}\n        />\n      </div>\n    </Card>\n  );\n}\n","import { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { Button } from \"src/shared/ui\";\nimport { Card } from \"src/shared/ui/Card/Card\";\n\nexport type RecentJob = {\n  id: string;\n  title?: string | null;\n  company?: string | null;\n  status?: unknown;\n  createdAt?: unknown;\n};\n\ntype Props = {\n  jobs: RecentJob[];\n  onViewAll: () => void;\n  onOpenJob?: (jobId: string) => void;\n  className?: string;\n};\n\nfunction toMillis(value: unknown): number | null {\n  if (!value) return null;\n\n  if (typeof (value as { toMillis?: unknown }).toMillis === \"function\") {\n    return (value as { toMillis: () => number }).toMillis();\n  }\n\n  if (typeof value === \"number\") return value;\n\n  const seconds = (value as { seconds?: unknown }).seconds;\n  if (typeof seconds === \"number\") return seconds * 1000;\n\n  return null;\n}\n\ntype Translator = (\n  key: string,\n  fallback: string,\n  options?: Record<string, unknown>,\n) => string;\n\nfunction formatRelative(\n  t: Translator,\n  ms: number | null,\n  nowMs: number,\n): string | null {\n  if (!ms) return null;\n\n  const diff = nowMs - ms;\n  if (diff < 0) return t(\"recent.time.justNow\", \"just now\");\n\n  const sec = Math.floor(diff / 1000);\n  if (sec < 60) return t(\"recent.time.justNow\", \"just now\");\n\n  const min = Math.floor(sec / 60);\n  if (min < 60)\n    return t(\"recent.time.minutesAgo\", \"{{count}}m ago\", {\n      count: min,\n    });\n\n  const hr = Math.floor(min / 60);\n  if (hr < 24)\n    return t(\"recent.time.hoursAgo\", \"{{count}}h ago\", {\n      count: hr,\n    });\n\n  const days = Math.floor(hr / 24);\n  if (days < 7)\n    return t(\"recent.time.daysAgo\", \"{{count}}d ago\", {\n      count: days,\n    });\n\n  const weeks = Math.floor(days / 7);\n  if (weeks < 5)\n    return t(\"recent.time.weeksAgo\", \"{{count}}w ago\", {\n      count: weeks,\n    });\n\n  const months = Math.floor(days / 30);\n  if (months < 12)\n    return t(\"recent.time.monthsAgo\", \"{{count}}mo ago\", {\n      count: months,\n    });\n\n  const years = Math.floor(days / 365);\n  return t(\"recent.time.yearsAgo\", \"{{count}}y ago\", {\n    count: years,\n  });\n}\n\nfunction normalizeStatus(\n  value: unknown,\n):\n  | \"new\"\n  | \"saved\"\n  | \"applied\"\n  | \"interview\"\n  | \"offer\"\n  | \"rejected\"\n  | \"unknown\" {\n  const raw = typeof value === \"string\" ? value.trim().toLowerCase() : \"\";\n  if (raw === \"new\") return \"new\";\n  if (raw === \"saved\") return \"saved\";\n  if (raw === \"applied\") return \"applied\";\n  if (raw === \"interview\") return \"interview\";\n  if (raw === \"offer\") return \"offer\";\n  if (raw === \"rejected\") return \"rejected\";\n  return \"unknown\";\n}\n\nfunction statusBadgeClass(st: ReturnType<typeof normalizeStatus>): string {\n  switch (st) {\n    case \"new\":\n      return \"border-sky-200 bg-sky-50 text-sky-700 dark:border-sky-900/50 dark:bg-sky-950/40 dark:text-sky-200\";\n    case \"saved\":\n      return \"border-amber-200 bg-amber-50 text-amber-700 dark:border-amber-900/50 dark:bg-amber-950/40 dark:text-amber-200\";\n    case \"applied\":\n      return \"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/40 dark:text-blue-200\";\n    case \"interview\":\n      return \"border-purple-200 bg-purple-50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/40 dark:text-purple-200\";\n    case \"offer\":\n      return \"border-emerald-200 bg-emerald-50 text-emerald-700 dark:border-emerald-900/50 dark:bg-emerald-950/40 dark:text-emerald-200\";\n    case \"rejected\":\n      return \"border-red-200 bg-red-50 text-red-700 dark:border-red-900/50 dark:bg-red-950/40 dark:text-red-200\";\n    default:\n      return \"border-border bg-muted text-foreground\";\n  }\n}\n\nexport function DashboardRecentJobsCard({\n  jobs,\n  onViewAll,\n  onOpenJob,\n  className,\n}: Props) {\n  const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n  const [nowMs] = useState<number>(() => Date.now());\n\n  const tr: Translator = (key, fallback, options) =>\n    String(t(key, { defaultValue: fallback, ...(options ?? {}) }));\n\n  return (\n    <Card\n      padding=\"md\"\n      className={[\"flex h-full flex-col rounded-3xl\", className]\n        .filter(Boolean)\n        .join(\" \")}\n    >\n      <div className=\"flex items-center justify-between\">\n        <div className=\"text-base font-semibold text-foreground\">\n          {tr(\"recent.title\", \"Recent applications\")}\n        </div>\n        <Button variant=\"link\" className=\"px-0\" onClick={onViewAll}>\n          {tr(\"recent.viewAll\", \"View all\")}\n        </Button>\n      </div>\n\n      {jobs.length === 0 ? (\n        <div className=\"mt-3 text-sm text-muted-foreground\">\n          {tr(\n            \"recent.empty\",\n            \"No applications yet. Add your first one to see activity here.\",\n          )}\n        </div>\n      ) : (\n        <div className=\"mt-4 flex-1 space-y-2 overflow-y-auto pr-1\">\n          {jobs.map((j) => {\n            const rel = formatRelative(tr, toMillis(j.createdAt), nowMs);\n            const normalized = normalizeStatus(j.status);\n            const statusLabel =\n              normalized === \"unknown\"\n                ? tr(\"status.unknown\", \"Unknown\")\n                : tr(`status.${normalized}`, normalized);\n\n            return (\n              <button\n                key={j.id}\n                type=\"button\"\n                onClick={() => (onOpenJob ? onOpenJob(j.id) : onViewAll())}\n                className={[\n                  \"w-full text-left\",\n                  \"rounded-lg border border-border bg-background p-3\",\n                  \"transition-colors\",\n                  \"hover:bg-muted\",\n                  \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border\",\n                  \"cursor-pointer\",\n                ].join(\" \")}\n              >\n                <div className=\"flex items-start justify-between gap-3\">\n                  <div className=\"min-w-0\">\n                    <div className=\"truncate text-sm font-medium text-foreground\">\n                      {j.title || tr(\"recent.untitled\", \"Untitled role\")}\n                    </div>\n                    <div className=\"truncate text-xs text-muted-foreground\">\n                      {j.company || tr(\"recent.company\", \"Company\")}\n                    </div>\n                  </div>\n\n                  <div className=\"shrink-0 text-right\">\n                    <div\n                      className={[\n                        \"inline-flex rounded-full border px-2 py-0.5 text-xs font-medium\",\n                        statusBadgeClass(normalized),\n                      ].join(\" \")}\n                    >\n                      {statusLabel}\n                    </div>\n\n                    {rel && (\n                      <div className=\"mt-1 text-xs text-muted-foreground\">\n                        {tr(\"recent.created\", \"Created\")}&nbsp;{rel}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </button>\n            );\n          })}\n        </div>\n      )}\n    </Card>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { ActionRow } from \"src/shared/ui\";\n\nimport { DashboardIcon } from \"../DashboardIcon\";\n\ntype Props = {\n  hasJobs: boolean;\n  onGoProfile: () => void;\n  onGoQuestions: () => void;\n  onGoLoop: () => void;\n  onGoJobs: () => void;\n  className?: string;\n};\n\nexport function DashboardOnboardingActions({\n  hasJobs,\n  onGoProfile,\n  onGoQuestions,\n  onGoLoop,\n  onGoJobs,\n  className,\n}: Props) {\n  const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n\n  const goText = t(\"common.go\");\n  const doneText = t(\"common.done\");\n\n  return (\n    <div className={className}>\n      <div className=\"grid grid-cols-1 gap-3 md:max-w-[520px]\">\n        <ActionRow\n          icon={<DashboardIcon name=\"user\" />}\n          title={t(\"onboarding.setupProfile\")}\n          onGo={onGoProfile}\n          goText={goText}\n          doneText={doneText}\n        />\n\n        <ActionRow\n          icon={<DashboardIcon name=\"question\" />}\n          title={t(\"onboarding.answerQuestions\")}\n          onGo={onGoQuestions}\n          goText={goText}\n          doneText={doneText}\n        />\n\n        <ActionRow\n          icon={<DashboardIcon name=\"loop\" />}\n          title={t(\"onboarding.startFirstLoop\")}\n          onGo={onGoLoop}\n          goText={goText}\n          doneText={doneText}\n        />\n\n        <ActionRow\n          icon={<DashboardIcon name=\"add\" />}\n          title={hasJobs ? t(\"onboarding.addAnotherJob\") : t(\"onboarding.addFirstJob\")}\n          onGo={onGoJobs}\n          goText={goText}\n          doneText={doneText}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { classNames } from \"src/shared/lib\";\nimport { Button, Modal } from \"src/shared/ui\";\n\nexport type DashboardLoopsFilterValue =\n  | { mode: \"all\" }\n  | { mode: \"selected\"; selectedLoopIds: string[] };\n\nexport type DashboardLoopOption = {\n  id: string;\n  name: string;\n};\n\ntype Props = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  loops: DashboardLoopOption[];\n  value: DashboardLoopsFilterValue;\n  onChange: (next: DashboardLoopsFilterValue) => void;\n};\n\nfunction uniq(ids: string[]): string[] {\n  return Array.from(new Set(ids));\n}\n\nexport function DashboardLoopsFilterModal({\n  open,\n  onOpenChange,\n  loops,\n  value,\n  onChange,\n}: Props) {\n    const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n\n  const isAll = value.mode === \"all\";\n  const selected = React.useMemo(() => {\n    if (value.mode !== \"selected\") return [];\n    return uniq(value.selectedLoopIds);\n  }, [value]);\n\n  const setAll = React.useCallback(() => {\n    onChange({ mode: \"all\" });\n  }, [onChange]);\n\n  const setSelectedMode = React.useCallback(() => {\n    onChange({ mode: \"selected\", selectedLoopIds: selected });\n  }, [onChange, selected]);\n\n  const toggleLoop = React.useCallback(\n    (loopId: string) => {\n      const base = new Set(selected);\n      if (base.has(loopId)) base.delete(loopId);\n      else base.add(loopId);\n      onChange({ mode: \"selected\", selectedLoopIds: Array.from(base) });\n    },\n    [onChange, selected]\n  );\n\n  const selectAll = React.useCallback(() => {\n    onChange({ mode: \"selected\", selectedLoopIds: loops.map((l) => l.id) });\n  }, [loops, onChange]);\n\n  const clearAll = React.useCallback(() => {\n    onChange({ mode: \"selected\", selectedLoopIds: [] });\n  }, [onChange]);\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={t(\"loopsFilter.title\", \"Dashboard loops\")}\n      description={t(\n        \"loopsFilter.desc\",\n        \"Choose which loops should be included in dashboard stats and recent jobs.\"\n      )}\n      size=\"md\"\n    >\n      <div className=\"space-y-4\">\n        <div className=\"space-y-2\">\n          <label className=\"flex items-center gap-2\">\n            <input\n              type=\"radio\"\n              name=\"dashboard-loops-filter\"\n              checked={isAll}\n              onChange={setAll}\n            />\n            <span className=\"text-sm text-foreground\">\n              {t(\"loopsFilter.all\", \"All loops\")}\n            </span>\n          </label>\n\n          <label className=\"flex items-center gap-2\">\n            <input\n              type=\"radio\"\n              name=\"dashboard-loops-filter\"\n              checked={!isAll}\n              onChange={setSelectedMode}\n            />\n            <span className=\"text-sm text-foreground\">\n              {t(\"loopsFilter.selected\", \"Only selected loops\")}\n            </span>\n          </label>\n        </div>\n\n        {!isAll ? (\n          <div className=\"space-y-3\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                shape=\"pill\"\n                onClick={selectAll}\n              >\n                {t(\"loopsFilter.selectAll\", \"Select all\")}\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                shape=\"pill\"\n                onClick={clearAll}\n              >\n                {t(\"loopsFilter.clear\", \"Clear\")}\n              </Button>\n              <div className=\"text-xs text-muted-foreground\">\n                {t(\"loopsFilter.selectedCount\", \"Selected\")}: {selected.length}\n              </div>\n            </div>\n\n            <div className=\"rounded-xl border border-border bg-card\">\n              {loops.length === 0 ? (\n                <div className=\"p-4 text-sm text-muted-foreground\">\n                  {t(\"loopsFilter.noLoops\", \"No loops found.\")}\n                </div>\n              ) : (\n                <ul className=\"divide-y divide-border\">\n                  {loops.map((l) => {\n                    const checked = selected.includes(l.id);\n                    return (\n                      <li key={l.id} className=\"p-3\">\n                        <label className=\"flex items-center gap-3 cursor-pointer\">\n                          <input\n                            type=\"checkbox\"\n                            checked={checked}\n                            onChange={() => toggleLoop(l.id)}\n                          />\n                          <span\n                            className={classNames(\n                              \"text-sm\",\n                              checked ? \"text-foreground\" : \"text-muted-foreground\"\n                            )}\n                          >\n                            {l.name}\n                          </span>\n                        </label>\n                      </li>\n                    );\n                  })}\n                </ul>\n              )}\n            </div>\n          </div>\n        ) : null}\n\n        <div className=\"flex justify-end\">\n          <Button size=\"sm\" shape=\"pill\" onClick={() => onOpenChange(false)}>\n            {t(\"common.done\", \"Done\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\nimport { NavLink } from \"react-router-dom\";\n\nimport {\n  AppRoutes,\n  RoutePath,\n} from \"src/app/providers/router/routeConfig/routeConfig\";\n\ntype Tab = {\n  to: string;\n  labelKey: string;\n  fallback: string;\n  end?: boolean;\n};\n\nconst tabs: Tab[] = [\n  {\n    to: RoutePath[AppRoutes.DASHBOARD],\n    labelKey: \"tabs.overview\",\n    fallback: \"Overview\",\n    end: true,\n  },\n  {\n    to: RoutePath[AppRoutes.DASHBOARD_ANALYTICS],\n    labelKey: \"tabs.analytics\",\n    fallback: \"Analytics\",\n  },\n\n  {\n    to: RoutePath[AppRoutes.DASHBOARD_ACTIVITY],\n    labelKey: \"tabs.activity\",\n    fallback: \"Activity\",\n  },\n];\n\nexport function DashboardTabsNav() {\n   const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n\n  return (\n    <div className=\"flex flex-wrap items-center gap-2\">\n      {tabs.map((tab) => (\n        <NavLink\n          key={tab.to}\n          to={tab.to}\n          end={tab.end}\n          className={({ isActive }) =>\n            [\n              \"rounded-full border px-3 py-1 text-xs font-medium transition\",\n              isActive\n                ? \"border-foreground/30 bg-muted text-foreground\"\n                : \"border-border text-muted-foreground hover:bg-muted/60\",\n            ].join(\" \")\n          }\n        >\n          {t(tab.labelKey, tab.fallback)}\n        </NavLink>\n      ))}\n    </div>\n  );\n}\n","import type { RangeKey, SeriesKey } from \"./trends.types\";\n\nexport const SERIES: SeriesKey[] = [\n  \"ACTIVE\",\n  \"INTERVIEW\",\n  \"OFFER\",\n  \"HIRED\",\n  \"REJECTED\",\n  \"NO_RESPONSE\",\n];\n\nexport const SERIES_LABELS: Record<SeriesKey, string> = {\n  ACTIVE: \"Active\",\n  INTERVIEW: \"Interview\",\n  OFFER: \"Offer\",\n  HIRED: \"Hired\",\n  REJECTED: \"Rejected\",\n  NO_RESPONSE: \"No response\",\n};\n\nexport const LEGEND_COLOR: Record<SeriesKey, string> = {\n  // Unified status colors (same as dots/badges/charts in the whole app)\n  ACTIVE: \"rgb(var(--status-info))\",\n  INTERVIEW: \"rgb(var(--status-purple))\",\n  OFFER: \"rgb(var(--status-warning))\",\n  HIRED: \"rgb(var(--status-success))\",\n  REJECTED: \"rgb(var(--status-danger))\",\n  NO_RESPONSE: \"rgb(var(--status-neutral))\",\n};\n\nexport const DASH: Record<SeriesKey, string | undefined> = {\n  ACTIVE: undefined,\n  INTERVIEW: \"6 4\",\n  OFFER: \"2 3\",\n  HIRED: \"10 4\",\n  REJECTED: \"3 2\",\n  NO_RESPONSE: \"1 3\",\n};\n\nexport const RANGE_LABEL: Record<RangeKey, string> = {\n  \"7d\": \"7d\",\n  \"30d\": \"30d\",\n  \"90d\": \"90d\",\n  \"12m\": \"12m\",\n  custom: \"custom\"\n};\n\nexport function toNumberSafe(v: unknown): number {\n  const n = typeof v === \"number\" ? v : Number(v);\n  return Number.isFinite(n) ? n : 0;\n}\n\nexport function formatLabel(isoDate: string): string {\n  const [y, m, d] = isoDate.split(\"-\");\n  if (!y || !m || !d) return isoDate;\n  return `${d}.${m}`;\n}\n","import React from \"react\";\nimport {\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n} from \"recharts\";\n\nimport { DASH, LEGEND_COLOR, SERIES, SERIES_LABELS, formatLabel } from \"./trends.constants\";\nimport type { ModeKey, SeriesKey, TrendsPoint, VisibleMap } from \"./trends.types\";\n\nexport function TrendsChart({\n  points,\n  mode,\n  visible,\n  hoverKey,\n}: {\n  points: TrendsPoint[];\n  mode: ModeKey;\n  visible: VisibleMap;\n  hoverKey: SeriesKey | null;\n}) {\n  return (\n    <div className=\"h-[260px]\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <LineChart data={points} margin={{ top: 10, right: 16, bottom: 0, left: 0 }}>\n          <CartesianGrid vertical={false} strokeDasharray=\"3 3\" />\n          <XAxis\n            dataKey=\"date\"\n            tickLine={false}\n            axisLine={false}\n            tickMargin={8}\n            minTickGap={20}\n            tickFormatter={formatLabel}\n          />\n          <YAxis width={40} tickLine={false} axisLine={false} tickMargin={8} />\n          <Tooltip\n            cursor={{ strokeDasharray: \"3 3\" }}\n            formatter={(v: unknown, name: unknown) => {\n              const key = String(name) as SeriesKey;\n              const num = typeof v === \"number\" ? v : Number(v);\n              return [Number.isFinite(num) ? Math.round(num) : 0, SERIES_LABELS[key]];\n            }}\n            labelFormatter={(l) => `${l}  ${mode}`}\n          />\n\n          {SERIES.map((k) => {\n            if (!visible[k]) return null;\n            const isDim = hoverKey != null && hoverKey !== k;\n            return (\n              <Line\n                key={k}\n                type=\"monotone\"\n                dataKey={k}\n                stroke={LEGEND_COLOR[k]}\n                strokeWidth={2}\n                dot={false}\n                strokeDasharray={DASH[k]}\n                opacity={isDim ? 0.25 : 1}\n              />\n            );\n          })}\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { SERIES, SERIES_LABELS, LEGEND_COLOR } from \"./trends.constants\";\nimport type { SeriesKey, VisibleMap } from \"./trends.types\";\n\nexport function TrendsLegend({\n  visible,\n  hoverKey,\n  onToggle,\n  onHover,\n}: {\n  visible: VisibleMap;\n  hoverKey: SeriesKey | null;\n  onToggle: (k: SeriesKey) => void;\n  onHover: (k: SeriesKey | null) => void;\n}) {\n  return (\n    <div className=\"flex flex-wrap gap-2 text-xs\">\n      {SERIES.map((k) => {\n        const isOn = visible[k];\n        const isHover = hoverKey === k;\n        const color = LEGEND_COLOR[k];\n        return (\n          <button\n            key={k}\n            type=\"button\"\n            onClick={() => onToggle(k)}\n            onMouseEnter={() => onHover(k)}\n            onMouseLeave={() => onHover(null)}\n            className={\n              \"flex items-center gap-2 rounded-full border px-3 py-1 transition-colors \" +\n              (isOn ? \"bg-transparent\" : \"bg-transparent text-foreground\") +\n              (isHover ? \" ring-2 ring-ring\" : \"\")\n            }\n            // Design: no filled background for the whole pill.\n            // Active state is indicated by colored border + colored label + filled dot.\n            style={\n              isOn\n                ? { borderColor: color, color }\n                : { borderColor: \"var(--border)\" }\n            }\n          >\n            <span\n              className=\"inline-block h-2 w-2 rounded-full border\"\n              style={\n                isOn\n                  ? { backgroundColor: color, borderColor: color }\n                  : { backgroundColor: \"transparent\", borderColor: color }\n              }\n            />\n            {SERIES_LABELS[k]}\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n","import { STATUS_KEYS, isStatusKey, getBoardColumn, type StatusKey, type BoardColumnKey } from \"src/entities/application/model/status\";\n\nexport type MatchTimestampsLike = {\n  status: StatusKey;\n  createdAt: unknown;\n  updatedAt: unknown;\n  loopId?: string | undefined;\n};\n\nexport type Bucket = {\n  label: string;\n  startMs: number;\n  endMs: number;\n  counts: Record<StatusKey, number>;\n};\n\n\nexport function parseMs(v: unknown): number | null {\n  if (v == null) return null;\n\n  if (typeof v === \"number\" && Number.isFinite(v)) return v;\n\n  if (typeof v === \"string\") {\n    const t = Date.parse(v);\n    return Number.isFinite(t) ? t : null;\n  }\n\n  // Firestore Timestamp-like: { seconds, nanoseconds } or { toMillis() }\n  if (isTimestampWithToMillis(v)) {\n    const n = v.toMillis();\n    return typeof n === \"number\" && Number.isFinite(n) ? n : null;\n  }\n  if (isTimestampWithSeconds(v)) {\n    return Math.round(v.seconds * 1000);\n  }\n\n  return null;\n}\n\ntype TimestampWithToMillis = { toMillis: () => unknown };\ntype TimestampWithSeconds = { seconds: number; nanoseconds?: number };\n\nfunction isRecord(x: unknown): x is Record<string, unknown> {\n  return typeof x === \"object\" && x !== null;\n}\n\nfunction isTimestampWithToMillis(v: unknown): v is TimestampWithToMillis {\n  if (!isRecord(v)) return false;\n  return typeof v.toMillis === \"function\";\n}\n\nfunction isTimestampWithSeconds(v: unknown): v is TimestampWithSeconds {\n  if (!isRecord(v)) return false;\n  return typeof v.seconds === \"number\" && Number.isFinite(v.seconds);\n}\n\nexport function diffDays(aMs: number, bMs: number): number {\n  const d = Math.abs(bMs - aMs);\n  return Math.round(d / (24 * 60 * 60 * 1000));\n}\n\nexport function medianDays(values: number[]): number | null {\n  const xs = values.filter((x) => Number.isFinite(x)).sort((a, b) => a - b);\n  if (xs.length === 0) return null;\n  const mid = Math.floor(xs.length / 2);\n  return xs.length % 2 === 1 ? xs[mid] : Math.round((xs[mid - 1] + xs[mid]) / 2);\n}\n\nexport function normalizeAppStatus(s: unknown): StatusKey {\n  return isStatusKey(s) ? s : \"SAVED\";\n}\n\nfunction emptyCounts(): Record<StatusKey, number> {\n  const out = {} as Record<StatusKey, number>;\n  for (const k of STATUS_KEYS) out[k] = 0;\n  return out;\n}\n\nfunction startOfDayMs(ms: number): number {\n  const d = new Date(ms);\n  d.setHours(0, 0, 0, 0);\n  return d.getTime();\n}\n\nfunction startOfWeekMs(ms: number): number {\n  const d = new Date(startOfDayMs(ms));\n  const day = d.getDay(); // 0 Sun\n  const diff = (day + 6) % 7; // Mon=0\n  d.setDate(d.getDate() - diff);\n  return d.getTime();\n}\n\nfunction fmtDayLabel(ms: number, locale: string): string {\n  const d = new Date(ms);\n  return new Intl.DateTimeFormat(locale, { month: \"short\", day: \"2-digit\" }).format(d);\n}\n\nfunction fmtMonthLabel(ms: number, locale: string): string {\n  const d = new Date(ms);\n  return new Intl.DateTimeFormat(locale, { month: \"short\" }).format(d);\n}\n\nfunction fmtWeekLabel(ms: number, locale: string): string {\n  const d = new Date(ms);\n  // \"Wk 12\" style could be nicer, but keep stable: \"dd MMM\"\n  return new Intl.DateTimeFormat(locale, { month: \"short\", day: \"2-digit\" }).format(d);\n}\n\nexport function buildDailyBuckets(matches: MatchTimestampsLike[], opts: { days: number; byUpdatedAt: boolean; locale: string }): Bucket[] {\n  const now = Date.now();\n  const end = startOfDayMs(now) + 24 * 60 * 60 * 1000;\n  const start = end - opts.days * 24 * 60 * 60 * 1000;\n\n  const buckets: Bucket[] = [];\n  for (let i = 0; i < opts.days; i++) {\n    const bStart = start + i * 24 * 60 * 60 * 1000;\n    const bEnd = bStart + 24 * 60 * 60 * 1000;\n    buckets.push({\n      label: fmtDayLabel(bStart, opts.locale),\n      startMs: bStart,\n      endMs: bEnd,\n      counts: emptyCounts(),\n    });\n  }\n\n  for (const m of matches) {\n    const ts = parseMs(opts.byUpdatedAt ? m.updatedAt : m.createdAt);\n    if (ts == null) continue;\n    if (ts < start || ts >= end) continue;\n    const idx = Math.floor((startOfDayMs(ts) - start) / (24 * 60 * 60 * 1000));\n    const b = buckets[idx];\n    if (!b) continue;\n    const st = normalizeAppStatus(m.status);\n    b.counts[st] += 1;\n  }\n\n  return buckets;\n}\n\nexport function buildWeeklyBuckets(matches: MatchTimestampsLike[], opts: { weeks: number; byUpdatedAt: boolean; locale: string }): Bucket[] {\n  const now = Date.now();\n  const end = startOfWeekMs(now) + 7 * 24 * 60 * 60 * 1000;\n  const start = end - opts.weeks * 7 * 24 * 60 * 60 * 1000;\n\n  const buckets: Bucket[] = [];\n  for (let i = 0; i < opts.weeks; i++) {\n    const bStart = start + i * 7 * 24 * 60 * 60 * 1000;\n    const bEnd = bStart + 7 * 24 * 60 * 60 * 1000;\n    buckets.push({\n      label: fmtWeekLabel(bStart, opts.locale),\n      startMs: bStart,\n      endMs: bEnd,\n      counts: emptyCounts(),\n    });\n  }\n\n  for (const m of matches) {\n    const ts = parseMs(opts.byUpdatedAt ? m.updatedAt : m.createdAt);\n    if (ts == null) continue;\n    if (ts < start || ts >= end) continue;\n    const idx = Math.floor((startOfWeekMs(ts) - start) / (7 * 24 * 60 * 60 * 1000));\n    const b = buckets[idx];\n    if (!b) continue;\n    const st = normalizeAppStatus(m.status);\n    b.counts[st] += 1;\n  }\n\n  return buckets;\n}\n\nexport function buildMonthlyBuckets(matches: MatchTimestampsLike[], opts: { months: number; byUpdatedAt: boolean; locale: string }): Bucket[] {\n  const now = new Date();\n  now.setHours(0, 0, 0, 0);\n\n  const end = new Date(now.getFullYear(), now.getMonth() + 1, 1).getTime(); // next month start\n  const startDate = new Date(now.getFullYear(), now.getMonth() - (opts.months - 1), 1);\n  const start = startDate.getTime();\n\n  const buckets: Bucket[] = [];\n  for (let i = 0; i < opts.months; i++) {\n    const d = new Date(startDate.getFullYear(), startDate.getMonth() + i, 1);\n    const bStart = d.getTime();\n    const bEnd = new Date(d.getFullYear(), d.getMonth() + 1, 1).getTime();\n    buckets.push({\n      label: fmtMonthLabel(bStart, opts.locale),\n      startMs: bStart,\n      endMs: bEnd,\n      counts: emptyCounts(),\n    });\n  }\n\n  for (const m of matches) {\n    const ts = parseMs(opts.byUpdatedAt ? m.updatedAt : m.createdAt);\n    if (ts == null) continue;\n    if (ts < start || ts >= end) continue;\n    const d = new Date(ts);\n    const idx = (d.getFullYear() - startDate.getFullYear()) * 12 + (d.getMonth() - startDate.getMonth());\n    const b = buckets[idx];\n    if (!b) continue;\n    const st = normalizeAppStatus(m.status);\n    b.counts[st] += 1;\n  }\n\n  return buckets;\n}\n\nexport type PipelineLinePoint = { label: string; value: number };\n\n/**\n *   Pipeline     ,\n *     .\n */\nexport function bucketToPipelineLine(buckets: Bucket[]): PipelineLinePoint[] {\n  const pipelineCols: ReadonlySet<BoardColumnKey> = new Set([\n    \"ACTIVE\",\n    \"INTERVIEW\",\n    \"OFFER\",\n    \"HIRED\",\n    \"REJECTED\",\n    \"NO_RESPONSE\"\n  ]);\n\n  return buckets.map((b) => {\n    let total = 0;\n    for (const k of STATUS_KEYS) {\n      const col = getBoardColumn(k);\n      if (pipelineCols.has(col)) total += b.counts[k] || 0;\n    }\n    return { label: b.label, value: total };\n  });\n}\n\n","import { useMemo } from \"react\";\n\nimport {\n  STATUS_KEYS,\n  type StatusKey,\n  getBoardColumn,\n  type BoardColumnKey,\n} from \"src/entities/application/model/status\";\nimport { buildDailyBuckets, type Bucket } from \"src/pages/DashboardPage/model/dashboardTimeSeries\";\n\nimport type { ModeKey, RangeKey, TrendsPoint } from \"./trends.types\";\n\ntype CustomRange = { fromMs: number; toMs: number } | null;\n\n// Keep hooks pure: take a stable \"now\" snapshot at module init for preset ranges.\nconst NOW_MS = Date.now();\n\nfunction rangeDays(range: Exclude<RangeKey, \"custom\">): number {\n  if (range === \"12m\") return 365;\n  if (range === \"90d\") return 90;\n  if (range === \"30d\") return 30;\n  return 7;\n}\n\nfunction clampDayStart(ms: number): number {\n  const d = new Date(ms);\n  d.setHours(0, 0, 0, 0);\n  return d.getTime();\n}\n\nfunction isoDay(ts: number): string {\n  const d = new Date(ts);\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${dd}`;\n}\n\nexport function useTrendsBuckets(\n  matches: { status: StatusKey; createdAt: number; updatedAt: number }[],\n  range: RangeKey,\n  mode: ModeKey,\n  customRange: CustomRange,\n) {\n  return useMemo(() => {\n    const byUpdatedAt = mode === \"updated\";\n\n    if (range === \"custom\" && customRange?.fromMs && customRange?.toMs) {\n      const fromMs = clampDayStart(customRange.fromMs);\n      const toMs = clampDayStart(customRange.toMs);\n\n      const days = Math.max(1, Math.ceil((toMs - fromMs) / (24 * 60 * 60 * 1000)) + 1);\n\n      const buckets = buildDailyBuckets(matches, {\n        days,\n        byUpdatedAt,\n        locale: \"en\",\n      });\n\n      return buckets.filter((b) => b.startMs >= fromMs && b.startMs <= toMs);\n    }\n\n    const preset = range as Exclude<RangeKey, \"custom\">;\n    const days = rangeDays(preset);\n\n    const buckets = buildDailyBuckets(matches, {\n      days,\n      byUpdatedAt,\n      locale: \"en\",\n    });\n\n    const from = NOW_MS - days * 24 * 60 * 60 * 1000;\n    return buckets.filter((b) => b.startMs >= from);\n  }, [matches, mode, range, customRange]);\n}\n\nexport function useTrendsTotal(buckets: Bucket[]) {\n  return useMemo(() => {\n    let total = 0;\n    for (const b of buckets) {\n      for (const k of STATUS_KEYS) total += b.counts[k] ?? 0;\n    }\n    return total;\n  }, [buckets]);\n}\n\nexport function useTrendsChartData(buckets: Bucket[], _locale: string) {\n  return useMemo(() => {\n    const sumCol = (counts: Record<StatusKey, number>, col: BoardColumnKey) => {\n      let n = 0;\n      for (const k of STATUS_KEYS) {\n        if (getBoardColumn(k) === col) n += counts[k] ?? 0;\n      }\n      return n;\n    };\n\n    const points: TrendsPoint[] = buckets.map((b) => {\n      const ACTIVE = sumCol(b.counts, \"ACTIVE\");\n      const INTERVIEW = sumCol(b.counts, \"INTERVIEW\");\n      const OFFER = sumCol(b.counts, \"OFFER\");\n      const HIRED = sumCol(b.counts, \"HIRED\");\n      const REJECTED = sumCol(b.counts, \"REJECTED\");\n      const NO_RESPONSE = sumCol(b.counts, \"NO_RESPONSE\");\n      const total = ACTIVE + INTERVIEW + OFFER + HIRED + REJECTED + NO_RESPONSE;\n      return {\n        date: isoDay(b.startMs),\n        ACTIVE,\n        INTERVIEW,\n        OFFER,\n        HIRED,\n        REJECTED,\n        NO_RESPONSE,\n        total,\n      };\n    });\n\n    return { points };\n  }, [buckets]);\n}\n","import { Calendar } from \"lucide-react\";\nimport type { ReactNode } from \"react\";\nimport { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { toMillis } from \"src/shared/lib/firestore/toMillis\";\nimport { Button, Card, Modal } from \"src/shared/ui\";\n\nimport type { MatchTimestampsLike } from \"../../model/dashboardTimeSeries\";\n\nimport type { ModeKey, RangeKey, SeriesKey, VisibleMap } from \"./trends.types\";\nimport { TrendsChart } from \"./TrendsChart\";\nimport { TrendsLegend } from \"./TrendsLegend\";\nimport { useTrendsBuckets, useTrendsChartData, useTrendsTotal } from \"./useTrendsData\";\n\ntype CustomRange = { from: Date; to: Date } | null;\n\nfunction SegButton({\n  active,\n  children,\n  onClick,\n}: {\n  active: boolean;\n  children: ReactNode;\n  onClick: () => void;\n}) {\n  return (\n    <Button\n      onClick={onClick}\n      variant={active ? \"secondary\" : \"ghost\"}\n      size=\"sm\"\n      shape=\"pill\"\n      shadow=\"none\"\n      className={[\n        \"h-9 px-3 text-xs\",\n        active ? \"text-foreground\" : \"text-muted-foreground hover:text-foreground\",\n      ].join(\" \")}\n    >\n      {children}\n    </Button>\n  );\n}\n\nfunction SegGroup({ children }: { children: ReactNode }) {\n  return <div className=\"flex items-center gap-1 rounded-full border bg-background p-1\">{children}</div>;\n}\n\nfunction formatShort(d: Date, locale: string) {\n  try {\n    return new Intl.DateTimeFormat(locale, { day: \"2-digit\", month: \"2-digit\" }).format(d);\n  } catch {\n    return d.toLocaleDateString();\n  }\n}\n\nfunction parseDateInput(v: string): Date | null {\n  const ms = Date.parse(v);\n  return Number.isFinite(ms) ? new Date(ms) : null;\n}\n\nexport function DashboardTrendsCard({\n  matches,\n  range,\n  mode,\n  customRange,\n  onRangeChange,\n  onModeChange,\n  onCustomRangeChange,\n}: {\n  matches: MatchTimestampsLike[];\n  range: RangeKey;\n  mode: ModeKey;\n  customRange: CustomRange;\n  onRangeChange: (r: RangeKey) => void;\n  onModeChange: (m: ModeKey) => void;\n  onCustomRangeChange: (r: CustomRange) => void;\n}) {\n  const { t, i18n } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n\n  const [visible, setVisible] = useState<VisibleMap>({\n    ACTIVE: true,\n    INTERVIEW: true,\n    OFFER: true,\n    HIRED: true,\n    REJECTED: true,\n    NO_RESPONSE: false,\n  });\n  const [hoverKey, setHoverKey] = useState<SeriesKey | null>(null);\n\n  const [customOpen, setCustomOpen] = useState(false);\n  const [draftFrom, setDraftFrom] = useState<string>(() => (customRange ? customRange.from.toISOString().slice(0, 10) : \"\"));\n  const [draftTo, setDraftTo] = useState<string>(() => (customRange ? customRange.to.toISOString().slice(0, 10) : \"\"));\n\n  const safeMatches = useMemo(() => {\n    return matches\n      .map((m) => {\n        const createdAt = toMillis(m.createdAt);\n        const updatedAt = toMillis(m.updatedAt) || createdAt;\n        return { status: m.status, createdAt, updatedAt };\n      })\n      .filter((m) => m.createdAt > 0);\n  }, [matches]);\n\n  const customMs = useMemo(() => {\n    if (range !== \"custom\" || !customRange) return null;\n    return { fromMs: customRange.from.getTime(), toMs: customRange.to.getTime() };\n  }, [range, customRange]);\n\n  const buckets = useTrendsBuckets(safeMatches, range, mode, customMs);\n  const chartData = useTrendsChartData(buckets, i18n.language);\n  const totalInRange = useTrendsTotal(buckets);\n\n  const subtitle = useMemo(() => {\n    const modeLabel =\n      mode === \"updated\"\n        ? String(t(\"trends.mode.updated\", { defaultValue: \"By last update\" }))\n        : String(t(\"trends.mode.created\", { defaultValue: \"By creation date\" }));\n\n    if (range === \"custom\" && customRange) {\n      return `${modeLabel}  ${formatShort(customRange.from, i18n.language)}${formatShort(customRange.to, i18n.language)}`;\n    }\n\n    const rangeLabel = String(t(`range.${range}`, { defaultValue: range }));\n    return `${modeLabel}  ${rangeLabel}`;\n  }, [mode, range, t, customRange, i18n.language]);\n\n  function toggleSeries(key: SeriesKey) {\n    setVisible((prev) => ({ ...prev, [key]: !prev[key] }));\n  }\n\n  function openCustom() {\n    const now = new Date();\n    const to = customRange?.to ?? now;\n    const from = customRange?.from ?? new Date(now.getTime() - 6 * 24 * 60 * 60 * 1000);\n\n    setDraftFrom(from.toISOString().slice(0, 10));\n    setDraftTo(to.toISOString().slice(0, 10));\n    setCustomOpen(true);\n  }\n\n  function applyCustom() {\n    const from = parseDateInput(draftFrom);\n    const to = parseDateInput(draftTo);\n    if (!from || !to) return;\n\n    const a = from.getTime();\n    const b = to.getTime();\n    const rr = a <= b ? { from, to } : { from: to, to: from };\n\n    onCustomRangeChange(rr);\n    onRangeChange(\"custom\");\n    setCustomOpen(false);\n  }\n\n  return (\n    <Card className=\"p-6\">\n      <div className=\"flex flex-wrap items-start justify-between gap-4\">\n        <div className=\"space-y-1\">\n          <div className=\"text-sm font-semibold text-foreground\">{String(t(\"trends.title\", { defaultValue: \"Trends\" }))}</div>\n          <div className=\"text-xs text-muted-foreground\">{subtitle}</div>\n        </div>\n\n        <div className=\"flex flex-wrap items-center gap-2\">\n          <SegGroup>\n            {([\"7d\", \"30d\", \"90d\", \"12m\"] as const).map((k) => (\n              <SegButton key={k} active={range === k} onClick={() => onRangeChange(k)}>\n                {String(t(`range.${k}`, { defaultValue: k }))}\n              </SegButton>\n            ))}\n\n            <Button\n              onClick={openCustom}\n              variant={range === \"custom\" ? \"secondary\" : \"ghost\"}\n              size=\"sm\"\n              shape=\"pill\"\n              shadow=\"none\"\n              className={[\n                \"h-9 gap-2 px-3 text-xs\",\n                range === \"custom\" ? \"text-foreground\" : \"text-muted-foreground hover:text-foreground\",\n              ].join(\" \")}\n            >\n              <Calendar className=\"h-4 w-4\" />\n              {String(t(\"range.custom\", { defaultValue: \"Custom\" }))}\n            </Button>\n          </SegGroup>\n\n          <div className=\"mx-1 hidden h-6 w-px bg-border sm:block\" />\n\n          <SegGroup>\n            <SegButton active={mode === \"created\"} onClick={() => onModeChange(\"created\")}>\n              {String(t(\"trends.created\", { defaultValue: \"Created\" }))}\n            </SegButton>\n            <SegButton active={mode === \"updated\"} onClick={() => onModeChange(\"updated\")}>\n              {String(t(\"trends.updated\", { defaultValue: \"Updated\" }))}\n            </SegButton>\n          </SegGroup>\n        </div>\n      </div>\n\n      <Modal open={customOpen} onOpenChange={setCustomOpen} title={String(t(\"range.customTitle\", { defaultValue: \"Custom period\" }))}>\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\n            <label className=\"space-y-1 text-sm\">\n              <div className=\"text-xs text-muted-foreground\">{String(t(\"range.from\", { defaultValue: \"From\" }))}</div>\n              <input\n                type=\"date\"\n                value={draftFrom}\n                onChange={(e) => setDraftFrom(e.target.value)}\n                className=\"h-10 w-full rounded-xl border border-border bg-background px-3 text-sm text-foreground\"\n              />\n            </label>\n\n            <label className=\"space-y-1 text-sm\">\n              <div className=\"text-xs text-muted-foreground\">{String(t(\"range.to\", { defaultValue: \"To\" }))}</div>\n              <input\n                type=\"date\"\n                value={draftTo}\n                onChange={(e) => setDraftTo(e.target.value)}\n                className=\"h-10 w-full rounded-xl border border-border bg-background px-3 text-sm text-foreground\"\n              />\n            </label>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"outline\" onClick={() => setCustomOpen(false)}>\n              {String(t(\"common.cancel\", { defaultValue: \"Cancel\" }))}</Button>\n            <Button onClick={applyCustom}>{String(t(\"common.apply\", { defaultValue: \"Apply\" }))}</Button>\n          </div>\n        </div>\n      </Modal>\n\n      <div className=\"mt-6\">\n        {totalInRange === 0 ? (\n          <div className=\"flex min-h-[260px] items-center justify-center rounded-2xl border bg-muted/20 px-6 py-10 text-center\">\n            <div className=\"space-y-1\">\n              <div className=\"text-sm font-medium text-foreground\">{String(t(\"trends.emptyTitle\", { defaultValue: \"No data yet\" }))}</div>\n              <div className=\"text-xs text-muted-foreground\">\n                {String(\n                  t(\"trends.emptySubtitle\", {\n                    defaultValue: \"Add jobs and update statuses to see trends here.\",\n                  }),\n                )}\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"rounded-2xl border bg-background p-3\">\n            <TrendsChart points={chartData.points} mode={mode} visible={visible} hoverKey={hoverKey} />\n          </div>\n        )}\n      </div>\n\n      {totalInRange > 0 && <TrendsLegend visible={visible} hoverKey={hoverKey} onToggle={toggleSeries} onHover={setHoverKey} />}\n    </Card>\n  );\n}\n","\nimport { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  BOARD_COLUMN_KEYS,\n  type BoardColumnKey,\n  type StatusKey,\n  getBoardColumn,\n} from \"src/entities/application/model/status\";\nimport { Card } from \"src/shared/ui\";\n\nimport { diffDays, medianDays, parseMs } from \"../model/dashboardTimeSeries\";\n\ntype HistoryItem = {\n  status: StatusKey;\n  changedAt?: unknown;\n  date?: unknown;\n};\n\ntype MatchLike = {\n  status: StatusKey;\n  createdAt: unknown;\n  updatedAt: unknown;\n  statusHistory?: HistoryItem[];\n};\n\nconst PIPELINE_COLS: BoardColumnKey[] = BOARD_COLUMN_KEYS.filter(\n  (c) => c !== \"ARCHIVED\",\n);\n\nfunction pct(num: number, den: number): number {\n  if (den <= 0) return 0;\n  return Math.round((num / den) * 100);\n}\n\nfunction getHistoryDate(h: HistoryItem): number | null {\n  return parseMs(h.changedAt ?? h.date ?? null);\n}\n\nexport function DashboardInsightsCard({\n  matches,\n}: {\n  matches: MatchLike[];\n}) {\n  const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n  const [nowMs] = useState(() => Date.now());\n\n  const {\n    activeToInterview,\n    interviewToOffer,\n    offerToHired,\n    medDaysToInterview,\n    medDaysToOffer,\n    staleCounts,\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  } = useMemo(() => {\n    let activeEntered = 0;\n    let interviewEntered = 0;\n    let offerEntered = 0;\n\n    let activeToInterviewCount = 0;\n    let interviewToOfferCount = 0;\n    let offerToHiredCount = 0;\n\n    const interviewDurations: number[] = [];\n    const offerDurations: number[] = [];\n\n    const stale: Record<BoardColumnKey, number> = Object.fromEntries(\n      BOARD_COLUMN_KEYS.map((k) => [k, 0]),\n    ) as Record<BoardColumnKey, number>;\n\n    for (const m of matches) {\n      const history = m.statusHistory ?? [];\n      if (!history.length) continue;\n\n      const sorted = [...history].sort(\n        (a, b) => (getHistoryDate(a) ?? 0) - (getHistoryDate(b) ?? 0),\n      );\n\n      const cols = sorted.map((h) => getBoardColumn(h.status));\n\n      const firstActiveIndex = cols.indexOf(\"ACTIVE\");\n      const firstInterviewIndex = cols.indexOf(\"INTERVIEW\");\n      const firstOfferIndex = cols.indexOf(\"OFFER\");\n      const firstHiredIndex = cols.indexOf(\"HIRED\");\n\n      if (firstActiveIndex !== -1) activeEntered++;\n      if (firstInterviewIndex !== -1) interviewEntered++;\n      if (firstOfferIndex !== -1) offerEntered++;\n\n      if (\n        firstActiveIndex !== -1 &&\n        firstInterviewIndex !== -1 &&\n        firstInterviewIndex > firstActiveIndex\n      ) {\n        activeToInterviewCount++;\n\n        const a = getHistoryDate(sorted[firstActiveIndex]);\n        const b = getHistoryDate(sorted[firstInterviewIndex]);\n        if (a && b) interviewDurations.push(diffDays(a, b));\n      }\n\n      if (\n        firstInterviewIndex !== -1 &&\n        firstOfferIndex !== -1 &&\n        firstOfferIndex > firstInterviewIndex\n      ) {\n        interviewToOfferCount++;\n\n        const a = getHistoryDate(sorted[firstInterviewIndex]);\n        const b = getHistoryDate(sorted[firstOfferIndex]);\n        if (a && b) offerDurations.push(diffDays(a, b));\n      }\n\n      if (\n        firstOfferIndex !== -1 &&\n        firstHiredIndex !== -1 &&\n        firstHiredIndex > firstOfferIndex\n      ) {\n        offerToHiredCount++;\n      }\n\n      const last = sorted[sorted.length - 1];\n      const lastCol = getBoardColumn(last.status);\n      const lastDate = getHistoryDate(last);\n\n      if (lastDate) {\n        const days = diffDays(lastDate, nowMs);\n        if (days >= 14 && PIPELINE_COLS.includes(lastCol)) {\n          stale[lastCol] += 1;\n        }\n      }\n    }\n\n    return {\n      activeToInterview: pct(activeToInterviewCount, activeEntered),\n      interviewToOffer: pct(interviewToOfferCount, interviewEntered),\n      offerToHired: pct(offerToHiredCount, offerEntered),\n      medDaysToInterview: medianDays(interviewDurations),\n      medDaysToOffer: medianDays(offerDurations),\n      staleCounts: stale,\n    };\n  }, [matches, nowMs]);\n\n  const needsAttention =\n    staleCounts.ACTIVE + staleCounts.INTERVIEW + staleCounts.OFFER;\n\n  return (\n    <Card className=\"p-6\">\n      <div className=\"text-sm font-semibold text-foreground\">\n        {t(\"insights.title\", \"Insights\")}\n      </div>\n\n      <div className=\"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-3\">\n        <Kpi label=\"Active  Interview\" value={`${activeToInterview}%`} />\n        <Kpi label=\"Interview  Offer\" value={`${interviewToOffer}%`} />\n        <Kpi label=\"Offer  Hired\" value={`${offerToHired}%`} />\n        <Kpi\n          label=\"Median to Interview\"\n          value={medDaysToInterview == null ? \"\" : `${medDaysToInterview}d`}\n        />\n        <Kpi\n          label=\"Median to Offer\"\n          value={medDaysToOffer == null ? \"\" : `${medDaysToOffer}d`}\n        />\n        <Kpi label=\"Needs attention\" value={`${needsAttention}`} />\n      </div>\n    </Card>\n  );\n}\n\nfunction Kpi({ label, value }: { label: string; value: string }) {\n  return (\n    <div className=\"rounded-xl border border-border bg-background px-4 py-3\">\n      <div className=\"text-xs text-muted-foreground\">{label}</div>\n      <div className=\"mt-1 text-lg font-semibold text-foreground\">{value}</div>\n    </div>\n  );\n}\n","import { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport {\n  AppRoutes,\n  RoutePath,\n} from \"src/app/providers/router/routeConfig/routeConfig\";\nimport { getStageColorForStatus, STATUS_COLOR_HEX, type StatusKey } from \"src/entities/application/model/status\";\nimport { Button, Card } from \"src/shared/ui\";\n\nimport { parseMs, normalizeAppStatus, diffDays } from \"../model/dashboardTimeSeries\";\n\ntype Props = {\n  matches: {\n    id: string;\n    status?: unknown;\n    createdAt?: unknown;\n    updatedAt?: unknown;\n    title?: string | null;\n    company?: string | null;\n  }[];\n  days?: number;\n  className?: string;\n};\n\nfunction statusColorHex(st: StatusKey): string {\n  return STATUS_COLOR_HEX[getStageColorForStatus(st)];\n}\n\nexport function DashboardTimelineCard({ matches, days = 14, className }: Props) {\n  const { t, i18n } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n  const navigate = useNavigate();\n  const [nowMs] = useState(() => Date.now());\n\n  const rows = useMemo(() => {\n    return matches\n      .map((m) => {\n        const when = parseMs(m.updatedAt) || parseMs(m.createdAt);\n        const st = normalizeAppStatus(m.status);\n        return {\n          id: m.id,\n          title: m.title ?? null,\n          company: m.company ?? null,\n          status: st,\n          when,\n        };\n      })\n      .filter(\n        (\n          x,\n        ): x is {\n          id: string;\n          title: string | null;\n          company: string | null;\n          status: StatusKey;\n          when: number;\n        } => x.when != null && diffDays(x.when, nowMs) <= days,\n      )\n      .sort((a, b) => b.when - a.when)\n      .slice(0, 24);\n  }, [matches, days, nowMs]);\n\n  return (\n    <Card className={[\"flex h-full flex-col p-6\", className].filter(Boolean).join(\" \")}>\n      <div className=\"flex items-start justify-between gap-3\">\n        <div>\n          <div className=\"text-sm font-semibold text-foreground\">\n            {t(\"timeline.title\", \"Timeline\")}\n          </div>\n          <div className=\"mt-1 text-xs text-muted-foreground\">\n            {t(\"timeline.subtitle\", \"Last {{days}} days\", { days })}\n          </div>\n        </div>\n\n        <Button\n          size=\"sm\"\n          variant=\"outline\"\n          shape=\"pill\"\n          onClick={() => navigate(RoutePath[AppRoutes.APPLICATIONS])}\n        >\n          {t(\"timeline.viewAll\", \"View all\")}\n        </Button>\n      </div>\n\n      {rows.length === 0 ? (\n        <div className=\"mt-4 text-sm text-muted-foreground\">\n          {t(\"timeline.empty\", \"No recent updates\")}\n        </div>\n      ) : (\n        <div className=\"mt-4 flex-1 space-y-3 overflow-y-auto pr-1\">\n          {rows.map((r) => (\n            <button\n              key={r.id}\n              type=\"button\"\n              className=\"w-full rounded-lg border border-border bg-background p-3 text-left transition hover:bg-muted/40\"\n              onClick={() => navigate(`${RoutePath[AppRoutes.APPLICATIONS]}/${r.id}`)}\n            >\n              <div className=\"flex items-center justify-between gap-3\">\n                <div className=\"min-w-0\">\n                  <div className=\"truncate text-sm font-medium text-foreground\">\n                    {r.title || t(\"recent.untitled\", \"Untitled\")}\n                  </div>\n                  <div className=\"mt-0.5 truncate text-xs text-muted-foreground\">\n                    {r.company || t(\"recent.noCompany\", \"No company\")}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span\n                    className=\"h-2.5 w-2.5 rounded-full\"\n                    style={{ backgroundColor: statusColorHex(r.status) }}\n                  />\n                  <span className=\"text-xs text-muted-foreground\">\n                    {t(`status.${r.status}`, r.status)}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"mt-2 text-xs text-muted-foreground\">\n                {new Date(r.when).toLocaleDateString(i18n.language, {\n                  year: \"numeric\",\n                  month: \"short\",\n                  day: \"2-digit\",\n                })}\n              </div>\n            </button>\n          ))}\n        </div>\n      )}\n    </Card>\n  );\n}\n","import type { TFunction } from \"i18next\";\nimport React, { useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport {\n  BOARD_COLUMN_KEYS,\n  BOARD_COLUMNS_LIST,\n  type BoardColumnKey,\n  BOARD_COLUMN_COLOR_HEX,\n  getBoardColumn,\n  normalizeStatusKey,\n} from \"src/entities/application/model/status\";\nimport { Card, RadarChart, type RadarAxis, type RadarSeries } from \"src/shared/ui\";\n\ntype MatchLike = {\n  status: string;\n};\n\nconst PIPELINE_COLS: BoardColumnKey[] = BOARD_COLUMN_KEYS.filter((c) => c !== \"ARCHIVED\");\n\nfunction colLabel(t: TFunction, col: BoardColumnKey): string {\n  const meta = BOARD_COLUMNS_LIST.find((c) => c.key === col);\n  return t(meta?.labelKey ?? `board.column.${col}`, { defaultValue: col });\n}\n\nexport function DashboardStatusRadarCard({ matches }: { matches: MatchLike[] }) {\n  const { t } = useTranslation(undefined, { keyPrefix: \"dashboard\" });\n\n  const axes = useMemo<RadarAxis<BoardColumnKey>[]>(() => {\n    return PIPELINE_COLS.map((col) => ({\n      key: col,\n      label: colLabel(t, col),\n    }));\n  }, [t]);\n\n  const series = useMemo<RadarSeries<BoardColumnKey>[]>(() => {\n    const counts = {} as Record<BoardColumnKey, number>;\n    for (const c of PIPELINE_COLS) counts[c] = 0;\n\n    // Matches may store either a StatusKey (preferred) or legacy values.\n    // Convert to StatusKey -> BoardColumnKey so radar always works.\n    for (const m of matches) {\n      const key = normalizeStatusKey(m.status);\n      if (!key) continue;\n      const col = getBoardColumn(key);\n      if ((PIPELINE_COLS as readonly string[]).includes(col)) counts[col] += 1;\n    }\n\n    const total = PIPELINE_COLS.reduce((acc, c) => acc + (counts[c] ?? 0), 0);\n    const values = {} as Record<BoardColumnKey, number>;\n    for (const c of PIPELINE_COLS) values[c] = total ? (counts[c] ?? 0) / total : 0;\n\n    return [\n      {\n        key: \"mix\",\n        label: t(\"radar.mix\", \"Mix\"),\n        color: \"#2563EB\",\n        values,\n      },\n    ];\n  }, [matches, t]);\n\n  const percents = useMemo(() => {\n    const s = series[0];\n    const values = (s?.values ?? {}) as Record<BoardColumnKey, number>;\n    return PIPELINE_COLS.map((col) => ({ col, value: values[col] ?? 0 }));\n  }, [series]);\n\n  return (\n    <Card className=\"p-6\">\n      <div className=\"text-sm font-semibold text-foreground\">\n        {t(\"radar.title\", \"Pipeline mix\")}\n      </div>\n      <div className=\"text-xs text-muted-foreground\">\n        {t(\"radar.subtitle\", \"Share by stage\")}\n      </div>\n\n      <div className=\"mt-5 flex items-center justify-center\">\n        <RadarChart size={240} axes={axes} series={series} />\n      </div>\n\n      <div className=\"mt-4 grid grid-cols-2 gap-2 text-xs\">\n        {percents.map(({ col, value }) => {\n          const color = BOARD_COLUMN_COLOR_HEX[col];\n          const label = colLabel(t, col);\n          return (\n            <div key={col} className=\"flex items-center justify-between gap-2\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"inline-block h-2.5 w-2.5 rounded-full\" style={{ backgroundColor: color }} />\n                <span className=\"text-muted-foreground\">{label}</span>\n              </div>\n              <div className=\"tabular-nums text-foreground\">{Math.round(value * 100)}%</div>\n            </div>\n          );\n        })}\n      </div>\n    </Card>\n  );\n}\n","// Utilities to keep Firestore values serializable inside Redux state.\n//\n// Firestore Timestamp is not serializable (class instance), so whenever we\n// want to store time-like values in RTK Query cache or Redux state, we convert\n// them to plain numbers (epoch millis) or strings.\n\nexport function toMillis(value: unknown): number {\n  if (value && typeof (value as { toMillis?: unknown }).toMillis === \"function\") {\n    return (value as { toMillis: () => number }).toMillis();\n  }\n\n  if (typeof value === \"number\") return value;\n\n  if (typeof value === \"string\") {\n    const ms = Date.parse(value);\n    return Number.isFinite(ms) ? ms : 0;\n  }\n\n  // Firestore Timestamp-like POJO: { seconds, nanoseconds }\n  const seconds = (value as { seconds?: unknown } | null)?.seconds;\n  if (typeof seconds === \"number\") return seconds * 1000;\n\n  return 0;\n}\n\nexport function toMillisOptional(value: unknown): number | undefined {\n  if (value == null) return undefined;\n  const ms = toMillis(value);\n  return ms > 0 ? ms : undefined;\n}\n"],"names":["LS_KEY","toMillis","value","ms","Date","parse","Number","isFinite","seconds","useDashboardData","t","useTranslation","undefined","keyPrefix","userId","isAuthReady","useAuthSelectors","loops","useGetLoopsQuery","skipToken","data","loopsFilter","setLoopsFilter","useState","raw","mode","parsed","JSON","obj","Array","isArray","selectedLoopIds","filter","x","safeParseFilter","window","localStorage","getItem","useEffect","setItem","stringify","repo","useMemo","createApplicationsRepo","db","appsRows","setAppsRows","appsLoading","setAppsLoading","appsError","setAppsError","historyByAppId","setHistoryByAppId","cancelled","rows","queryAllActiveApplications","e","message","Error","String","length","entries","Promise","all","map","async","events","getApplicationHistory","row","id","items","statusRaw","process","subStatus","status","initial","normalizeStatusKey","push","date","createdAt","ev","d","type","toStatus","st","arr","matchesAll","r","a","loopId","updatedAt","title","job","roleTitle","company","companyName","location","locationText","url","vacancyUrl","notes","currentNote","statusHistory","isLoading","error","matches","summary","cols","byStatus","Object","fromEntries","BOARD_COLUMN_KEYS","k","total","buildSummary","m","getBoardColumn","hasMatches","recent","copy","sort","b","slice","chartMatches","flatMap","pipelineSummary","byColumn","recentJobs","STATUS","SAVED","key","stage","labelKey","color","boardColumn","order","REVIEWED","CV_ADAPTING","COVER_LETTER_WRITING","READY_TO_APPLY","APPLIED","REAPPLIED","WAITING_RESPONSE","AUTO_REPLY_RECEIVED","RESPONSE_RECEIVED","MORE_INFO_REQUESTED","FOLLOW_UP_REQUIRED","WONT_APPLY","HR_CALL_SCHEDULED","HR_PASSED","HR_FAILED","TECH_SCHEDULED","TECH_PASSED","TECH_FAILED","FINAL_INTERVIEW","TEST_TASK_RECEIVED","TEST_TASK_SUBMITTED","WAITING_DECISION","OFFER_RECEIVED","OFFER_REVIEWING","NEGOTIATING","OFFER_ACCEPTED","OFFER_DECLINED","OFFER_RESCINDED","START_PLANNED","STARTED","REJECTED_PRE_INTERVIEW","REJECTED_AFTER_INTERVIEW","ROLE_CLOSED","GHOSTING","ARCHIVED_GENERAL","KEEP_IN_TOUCH","WITHDREW_BEFORE_START","v","STATUS_KEYS","keys","BOARD_COLUMNS","ACTIVE","INTERVIEW","OFFER","HIRED","REJECTED","NO_RESPONSE","ARCHIVED","BOARD_COLUMNS_LIST","STATUS_COLOR_CLASS","neutral","info","warning","success","danger","purple","STATUS_COLOR_DOT_CLASS","STATUS_COLOR_HEX","STAGE_COLOR","getStageColorForStatus","getStatusMeta","BOARD_COLUMN_COLOR","BOARD_COLUMN_COLOR_HEX","ALL_STATUSES","values","isStatusKey","meta","statusesForStage","s","LEGACY_TO_STATUS","PLANNED","VIEWED","INTERVIEW_1","INTERVIEW_2","TEST_TASK","legacyStatusToStatusKey","up","toUpperCase","asRecord","legacy","normalized","trim","replace","includes","col","first","defaultStatusForBoardColumn","normalizeStatus","app","stageIn","subIn","changed","ensureUserDoc","createApplication","payload","queryPipelineByStatus","limit","queryTodayTopPriority","appId","take","queryFollowUpsDue","autoMarkGhosting","ICONS","user","question","loop","add","new","applied","saved","interview","offer","hired","rejected","no_response","COLOR","DashboardIcon","name","size","className","_jsx","style","fontSize","join","children","MiniStat","label","_jsxs","StatusTitle","DashboardStats","onGoJobs","onAddFirstJob","Card","padding","Button","variant","shadow","onClick","CardButton","KpiCard","icon","PIPELINE_COLS","c","colLabel","find","defaultValue","DashboardPipelineCard","stroke","slices","React","DonutChart","centerTop","centerBottom","statusBadgeClass","DashboardRecentJobsCard","jobs","onViewAll","onOpenJob","nowMs","now","tr","fallback","options","Boolean","j","rel","diff","sec","Math","floor","min","count","hr","days","weeks","months","formatRelative","toLowerCase","statusLabel","DashboardOnboardingActions","hasJobs","onGoProfile","onGoQuestions","onGoLoop","goText","doneText","ActionRow","onGo","DashboardLoopsFilterModal","open","onOpenChange","onChange","isAll","selected","ids","from","Set","setAll","setSelectedMode","toggleLoop","base","has","delete","selectAll","l","clearAll","Modal","description","checked","shape","classNames","tabs","to","RoutePath","AppRoutes","DASHBOARD","end","DASHBOARD_ANALYTICS","DASHBOARD_ACTIVITY","DashboardTabsNav","tab","NavLink","isActive","SERIES","SERIES_LABELS","LEGEND_COLOR","DASH","formatLabel","isoDate","y","split","TrendsChart","points","visible","hoverKey","ResponsiveContainer","width","height","LineChart","margin","top","right","bottom","left","CartesianGrid","vertical","strokeDasharray","XAxis","dataKey","tickLine","axisLine","tickMargin","minTickGap","tickFormatter","YAxis","Tooltip","cursor","formatter","num","round","labelFormatter","isDim","Line","strokeWidth","dot","opacity","TrendsLegend","onToggle","onHover","isOn","isHover","onMouseEnter","onMouseLeave","borderColor","backgroundColor","parseMs","isRecord","isTimestampWithToMillis","n","isTimestampWithSeconds","diffDays","aMs","bMs","abs","medianDays","xs","mid","normalizeAppStatus","emptyCounts","out","startOfDayMs","setHours","getTime","fmtDayLabel","locale","Intl","DateTimeFormat","month","day","format","buildDailyBuckets","opts","start","buckets","i","bStart","bEnd","startMs","endMs","counts","ts","byUpdatedAt","NOW_MS","clampDayStart","isoDay","getFullYear","getMonth","padStart","getDate","SegButton","active","SegGroup","formatShort","toLocaleDateString","parseDateInput","DashboardTrendsCard","range","customRange","onRangeChange","onModeChange","onCustomRangeChange","i18n","setVisible","setHoverKey","customOpen","setCustomOpen","draftFrom","setDraftFrom","toISOString","draftTo","setDraftTo","safeMatches","customMs","fromMs","toMs","max","ceil","rangeDays","useTrendsBuckets","chartData","sumCol","useTrendsChartData","language","totalInRange","useTrendsTotal","subtitle","modeLabel","Calendar","target","prev","pct","den","getHistoryDate","h","changedAt","DashboardInsightsCard","activeToInterview","interviewToOffer","offerToHired","medDaysToInterview","medDaysToOffer","staleCounts","activeEntered","interviewEntered","offerEntered","activeToInterviewCount","interviewToOfferCount","offerToHiredCount","interviewDurations","offerDurations","stale","history","sorted","firstActiveIndex","indexOf","firstInterviewIndex","firstOfferIndex","firstHiredIndex","last","lastCol","lastDate","needsAttention","Kpi","DashboardTimelineCard","navigate","useNavigate","when","APPLICATIONS","year","DashboardStatusRadarCard","axes","series","reduce","acc","percents","RadarChart","toMillisOptional"],"ignoreList":[],"sourceRoot":""}