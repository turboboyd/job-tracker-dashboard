"use strict";(self.webpackChunkjob_tracker_dashboard=self.webpackChunkjob_tracker_dashboard||[]).push([[346],{9216(e,t,r){r.d(t,{e:()=>m});var s=r(29189),o=r(96540),n=r(22022),a=r(39819),l=r(71563),d=r(73431),i=r(51728),u=r(96788);const c="dashboard:loops-filter:v1";function E(e){if(e&&"function"==typeof e.toMillis)return e.toMillis();if("number"==typeof e)return e;if("string"==typeof e){const t=Date.parse(e);return Number.isFinite(t)?t:0}const t=e?.seconds;return"number"==typeof t?1e3*t:0}function m(){const{t:e}=(0,n.Bd)(void 0,{keyPrefix:"dashboard"}),{userId:t,isAuthReady:r}=(0,l.gv)(),m=(0,d.fZ)(t&&r?void 0:s.hT).data??[],[f,x]=(0,o.useState)(()=>function(e){try{if(!e)return{mode:"all"};const t=JSON.parse(e);if(!t||"object"!=typeof t)return{mode:"all"};const r=t;if("all"===r.mode)return{mode:"all"};if("selected"===r.mode&&Array.isArray(r.selectedLoopIds))return{mode:"selected",selectedLoopIds:r.selectedLoopIds.filter(e=>"string"==typeof e)}}catch{}return{mode:"all"}}("undefined"!=typeof window?window.localStorage.getItem(c):null));(0,o.useEffect)(()=>{try{window.localStorage.setItem(c,JSON.stringify(f))}catch{}},[f]);const b=(0,o.useMemo)(()=>(0,i.w)(u.db),[]),[p,g]=(0,o.useState)([]),[I,R]=(0,o.useState)(!1),[y,N]=(0,o.useState)(null),[h,T]=(0,o.useState)({});(0,o.useEffect)(()=>{if(!r||!t)return;let e=!1;return(async()=>{try{R(!0),N(null);const r=await b.queryAllActiveApplications(t,500);e||g(r)}catch(t){const r=t instanceof Error?t.message:String(t);e||N(r)}finally{e||R(!1)}})(),()=>{e=!0}},[r,t,b]),(0,o.useEffect)(()=>{if(!r||!t)return;if(!p.length)return;let e=!1;return(async()=>{try{const r=await Promise.all(p.map(async e=>{try{const r=await b.getApplicationHistory(t,e.id,200),s=[],o=e.data?.process?.subStatus??e.data?.process?.status,n=(0,a.LJ)(o)??"SAVED";s.push({status:n,date:e.data.createdAt});for(const e of r){const t=e.data;if("STATUS_CHANGE"===t?.type&&t?.toStatus){const e=(0,a.LJ)(t.toStatus)??"SAVED";s.push({status:e,date:t.createdAt})}}return[e.id,s]}catch{return[e.id,[]]}}));if(e)return;const s={};for(const[e,t]of r)s[e]=t;T(s)}catch{e||T({})}})(),()=>{e=!0}},[r,t,p,b]);const C=(0,o.useMemo)(()=>p.map(e=>{const t=e.data,r=t?.process?.subStatus??t?.process?.status,s=(0,a.LJ)(r)??"SAVED";return{id:e.id,loopId:void 0,createdAt:t.createdAt,updatedAt:t.updatedAt,title:t.job?.roleTitle??null,company:t.job?.companyName??null,location:t.job?.locationText??null,url:t.job?.vacancyUrl??null,notes:t.notes?.currentNote??null,status:s,statusHistory:h[e.id]}}),[p,h]),j=I,A=y?y||e("loadError","Failed to load applications"):null,D=(0,o.useMemo)(()=>C,[C]),v=(0,o.useMemo)(()=>function(e){const t=Object.fromEntries(a.Vl.map(e=>[e,0]));let r=0;for(const s of e)r+=1,t[s]=(t[s]??0)+1;return{total:r,byStatus:t}}(D.map(e=>(0,a.vy)(e.status))),[D]),S=v.total>0,O=(0,o.useMemo)(()=>{const e=D.map(e=>({id:e.id,title:e.title??null,company:e.company??null,status:e.status,createdAt:e.createdAt}));return e.sort((e,t)=>E(t.createdAt)-E(e.createdAt)),e.slice(0,5)},[D]),V=(0,o.useMemo)(()=>D.flatMap(e=>[{status:(0,a.LJ)(e.status)??"SAVED",createdAt:e.createdAt,updatedAt:e.updatedAt,loopId:e.loopId,statusHistory:e.statusHistory}]),[D]),k=(0,o.useMemo)(()=>({total:v.total,byColumn:v.byStatus}),[v]);return{userId:t,loops:m,loopsFilter:f,setLoopsFilter:x,matches:D,matchesAll:C,chartMatches:V,isLoading:j,error:A,hasMatches:S,recentJobs:O,recent:O,pipelineSummary:k}}},39819(e,t,r){r.d(t,{Ax:()=>p,EZ:()=>f,GX:()=>m,Kk:()=>l,LJ:()=>h,Rg:()=>u,SP:()=>T,Ss:()=>i,Vl:()=>s,XQ:()=>o,Xu:()=>E,cW:()=>b,i2:()=>n,kF:()=>I,oZ:()=>d,vy:()=>g});const s=["ACTIVE","INTERVIEW","OFFER","HIRED","REJECTED","NO_RESPONSE","ARCHIVED"],o=Object.fromEntries(Object.entries({SAVED:{key:"SAVED",stage:"ACTIVE",labelKey:"status.SAVED",color:"neutral",boardColumn:"ACTIVE",order:10},REVIEWED:{key:"REVIEWED",stage:"ACTIVE",labelKey:"status.REVIEWED",color:"neutral",boardColumn:"ACTIVE",order:20},CV_ADAPTING:{key:"CV_ADAPTING",stage:"ACTIVE",labelKey:"status.CV_ADAPTING",color:"info",boardColumn:"ACTIVE",order:30},COVER_LETTER_WRITING:{key:"COVER_LETTER_WRITING",stage:"ACTIVE",labelKey:"status.COVER_LETTER_WRITING",color:"info",boardColumn:"ACTIVE",order:40},READY_TO_APPLY:{key:"READY_TO_APPLY",stage:"ACTIVE",labelKey:"status.READY_TO_APPLY",color:"info",boardColumn:"ACTIVE",order:50},APPLIED:{key:"APPLIED",stage:"ACTIVE",labelKey:"status.APPLIED",color:"warning",boardColumn:"ACTIVE",order:60},REAPPLIED:{key:"REAPPLIED",stage:"ACTIVE",labelKey:"status.REAPPLIED",color:"warning",boardColumn:"ACTIVE",order:70},WAITING_RESPONSE:{key:"WAITING_RESPONSE",stage:"ACTIVE",labelKey:"status.WAITING_RESPONSE",color:"warning",boardColumn:"ACTIVE",order:80},AUTO_REPLY_RECEIVED:{key:"AUTO_REPLY_RECEIVED",stage:"ACTIVE",labelKey:"status.AUTO_REPLY_RECEIVED",color:"warning",boardColumn:"ACTIVE",order:90},RESPONSE_RECEIVED:{key:"RESPONSE_RECEIVED",stage:"ACTIVE",labelKey:"status.RESPONSE_RECEIVED",color:"info",boardColumn:"ACTIVE",order:100},MORE_INFO_REQUESTED:{key:"MORE_INFO_REQUESTED",stage:"ACTIVE",labelKey:"status.MORE_INFO_REQUESTED",color:"info",boardColumn:"ACTIVE",order:110},FOLLOW_UP_REQUIRED:{key:"FOLLOW_UP_REQUIRED",stage:"ACTIVE",labelKey:"status.FOLLOW_UP_REQUIRED",color:"warning",boardColumn:"ACTIVE",order:120},WONT_APPLY:{key:"WONT_APPLY",stage:"REJECTED",labelKey:"status.WONT_APPLY",color:"danger",boardColumn:"REJECTED",order:900},HR_CALL_SCHEDULED:{key:"HR_CALL_SCHEDULED",stage:"INTERVIEW",labelKey:"status.HR_CALL_SCHEDULED",color:"purple",boardColumn:"INTERVIEW",order:200},HR_PASSED:{key:"HR_PASSED",stage:"INTERVIEW",labelKey:"status.HR_PASSED",color:"purple",boardColumn:"INTERVIEW",order:210},HR_FAILED:{key:"HR_FAILED",stage:"REJECTED",labelKey:"status.HR_FAILED",color:"danger",boardColumn:"REJECTED",order:910},TECH_SCHEDULED:{key:"TECH_SCHEDULED",stage:"INTERVIEW",labelKey:"status.TECH_SCHEDULED",color:"purple",boardColumn:"INTERVIEW",order:220},TECH_PASSED:{key:"TECH_PASSED",stage:"INTERVIEW",labelKey:"status.TECH_PASSED",color:"purple",boardColumn:"INTERVIEW",order:230},TECH_FAILED:{key:"TECH_FAILED",stage:"REJECTED",labelKey:"status.TECH_FAILED",color:"danger",boardColumn:"REJECTED",order:920},FINAL_INTERVIEW:{key:"FINAL_INTERVIEW",stage:"INTERVIEW",labelKey:"status.FINAL_INTERVIEW",color:"purple",boardColumn:"INTERVIEW",order:240},TEST_TASK_RECEIVED:{key:"TEST_TASK_RECEIVED",stage:"INTERVIEW",labelKey:"status.TEST_TASK_RECEIVED",color:"purple",boardColumn:"INTERVIEW",order:250},TEST_TASK_SUBMITTED:{key:"TEST_TASK_SUBMITTED",stage:"INTERVIEW",labelKey:"status.TEST_TASK_SUBMITTED",color:"purple",boardColumn:"INTERVIEW",order:260},WAITING_DECISION:{key:"WAITING_DECISION",stage:"INTERVIEW",labelKey:"status.WAITING_DECISION",color:"purple",boardColumn:"INTERVIEW",order:270},OFFER_RECEIVED:{key:"OFFER_RECEIVED",stage:"OFFER",labelKey:"status.OFFER_RECEIVED",color:"success",boardColumn:"OFFER",order:300},OFFER_REVIEWING:{key:"OFFER_REVIEWING",stage:"OFFER",labelKey:"status.OFFER_REVIEWING",color:"success",boardColumn:"OFFER",order:310},NEGOTIATING:{key:"NEGOTIATING",stage:"OFFER",labelKey:"status.NEGOTIATING",color:"success",boardColumn:"OFFER",order:320},OFFER_ACCEPTED:{key:"OFFER_ACCEPTED",stage:"HIRED",labelKey:"status.OFFER_ACCEPTED",color:"success",boardColumn:"OFFER",order:330},OFFER_DECLINED:{key:"OFFER_DECLINED",stage:"ARCHIVED",labelKey:"status.OFFER_DECLINED",color:"neutral",boardColumn:"REJECTED",order:800},OFFER_RESCINDED:{key:"OFFER_RESCINDED",stage:"REJECTED",labelKey:"status.OFFER_RESCINDED",color:"danger",boardColumn:"REJECTED",order:930},START_PLANNED:{key:"START_PLANNED",stage:"HIRED",labelKey:"status.START_PLANNED",color:"success",boardColumn:"OFFER",order:400},STARTED:{key:"STARTED",stage:"HIRED",labelKey:"status.STARTED",color:"success",boardColumn:"OFFER",order:410},REJECTED_PRE_INTERVIEW:{key:"REJECTED_PRE_INTERVIEW",stage:"REJECTED",labelKey:"status.REJECTED_PRE_INTERVIEW",color:"danger",boardColumn:"REJECTED",order:940},REJECTED_AFTER_INTERVIEW:{key:"REJECTED_AFTER_INTERVIEW",stage:"REJECTED",labelKey:"status.REJECTED_AFTER_INTERVIEW",color:"danger",boardColumn:"REJECTED",order:950},ROLE_CLOSED:{key:"ROLE_CLOSED",stage:"REJECTED",labelKey:"status.ROLE_CLOSED",color:"danger",boardColumn:"REJECTED",order:960},GHOSTING:{key:"GHOSTING",stage:"NO_RESPONSE",labelKey:"status.GHOSTING",color:"danger",boardColumn:"REJECTED",order:970},ARCHIVED_GENERAL:{key:"ARCHIVED_GENERAL",stage:"ARCHIVED",labelKey:"status.ARCHIVED_GENERAL",color:"neutral",boardColumn:"REJECTED",order:980},KEEP_IN_TOUCH:{key:"KEEP_IN_TOUCH",stage:"ARCHIVED",labelKey:"status.KEEP_IN_TOUCH",color:"neutral",boardColumn:"REJECTED",order:990},WITHDREW_BEFORE_START:{key:"WITHDREW_BEFORE_START",stage:"ARCHIVED",labelKey:"status.WITHDREW_BEFORE_START",color:"neutral",boardColumn:"REJECTED",order:995}}).map(([e,t])=>[e,{...t,boardColumn:t.stage}])),n=Object.keys(o),a={ACTIVE:{key:"ACTIVE",labelKey:"board.column.ACTIVE",order:1},INTERVIEW:{key:"INTERVIEW",labelKey:"board.column.INTERVIEW",order:2},OFFER:{key:"OFFER",labelKey:"board.column.OFFER",order:3},HIRED:{key:"HIRED",labelKey:"board.column.HIRED",order:4},REJECTED:{key:"REJECTED",labelKey:"board.column.REJECTED",order:5},NO_RESPONSE:{key:"NO_RESPONSE",labelKey:"board.column.NO_RESPONSE",order:6},ARCHIVED:{key:"ARCHIVED",labelKey:"board.column.ARCHIVED",order:7}},l=s.map(e=>a[e]).sort((e,t)=>e.order-t.order),d={neutral:"bg-muted text-foreground",info:"bg-blue-100 text-blue-900",warning:"bg-amber-100 text-amber-900",success:"bg-emerald-100 text-emerald-900",danger:"bg-red-100 text-red-900",purple:"bg-purple-100 text-purple-900"},i={neutral:"bg-status-neutral",info:"bg-status-info",warning:"bg-status-warning",success:"bg-status-success",danger:"bg-status-danger",purple:"bg-status-purple"},u={neutral:"#64748b",info:"#2563eb",warning:"#d97706",success:"#059669",danger:"#dc2626",purple:"#7c3aed"},c={ACTIVE:"info",INTERVIEW:"purple",OFFER:"warning",HIRED:"success",REJECTED:"danger",NO_RESPONSE:"neutral",ARCHIVED:"neutral"};function E(e){return c[p(e).stage]}const m={ACTIVE:"info",INTERVIEW:"purple",OFFER:"warning",HIRED:"success",REJECTED:"danger",NO_RESPONSE:"neutral",ARCHIVED:"neutral"},f={ACTIVE:u[m.ACTIVE],INTERVIEW:u[m.INTERVIEW],OFFER:u[m.OFFER],HIRED:u[m.HIRED],REJECTED:u[m.REJECTED],NO_RESPONSE:u[m.NO_RESPONSE],ARCHIVED:u[m.ARCHIVED]},x=Object.values(o).sort((e,t)=>e.order-t.order);function b(e){return"string"==typeof e&&e in o}function p(e){return o[e]}function g(e){const t=o[e];return t?.boardColumn??"ACTIVE"}function I(e){return x.filter(t=>t.stage===e)}const R={SAVED:"SAVED",PLANNED:"READY_TO_APPLY",APPLIED:"APPLIED",VIEWED:"RESPONSE_RECEIVED",INTERVIEW_1:"HR_CALL_SCHEDULED",INTERVIEW_2:"TECH_SCHEDULED",TEST_TASK:"TEST_TASK_RECEIVED",OFFER:"OFFER_RECEIVED",REJECTED:"REJECTED_PRE_INTERVIEW",NO_RESPONSE:"GHOSTING"};function y(e){if("string"!=typeof e)return null;const t=e.toUpperCase();return t in R?R[t]:null}function N(e){return e&&"object"==typeof e?e:null}function h(e){if(b(e))return e;const t=y(e);if(t)return t;if("string"==typeof e){const t=e.trim().toUpperCase().replace(/[\s-]+/g,"_");if(b(t))return t;if(s.includes(t))return function(e){const t=x.filter(t=>t.boardColumn===e).sort((e,t)=>e.order-t.order)[0];return t?.key??"SAVED"}(t)}return null}const T=function(e){const t=N(e),r=N(t?.process),s=r?.stage,n=r?.subStatus;if("string"==typeof s&&"string"==typeof n&&b(n))return{stage:o[n].stage,subStatus:n,changed:s!==o[n].stage};const a=y(r?.status);return a?{stage:o[a].stage,subStatus:a,changed:!0}:{stage:"ACTIVE",subStatus:"SAVED",changed:!0}}},51728(e,t,r){r.d(t,{w:()=>o});var s=r(67167);function o(e){return{ensureUserDoc:t=>(0,s.Ag)(e,t),createApplication:(t,r)=>(0,s.tM)(e,t,r),queryPipelineByStatus:(t,r,o)=>(0,s.Ms)(e,t,r,o),queryAllActiveApplications:(t,r)=>(0,s.De)(e,t,r),queryTodayTopPriority:(t,r)=>(0,s.Fr)(e,t,r),getApplicationHistory:(t,r,o)=>(0,s.b7)(e,t,r,o),queryFollowUpsDue:(t,r)=>(0,s.mx)(e,t,r),autoMarkGhosting:(t,r)=>(0,s.C9)(e,t,r,30)}}},64269(e,t,r){r.d(t,{Ev:()=>ie,$1:()=>N,Ze:()=>R,ny:()=>p,QK:()=>I,GZ:()=>f,fp:()=>fe,Se:()=>j,kW:()=>ce,zj:()=>ne});var s=r(22022),o=r(39819),n=r(46681),a=r(97234),l=r(96540),d=r(74848);const i={user:"ðŸ‘¤",question:"â“",loop:"ðŸ”",add:"âž•",total:"ðŸ”—",new:"ðŸ†•",applied:"ðŸ“„",saved:"ðŸ”„",interview:"âœ‰ï¸",offer:"ðŸŽ‰",hired:"âœ…",rejected:"âš ï¸",no_response:"â³"},u={user:"text-foreground",question:"text-foreground",loop:"text-foreground",add:"text-foreground",total:"text-foreground",new:"text-slate-700 dark:text-slate-200",applied:"text-status-info",saved:"text-status-info",interview:"text-status-purple",offer:"text-status-warning",hired:"text-status-success",rejected:"text-status-danger",no_response:"text-status-neutral"};function c({name:e,size:t=18,className:r,title:s}){return(0,d.jsx)("span",{"aria-hidden":!s||void 0,title:s,style:{fontSize:t},className:["leading-none",u[e],r??""].join(" ").trim(),children:i[e]})}function E({label:e,value:t}){return(0,d.jsxs)("div",{className:"rounded-2xl border border-border bg-muted/30 p-3",children:[(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:e}),(0,d.jsx)("div",{className:"mt-1 text-base font-semibold text-foreground",children:t})]})}function m({col:e,label:t}){const r=o.GX[e];return(0,d.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,d.jsx)("span",{className:"h-2 w-2 rounded-full "+o.Ss[r]}),(0,d.jsx)("span",{children:t})]})}function f({isLoading:e,error:t,summary:r,onGoJobs:o,onAddFirstJob:l}){const{t:i}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"});return e?(0,d.jsx)(a.Z,{padding:"md",className:"rounded-3xl",children:(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loadingâ€¦"})}):t?(0,d.jsxs)(a.Z,{padding:"md",className:"rounded-3xl",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-foreground",children:"Couldnâ€™t load jobs"}),(0,d.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:t})]}):0===r.total?(0,d.jsxs)(a.Z,{padding:"md",className:"rounded-3xl",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsx)("div",{className:"text-base font-semibold text-foreground",children:i("stats.empty.title","Add your first job")}),(0,d.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:i("stats.empty.subtitle","Start tracking your applications â€” your statistics will appear here.")})]}),(0,d.jsx)(n.$n,{variant:"outline",shadow:"sm",onClick:l,children:i("stats.empty.cta","Add job")})]}),(0,d.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 sm:grid-cols-6",children:[(0,d.jsx)(E,{label:i("board.column.ACTIVE","Active"),value:0}),(0,d.jsx)(E,{label:i("board.column.INTERVIEW","Interview"),value:0}),(0,d.jsx)(E,{label:i("board.column.OFFER","Offer"),value:0}),(0,d.jsx)(E,{label:i("board.column.HIRED","Hired"),value:0}),(0,d.jsx)(E,{label:i("board.column.REJECTED","Rejected"),value:0}),(0,d.jsx)(E,{label:i("board.column.NO_RESPONSE","No response"),value:0})]})]}):(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-foreground",children:i("stats.title","Statistics")}),(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:[(0,d.jsx)(n.rk,{onClick:()=>o?.("ACTIVE"),children:(0,d.jsx)(n.nO,{title:(0,d.jsx)(m,{col:"ACTIVE",label:i("board.column.ACTIVE","Active")}),value:r.byColumn.ACTIVE,icon:(0,d.jsx)(c,{name:"applied"})})}),(0,d.jsx)(n.rk,{onClick:()=>o?.("INTERVIEW"),children:(0,d.jsx)(n.nO,{title:(0,d.jsx)(m,{col:"INTERVIEW",label:i("board.column.INTERVIEW","Interview")}),value:r.byColumn.INTERVIEW,icon:(0,d.jsx)(c,{name:"interview"})})}),(0,d.jsx)(n.rk,{onClick:()=>o?.("OFFER"),children:(0,d.jsx)(n.nO,{title:(0,d.jsx)(m,{col:"OFFER",label:i("board.column.OFFER","Offer")}),value:r.byColumn.OFFER,icon:(0,d.jsx)(c,{name:"offer"})})}),(0,d.jsx)(n.rk,{onClick:()=>o?.("HIRED"),children:(0,d.jsx)(n.nO,{title:(0,d.jsx)(m,{col:"HIRED",label:i("board.column.HIRED","Hired")}),value:r.byColumn.HIRED,icon:(0,d.jsx)(c,{name:"hired"})})}),(0,d.jsx)(n.rk,{onClick:()=>o?.("REJECTED"),children:(0,d.jsx)(n.nO,{title:(0,d.jsx)(m,{col:"REJECTED",label:i("board.column.REJECTED","Rejected")}),value:r.byColumn.REJECTED,icon:(0,d.jsx)(c,{name:"rejected"})})}),(0,d.jsx)(n.rk,{onClick:()=>o?.("NO_RESPONSE"),children:(0,d.jsx)(n.nO,{title:(0,d.jsx)(m,{col:"NO_RESPONSE",label:i("board.column.NO_RESPONSE","No response")}),value:r.byColumn.NO_RESPONSE,icon:(0,d.jsx)(c,{name:"no_response"})})})]})]})}const x=o.Vl.filter(e=>"ARCHIVED"!==e);function b(e,t){const r=o.Kk.find(e=>e.key===t);return e(r?.labelKey??`board.column.${t}`,{defaultValue:t})}function p({summary:e,size:t,stroke:r}){const{t:a}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),i=l.useMemo(()=>x.map(t=>({label:b(a,t),value:e.byColumn[t]??0,color:o.EZ[t],className:""})),[e.byColumn,a]);return(0,d.jsxs)(n.Zp,{className:"p-6",children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-foreground",children:a("pipeline.title","Pipeline")}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:a("pipeline.subtitle","By stage")}),(0,d.jsx)("div",{className:"mt-5 flex items-center justify-center",children:(0,d.jsx)(n.V6,{size:t,stroke:r,slices:i,centerTop:a("pipeline.total","Total"),centerBottom:String(e.total)})})]})}function g(e){switch(e){case"new":return"border-sky-200 bg-sky-50 text-sky-700 dark:border-sky-900/50 dark:bg-sky-950/40 dark:text-sky-200";case"saved":return"border-amber-200 bg-amber-50 text-amber-700 dark:border-amber-900/50 dark:bg-amber-950/40 dark:text-amber-200";case"applied":return"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/40 dark:text-blue-200";case"interview":return"border-purple-200 bg-purple-50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/40 dark:text-purple-200";case"offer":return"border-emerald-200 bg-emerald-50 text-emerald-700 dark:border-emerald-900/50 dark:bg-emerald-950/40 dark:text-emerald-200";case"rejected":return"border-red-200 bg-red-50 text-red-700 dark:border-red-900/50 dark:bg-red-950/40 dark:text-red-200";default:return"border-border bg-muted text-foreground"}}function I({jobs:e,onViewAll:t,onOpenJob:r,className:o}){const{t:i}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),[u]=(0,l.useState)(()=>Date.now()),c=(e,t,r)=>String(i(e,{defaultValue:t,...r??{}}));return(0,d.jsxs)(a.Z,{padding:"md",className:["flex h-full flex-col rounded-3xl",o].filter(Boolean).join(" "),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-base font-semibold text-foreground",children:c("recent.title","Recent applications")}),(0,d.jsx)(n.$n,{variant:"link",className:"px-0",onClick:t,children:c("recent.viewAll","View all")})]}),0===e.length?(0,d.jsx)("div",{className:"mt-3 text-sm text-muted-foreground",children:c("recent.empty","No applications yet. Add your first one to see activity here.")}):(0,d.jsx)("div",{className:"mt-4 flex-1 space-y-2 overflow-y-auto pr-1",children:e.map(e=>{const s=function(e,t,r){if(!t)return null;const s=r-t;if(s<0)return e("recent.time.justNow","just now");const o=Math.floor(s/1e3);if(o<60)return e("recent.time.justNow","just now");const n=Math.floor(o/60);if(n<60)return e("recent.time.minutesAgo","{{count}}m ago",{count:n});const a=Math.floor(n/60);if(a<24)return e("recent.time.hoursAgo","{{count}}h ago",{count:a});const l=Math.floor(a/24);if(l<7)return e("recent.time.daysAgo","{{count}}d ago",{count:l});const d=Math.floor(l/7);if(d<5)return e("recent.time.weeksAgo","{{count}}w ago",{count:d});const i=Math.floor(l/30);return i<12?e("recent.time.monthsAgo","{{count}}mo ago",{count:i}):e("recent.time.yearsAgo","{{count}}y ago",{count:Math.floor(l/365)})}(c,function(e){if(!e)return null;if("function"==typeof e.toMillis)return e.toMillis();if("number"==typeof e)return e;const t=e.seconds;return"number"==typeof t?1e3*t:null}(e.createdAt),u),o=function(e){const t="string"==typeof e?e.trim().toLowerCase():"";return"new"===t?"new":"saved"===t?"saved":"applied"===t?"applied":"interview"===t?"interview":"offer"===t?"offer":"rejected"===t?"rejected":"unknown"}(e.status),n="unknown"===o?c("status.unknown","Unknown"):c(`status.${o}`,o);return(0,d.jsx)("button",{type:"button",onClick:()=>r?r(e.id):t(),className:["w-full text-left","rounded-lg border border-border bg-background p-3","transition-colors","hover:bg-muted","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border","cursor-pointer"].join(" "),children:(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsx)("div",{className:"truncate text-sm font-medium text-foreground",children:e.title||c("recent.untitled","Untitled role")}),(0,d.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:e.company||c("recent.company","Company")})]}),(0,d.jsxs)("div",{className:"shrink-0 text-right",children:[(0,d.jsx)("div",{className:["inline-flex rounded-full border px-2 py-0.5 text-xs font-medium",g(o)].join(" "),children:n}),s&&(0,d.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:[c("recent.created","Created"),"Â ",s]})]})]})},e.id)})})]})}function R({hasJobs:e,onGoProfile:t,onGoQuestions:r,onGoLoop:o,onGoJobs:a,className:l}){const{t:i}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),u=i("common.go"),E=i("common.done");return(0,d.jsx)("div",{className:l,children:(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:max-w-[520px]",children:[(0,d.jsx)(n.bj,{icon:(0,d.jsx)(c,{name:"user"}),title:i("onboarding.setupProfile"),onGo:t,goText:u,doneText:E}),(0,d.jsx)(n.bj,{icon:(0,d.jsx)(c,{name:"question"}),title:i("onboarding.answerQuestions"),onGo:r,goText:u,doneText:E}),(0,d.jsx)(n.bj,{icon:(0,d.jsx)(c,{name:"loop"}),title:i("onboarding.startFirstLoop"),onGo:o,goText:u,doneText:E}),(0,d.jsx)(n.bj,{icon:(0,d.jsx)(c,{name:"add"}),title:i(e?"onboarding.addAnotherJob":"onboarding.addFirstJob"),onGo:a,goText:u,doneText:E})]})})}var y=r(99653);function N({open:e,onOpenChange:t,loops:r,value:o,onChange:a}){const{t:i}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),u="all"===o.mode,c=l.useMemo(()=>{return"selected"!==o.mode?[]:(e=o.selectedLoopIds,Array.from(new Set(e)));var e},[o]),E=l.useCallback(()=>{a({mode:"all"})},[a]),m=l.useCallback(()=>{a({mode:"selected",selectedLoopIds:c})},[a,c]),f=l.useCallback(e=>{const t=new Set(c);t.has(e)?t.delete(e):t.add(e),a({mode:"selected",selectedLoopIds:Array.from(t)})},[a,c]),x=l.useCallback(()=>{a({mode:"selected",selectedLoopIds:r.map(e=>e.id)})},[r,a]),b=l.useCallback(()=>{a({mode:"selected",selectedLoopIds:[]})},[a]);return(0,d.jsx)(n.aF,{open:e,onOpenChange:t,title:i("loopsFilter.title","Dashboard loops"),description:i("loopsFilter.desc","Choose which loops should be included in dashboard stats and recent jobs."),size:"md",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("label",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"radio",name:"dashboard-loops-filter",checked:u,onChange:E}),(0,d.jsx)("span",{className:"text-sm text-foreground",children:i("loopsFilter.all","All loops")})]}),(0,d.jsxs)("label",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"radio",name:"dashboard-loops-filter",checked:!u,onChange:m}),(0,d.jsx)("span",{className:"text-sm text-foreground",children:i("loopsFilter.selected","Only selected loops")})]})]}),u?null:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,d.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:x,children:i("loopsFilter.selectAll","Select all")}),(0,d.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:b,children:i("loopsFilter.clear","Clear")}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground",children:[i("loopsFilter.selectedCount","Selected"),": ",c.length]})]}),(0,d.jsx)("div",{className:"rounded-xl border border-border bg-card",children:0===r.length?(0,d.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:i("loopsFilter.noLoops","No loops found.")}):(0,d.jsx)("ul",{className:"divide-y divide-border",children:r.map(e=>{const t=c.includes(e.id);return(0,d.jsx)("li",{className:"p-3",children:(0,d.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:t,onChange:()=>f(e.id)}),(0,d.jsx)("span",{className:(0,y.xW)("text-sm",t?"text-foreground":"text-muted-foreground"),children:e.name})]})},e.id)})})})]}),(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)(n.$n,{size:"sm",shape:"pill",onClick:()=>t(!1),children:i("common.done","Done")})})]})})}var h=r(3433),T=r(3626);const C=[{to:T.RU[T.Sb.DASHBOARD],labelKey:"tabs.overview",fallback:"Overview",end:!0},{to:T.RU[T.Sb.DASHBOARD_ANALYTICS],labelKey:"tabs.analytics",fallback:"Analytics"},{to:T.RU[T.Sb.DASHBOARD_ACTIVITY],labelKey:"tabs.activity",fallback:"Activity"}];function j(){const{t:e}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"});return(0,d.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:C.map(t=>(0,d.jsx)(h.k2,{to:t.to,end:t.end,className:({isActive:e})=>["rounded-full border px-3 py-1 text-xs font-medium transition",e?"border-foreground/30 bg-muted text-foreground":"border-border text-muted-foreground hover:bg-muted/60"].join(" "),children:e(t.labelKey,t.fallback)},t.to))})}var A=r(32307),D=r(84823),v=r(44653),S=r(66691),O=r(69107),V=r(77984),k=r(23495),_=r(78687),F=r(86279);const w=["ACTIVE","INTERVIEW","OFFER","HIRED","REJECTED","NO_RESPONSE"],P={ACTIVE:"Active",INTERVIEW:"Interview",OFFER:"Offer",HIRED:"Hired",REJECTED:"Rejected",NO_RESPONSE:"No response"},L={ACTIVE:"rgb(var(--status-info))",INTERVIEW:"rgb(var(--status-purple))",OFFER:"rgb(var(--status-warning))",HIRED:"rgb(var(--status-success))",REJECTED:"rgb(var(--status-danger))",NO_RESPONSE:"rgb(var(--status-neutral))"},H={ACTIVE:void 0,INTERVIEW:"6 4",OFFER:"2 3",HIRED:"10 4",REJECTED:"3 2",NO_RESPONSE:"1 3"};function W(e){const[t,r,s]=e.split("-");return t&&r&&s?`${s}.${r}`:e}function M({points:e,mode:t,visible:r,hoverKey:s}){return(0,d.jsx)("div",{className:"h-[260px]",children:(0,d.jsx)(v.u,{width:"100%",height:"100%",children:(0,d.jsxs)(S.b,{data:e,margin:{top:10,right:16,bottom:0,left:0},children:[(0,d.jsx)(O.d,{vertical:!1,strokeDasharray:"3 3"}),(0,d.jsx)(V.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:20,tickFormatter:W}),(0,d.jsx)(k.h,{width:40,tickLine:!1,axisLine:!1,tickMargin:8}),(0,d.jsx)(_.m,{cursor:{strokeDasharray:"3 3"},formatter:(e,t)=>{const r=String(t),s="number"==typeof e?e:Number(e);return[Number.isFinite(s)?Math.round(s):0,P[r]]},labelFormatter:e=>`${e} Â· ${t}`}),w.map(e=>{if(!r[e])return null;const t=null!=s&&s!==e;return(0,d.jsx)(F.N,{type:"monotone",dataKey:e,stroke:L[e],strokeWidth:2,dot:!1,strokeDasharray:H[e],opacity:t?.25:1},e)})]})})})}function K({visible:e,hoverKey:t,onToggle:r,onHover:s}){return(0,d.jsx)("div",{className:"flex flex-wrap gap-2 text-xs",children:w.map(o=>{const n=e[o],a=t===o,l=L[o];return(0,d.jsxs)("button",{type:"button",onClick:()=>r(o),onMouseEnter:()=>s(o),onMouseLeave:()=>s(null),className:"flex items-center gap-2 rounded-full border px-3 py-1 transition-colors "+(n?"bg-transparent":"bg-transparent text-foreground")+(a?" ring-2 ring-ring":""),style:n?{borderColor:l,color:l}:{borderColor:"var(--border)"},children:[(0,d.jsx)("span",{className:"inline-block h-2 w-2 rounded-full border",style:n?{backgroundColor:l,borderColor:l}:{backgroundColor:"transparent",borderColor:l}}),P[o]]},o)})})}function J(e){if(null==e)return null;if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){const t=Date.parse(e);return Number.isFinite(t)?t:null}if(function(e){return!!G(e)&&"function"==typeof e.toMillis}(e)){const t=e.toMillis();return"number"==typeof t&&Number.isFinite(t)?t:null}return function(e){return!!G(e)&&"number"==typeof e.seconds&&Number.isFinite(e.seconds)}(e)?Math.round(1e3*e.seconds):null}function G(e){return"object"==typeof e&&null!==e}function U(e,t){const r=Math.abs(t-e);return Math.round(r/864e5)}function $(e){const t=e.filter(e=>Number.isFinite(e)).sort((e,t)=>e-t);if(0===t.length)return null;const r=Math.floor(t.length/2);return t.length%2==1?t[r]:Math.round((t[r-1]+t[r])/2)}function B(e){return(0,o.cW)(e)?e:"SAVED"}function Y(){const e={};for(const t of o.i2)e[t]=0;return e}function Z(e){const t=new Date(e);return t.setHours(0,0,0,0),t.getTime()}function z(e,t){const r=new Date(e);return new Intl.DateTimeFormat(t,{month:"short",day:"2-digit"}).format(r)}function Q(e,t){const r=Z(Date.now())+864e5,s=r-24*t.days*60*60*1e3,o=[];for(let e=0;e<t.days;e++){const r=s+24*e*60*60*1e3,n=r+864e5;o.push({label:z(r,t.locale),startMs:r,endMs:n,counts:Y()})}for(const n of e){const e=J(t.byUpdatedAt?n.updatedAt:n.createdAt);if(null==e)continue;if(e<s||e>=r)continue;const a=o[Math.floor((Z(e)-s)/864e5)];if(!a)continue;const l=B(n.status);a.counts[l]+=1}return o}const q=Date.now();function X(e){const t=new Date(e);return t.setHours(0,0,0,0),t.getTime()}function ee(e){const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function te({active:e,children:t,onClick:r}){return(0,d.jsx)(n.$n,{onClick:r,variant:e?"secondary":"ghost",size:"sm",shape:"pill",shadow:"none",className:["h-9 px-3 text-xs",e?"text-foreground":"text-muted-foreground hover:text-foreground"].join(" "),children:t})}function re({children:e}){return(0,d.jsx)("div",{className:"flex items-center gap-1 rounded-full border bg-background p-1",children:e})}function se(e,t){try{return new Intl.DateTimeFormat(t,{day:"2-digit",month:"2-digit"}).format(e)}catch{return e.toLocaleDateString()}}function oe(e){const t=Date.parse(e);return Number.isFinite(t)?new Date(t):null}function ne({matches:e,range:t,mode:r,customRange:a,onRangeChange:i,onModeChange:u,onCustomRangeChange:c}){const{t:E,i18n:m}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),[f,x]=(0,l.useState)({ACTIVE:!0,INTERVIEW:!0,OFFER:!0,HIRED:!0,REJECTED:!0,NO_RESPONSE:!1}),[b,p]=(0,l.useState)(null),[g,I]=(0,l.useState)(!1),[R,y]=(0,l.useState)(()=>a?a.from.toISOString().slice(0,10):""),[N,h]=(0,l.useState)(()=>a?a.to.toISOString().slice(0,10):""),T=(0,l.useMemo)(()=>e.map(e=>{const t=(0,D.k)(e.createdAt),r=(0,D.k)(e.updatedAt)||t;return{status:e.status,createdAt:t,updatedAt:r}}).filter(e=>e.createdAt>0),[e]),C=(0,l.useMemo)(()=>"custom"===t&&a?{fromMs:a.from.getTime(),toMs:a.to.getTime()}:null,[t,a]),j=function(e,t,r,s){return(0,l.useMemo)(()=>{const o="updated"===r;if("custom"===t&&s?.fromMs&&s?.toMs){const t=X(s.fromMs),r=X(s.toMs),n=Math.max(1,Math.ceil((r-t)/864e5)+1);return Q(e,{days:n,byUpdatedAt:o,locale:"en"}).filter(e=>e.startMs>=t&&e.startMs<=r)}const n=function(e){return"12m"===e?365:"90d"===e?90:"30d"===e?30:7}(t),a=Q(e,{days:n,byUpdatedAt:o,locale:"en"}),l=q-24*n*60*60*1e3;return a.filter(e=>e.startMs>=l)},[e,r,t,s])}(T,t,r,C),v=function(e){return(0,l.useMemo)(()=>{const t=(e,t)=>{let r=0;for(const s of o.i2)(0,o.vy)(s)===t&&(r+=e[s]??0);return r};return{points:e.map(e=>{const r=t(e.counts,"ACTIVE"),s=t(e.counts,"INTERVIEW"),o=t(e.counts,"OFFER"),n=t(e.counts,"HIRED"),a=t(e.counts,"REJECTED"),l=t(e.counts,"NO_RESPONSE"),d=r+s+o+n+a+l;return{date:ee(e.startMs),ACTIVE:r,INTERVIEW:s,OFFER:o,HIRED:n,REJECTED:a,NO_RESPONSE:l,total:d}})}},[e])}(j,m.language),S=function(e){return(0,l.useMemo)(()=>{let t=0;for(const r of e)for(const e of o.i2)t+=r.counts[e]??0;return t},[e])}(j),O=(0,l.useMemo)(()=>{const e=String("updated"===r?E("trends.mode.updated",{defaultValue:"By last update"}):E("trends.mode.created",{defaultValue:"By creation date"}));return"custom"===t&&a?`${e} Â· ${se(a.from,m.language)}â€“${se(a.to,m.language)}`:`${e} Â· ${String(E(`range.${t}`,{defaultValue:t}))}`},[r,t,E,a,m.language]);return(0,d.jsxs)(n.Zp,{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-foreground",children:String(E("trends.title",{defaultValue:"Trends"}))}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:O})]}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,d.jsxs)(re,{children:[["7d","30d","90d","12m"].map(e=>(0,d.jsx)(te,{active:t===e,onClick:()=>i(e),children:String(E(`range.${e}`,{defaultValue:e}))},e)),(0,d.jsxs)(n.$n,{onClick:function(){const e=new Date,t=a?.to??e,r=a?.from??new Date(e.getTime()-5184e5);y(r.toISOString().slice(0,10)),h(t.toISOString().slice(0,10)),I(!0)},variant:"custom"===t?"secondary":"ghost",size:"sm",shape:"pill",shadow:"none",className:["h-9 gap-2 px-3 text-xs","custom"===t?"text-foreground":"text-muted-foreground hover:text-foreground"].join(" "),children:[(0,d.jsx)(A.A,{className:"h-4 w-4"}),String(E("range.custom",{defaultValue:"Custom"}))]})]}),(0,d.jsx)("div",{className:"mx-1 hidden h-6 w-px bg-border sm:block"}),(0,d.jsxs)(re,{children:[(0,d.jsx)(te,{active:"created"===r,onClick:()=>u("created"),children:String(E("trends.created",{defaultValue:"Created"}))}),(0,d.jsx)(te,{active:"updated"===r,onClick:()=>u("updated"),children:String(E("trends.updated",{defaultValue:"Updated"}))})]})]})]}),(0,d.jsx)(n.aF,{open:g,onOpenChange:I,title:String(E("range.customTitle",{defaultValue:"Custom period"})),children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,d.jsxs)("label",{className:"space-y-1 text-sm",children:[(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:String(E("range.from",{defaultValue:"From"}))}),(0,d.jsx)("input",{type:"date",value:R,onChange:e=>y(e.target.value),className:"h-10 w-full rounded-xl border border-border bg-background px-3 text-sm text-foreground"})]}),(0,d.jsxs)("label",{className:"space-y-1 text-sm",children:[(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:String(E("range.to",{defaultValue:"To"}))}),(0,d.jsx)("input",{type:"date",value:N,onChange:e=>h(e.target.value),className:"h-10 w-full rounded-xl border border-border bg-background px-3 text-sm text-foreground"})]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(n.$n,{variant:"outline",onClick:()=>I(!1),children:String(E("common.cancel",{defaultValue:"Cancel"}))}),(0,d.jsx)(n.$n,{onClick:function(){const e=oe(R),t=oe(N);if(!e||!t)return;const r=e.getTime(),s=t.getTime();c(r<=s?{from:e,to:t}:{from:t,to:e}),i("custom"),I(!1)},children:String(E("common.apply",{defaultValue:"Apply"}))})]})]})}),(0,d.jsx)("div",{className:"mt-6",children:0===S?(0,d.jsx)("div",{className:"flex min-h-[260px] items-center justify-center rounded-2xl border bg-muted/20 px-6 py-10 text-center",children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-foreground",children:String(E("trends.emptyTitle",{defaultValue:"No data yet"}))}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:String(E("trends.emptySubtitle",{defaultValue:"Add jobs and update statuses to see trends here."}))})]})}):(0,d.jsx)("div",{className:"rounded-2xl border bg-background p-3",children:(0,d.jsx)(M,{points:v.points,mode:r,visible:f,hoverKey:b})})}),S>0&&(0,d.jsx)(K,{visible:f,hoverKey:b,onToggle:function(e){x(t=>({...t,[e]:!t[e]}))},onHover:p})]})}const ae=o.Vl.filter(e=>"ARCHIVED"!==e);function le(e,t){return t<=0?0:Math.round(e/t*100)}function de(e){return J(e.changedAt??e.date??null)}function ie({matches:e}){const{t}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),[r]=(0,l.useState)(()=>Date.now()),{activeToInterview:a,interviewToOffer:i,offerToHired:u,medDaysToInterview:c,medDaysToOffer:E,staleCounts:m}=(0,l.useMemo)(()=>{let t=0,s=0,n=0,a=0,l=0,d=0;const i=[],u=[],c=Object.fromEntries(o.Vl.map(e=>[e,0]));for(const E of e){const e=E.statusHistory??[];if(!e.length)continue;const m=[...e].sort((e,t)=>(de(e)??0)-(de(t)??0)),f=m.map(e=>(0,o.vy)(e.status)),x=f.indexOf("ACTIVE"),b=f.indexOf("INTERVIEW"),p=f.indexOf("OFFER"),g=f.indexOf("HIRED");if(-1!==x&&t++,-1!==b&&s++,-1!==p&&n++,-1!==x&&-1!==b&&b>x){a++;const e=de(m[x]),t=de(m[b]);e&&t&&i.push(U(e,t))}if(-1!==b&&-1!==p&&p>b){l++;const e=de(m[b]),t=de(m[p]);e&&t&&u.push(U(e,t))}-1!==p&&-1!==g&&g>p&&d++;const I=m[m.length-1],R=(0,o.vy)(I.status),y=de(I);y&&U(y,r)>=14&&ae.includes(R)&&(c[R]+=1)}return{activeToInterview:le(a,t),interviewToOffer:le(l,s),offerToHired:le(d,n),medDaysToInterview:$(i),medDaysToOffer:$(u),staleCounts:c}},[e,r]),f=m.ACTIVE+m.INTERVIEW+m.OFFER;return(0,d.jsxs)(n.Zp,{className:"p-6",children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-foreground",children:t("insights.title","Insights")}),(0,d.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[(0,d.jsx)(ue,{label:"Active â†’ Interview",value:`${a}%`}),(0,d.jsx)(ue,{label:"Interview â†’ Offer",value:`${i}%`}),(0,d.jsx)(ue,{label:"Offer â†’ Hired",value:`${u}%`}),(0,d.jsx)(ue,{label:"Median to Interview",value:null==c?"â€”":`${c}d`}),(0,d.jsx)(ue,{label:"Median to Offer",value:null==E?"â€”":`${E}d`}),(0,d.jsx)(ue,{label:"Needs attention",value:`${f}`})]})]})}function ue({label:e,value:t}){return(0,d.jsxs)("div",{className:"rounded-xl border border-border bg-background px-4 py-3",children:[(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:e}),(0,d.jsx)("div",{className:"mt-1 text-lg font-semibold text-foreground",children:t})]})}function ce({matches:e,days:t=14,className:r}){const{t:a,i18n:i}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),u=(0,h.Zp)(),[c]=(0,l.useState)(()=>Date.now()),E=(0,l.useMemo)(()=>e.map(e=>{const t=J(e.updatedAt)||J(e.createdAt),r=B(e.status);return{id:e.id,title:e.title??null,company:e.company??null,status:r,when:t}}).filter(e=>null!=e.when&&U(e.when,c)<=t).sort((e,t)=>t.when-e.when).slice(0,24),[e,t,c]);return(0,d.jsxs)(n.Zp,{className:["flex h-full flex-col p-6",r].filter(Boolean).join(" "),children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-foreground",children:a("timeline.title","Timeline")}),(0,d.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:a("timeline.subtitle","Last {{days}} days",{days:t})})]}),(0,d.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:()=>u(T.RU[T.Sb.APPLICATIONS]),children:a("timeline.viewAll","View all")})]}),0===E.length?(0,d.jsx)("div",{className:"mt-4 text-sm text-muted-foreground",children:a("timeline.empty","No recent updates")}):(0,d.jsx)("div",{className:"mt-4 flex-1 space-y-3 overflow-y-auto pr-1",children:E.map(e=>{return(0,d.jsxs)("button",{type:"button",className:"w-full rounded-lg border border-border bg-background p-3 text-left transition hover:bg-muted/40",onClick:()=>u(`${T.RU[T.Sb.APPLICATIONS]}/${e.id}`),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsx)("div",{className:"truncate text-sm font-medium text-foreground",children:e.title||a("recent.untitled","Untitled")}),(0,d.jsx)("div",{className:"mt-0.5 truncate text-xs text-muted-foreground",children:e.company||a("recent.noCompany","No company")})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:(t=e.status,o.Rg[(0,o.Xu)(t)])}}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:a(`status.${e.status}`,e.status)})]})]}),(0,d.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:new Date(e.when).toLocaleDateString(i.language,{year:"numeric",month:"short",day:"2-digit"})})]},e.id);var t})})]})}const Ee=o.Vl.filter(e=>"ARCHIVED"!==e);function me(e,t){const r=o.Kk.find(e=>e.key===t);return e(r?.labelKey??`board.column.${t}`,{defaultValue:t})}function fe({matches:e}){const{t}=(0,s.Bd)(void 0,{keyPrefix:"dashboard"}),r=(0,l.useMemo)(()=>Ee.map(e=>({key:e,label:me(t,e)})),[t]),a=(0,l.useMemo)(()=>{const r={};for(const e of Ee)r[e]=0;for(const t of e){const e=(0,o.LJ)(t.status);if(!e)continue;const s=(0,o.vy)(e);Ee.includes(s)&&(r[s]+=1)}const s=Ee.reduce((e,t)=>e+(r[t]??0),0),n={};for(const e of Ee)n[e]=s?(r[e]??0)/s:0;return[{key:"mix",label:t("radar.mix","Mix"),color:"#2563EB",values:n}]},[e,t]),i=(0,l.useMemo)(()=>{const e=a[0],t=e?.values??{};return Ee.map(e=>({col:e,value:t[e]??0}))},[a]);return(0,d.jsxs)(n.Zp,{className:"p-6",children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-foreground",children:t("radar.title","Pipeline mix")}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:t("radar.subtitle","Share by stage")}),(0,d.jsx)("div",{className:"mt-5 flex items-center justify-center",children:(0,d.jsx)(n.VW,{size:240,axes:r,series:a})}),(0,d.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:i.map(({col:e,value:r})=>{const s=o.EZ[e],n=me(t,e);return(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{backgroundColor:s}}),(0,d.jsx)("span",{className:"text-muted-foreground",children:n})]}),(0,d.jsxs)("div",{className:"tabular-nums text-foreground",children:[Math.round(100*r),"%"]})]},e)})})]})}},84823(e,t,r){function s(e){if(e&&"function"==typeof e.toMillis)return e.toMillis();if("number"==typeof e)return e;if("string"==typeof e){const t=Date.parse(e);return Number.isFinite(t)?t:0}const t=e?.seconds;return"number"==typeof t?1e3*t:0}function o(e){if(null==e)return;const t=s(e);return t>0?t:void 0}r.d(t,{k:()=>s,w:()=>o})}}]);
//# sourceMappingURL=346.0d0b038f.chunk.js.map